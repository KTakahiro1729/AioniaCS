const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CharacterHub-CIDC_e6_.js","./CharacterHub-B1RHMqed.css","./CharacterHubControls-CM0iiRLs.js","./CharacterHubControls-B0Tx3elB.css","./IoModal-UXiDlZt0.js","./IoModal-BvcSoiwl.css","./ShareOptions-B7TLj2XC.js","./ShareOptions-NJAuv7XF.css"])))=>i.map(i=>d[i]);
var Xd=Object.defineProperty;var Jd=(e,t,n)=>t in e?Xd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ye=(e,t,n)=>Jd(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();/**
* @vue/shared v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function aa(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const xe={},vi=[],Yt=()=>{},Qd=()=>!1,xs=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),la=e=>e.startsWith("onUpdate:"),He=Object.assign,ca=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},eh=Object.prototype.hasOwnProperty,me=(e,t)=>eh.call(e,t),Y=Array.isArray,wi=e=>Er(e)==="[object Map]",Ii=e=>Er(e)==="[object Set]",nl=e=>Er(e)==="[object Date]",Q=e=>typeof e=="function",Ie=e=>typeof e=="string",Mt=e=>typeof e=="symbol",ke=e=>e!==null&&typeof e=="object",tu=e=>(ke(e)||Q(e))&&Q(e.then)&&Q(e.catch),nu=Object.prototype.toString,Er=e=>nu.call(e),th=e=>Er(e).slice(8,-1),iu=e=>Er(e)==="[object Object]",ua=e=>Ie(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Ki=aa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ks=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},nh=/-(\w)/g,Dt=ks(e=>e.replace(nh,(t,n)=>n?n.toUpperCase():"")),ih=/\B([A-Z])/g,si=ks(e=>e.replace(ih,"-$1").toLowerCase()),Ss=ks(e=>e.charAt(0).toUpperCase()+e.slice(1)),Xr=ks(e=>e?`on${Ss(e)}`:""),In=(e,t)=>!Object.is(e,t),Jr=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},ru=(e,t,n,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:n})},ss=e=>{const t=parseFloat(e);return isNaN(t)?e:t},rh=e=>{const t=Ie(e)?Number(e):NaN;return isNaN(t)?e:t};let il;const Es=()=>il||(il=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function fa(e){if(Y(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=Ie(i)?lh(i):fa(i);if(r)for(const s in r)t[s]=r[s]}return t}else if(Ie(e)||ke(e))return e}const sh=/;(?![^(]*\))/g,oh=/:([^]+)/,ah=/\/\*[^]*?\*\//g;function lh(e){const t={};return e.replace(ah,"").split(sh).forEach(n=>{if(n){const i=n.split(oh);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function ht(e){let t="";if(Ie(e))t=e;else if(Y(e))for(let n=0;n<e.length;n++){const i=ht(e[n]);i&&(t+=i+" ")}else if(ke(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const ch="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",uh=aa(ch);function su(e){return!!e||e===""}function fh(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=Qn(e[i],t[i]);return n}function Qn(e,t){if(e===t)return!0;let n=nl(e),i=nl(t);if(n||i)return n&&i?e.getTime()===t.getTime():!1;if(n=Mt(e),i=Mt(t),n||i)return e===t;if(n=Y(e),i=Y(t),n||i)return n&&i?fh(e,t):!1;if(n=ke(e),i=ke(t),n||i){if(!n||!i)return!1;const r=Object.keys(e).length,s=Object.keys(t).length;if(r!==s)return!1;for(const o in e){const a=e.hasOwnProperty(o),c=t.hasOwnProperty(o);if(a&&!c||!a&&c||!Qn(e[o],t[o]))return!1}}return String(e)===String(t)}function da(e,t){return e.findIndex(n=>Qn(n,t))}const ou=e=>!!(e&&e.__v_isRef===!0),he=e=>Ie(e)?e:e==null?"":Y(e)||ke(e)&&(e.toString===nu||!Q(e.toString))?ou(e)?he(e.value):JSON.stringify(e,au,2):String(e),au=(e,t)=>ou(t)?au(e,t.value):wi(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,r],s)=>(n[Js(i,s)+" =>"]=r,n),{})}:Ii(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Js(n))}:Mt(t)?Js(t):ke(t)&&!Y(t)&&!iu(t)?String(t):t,Js=(e,t="")=>{var n;return Mt(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Je;class lu{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Je,!t&&Je&&(this.index=(Je.scopes||(Je.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Je;try{return Je=this,t()}finally{Je=n}}}on(){++this._on===1&&(this.prevScope=Je,Je=this)}off(){this._on>0&&--this._on===0&&(Je=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function cu(e){return new lu(e)}function uu(){return Je}function dh(e,t=!1){Je&&Je.cleanups.push(e)}let Se;const Qs=new WeakSet;class fu{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Je&&Je.active&&Je.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Qs.has(this)&&(Qs.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||hu(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,rl(this),pu(this);const t=Se,n=Pt;Se=this,Pt=!0;try{return this.fn()}finally{gu(this),Se=t,Pt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)ga(t);this.deps=this.depsTail=void 0,rl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Qs.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){$o(this)&&this.run()}get dirty(){return $o(this)}}let du=0,Yi,Xi;function hu(e,t=!1){if(e.flags|=8,t){e.next=Xi,Xi=e;return}e.next=Yi,Yi=e}function ha(){du++}function pa(){if(--du>0)return;if(Xi){let t=Xi;for(Xi=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Yi;){let t=Yi;for(Yi=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){e||(e=i)}t=n}}if(e)throw e}function pu(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function gu(e){let t,n=e.depsTail,i=n;for(;i;){const r=i.prevDep;i.version===-1?(i===n&&(n=r),ga(i),hh(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=r}e.deps=t,e.depsTail=n}function $o(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(mu(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function mu(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===lr)||(e.globalVersion=lr,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!$o(e))))return;e.flags|=2;const t=e.dep,n=Se,i=Pt;Se=e,Pt=!0;try{pu(e);const r=e.fn(e._value);(t.version===0||In(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{Se=n,Pt=i,gu(e),e.flags&=-3}}function ga(e,t=!1){const{dep:n,prevSub:i,nextSub:r}=e;if(i&&(i.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=i,e.nextSub=void 0),n.subs===e&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)ga(s,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function hh(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Pt=!0;const _u=[];function pn(){_u.push(Pt),Pt=!1}function gn(){const e=_u.pop();Pt=e===void 0?!0:e}function rl(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Se;Se=void 0;try{t()}finally{Se=n}}}let lr=0;class ph{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ma{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Se||!Pt||Se===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Se)n=this.activeLink=new ph(Se,this),Se.deps?(n.prevDep=Se.depsTail,Se.depsTail.nextDep=n,Se.depsTail=n):Se.deps=Se.depsTail=n,bu(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=Se.depsTail,n.nextDep=void 0,Se.depsTail.nextDep=n,Se.depsTail=n,Se.deps===n&&(Se.deps=i)}return n}trigger(t){this.version++,lr++,this.notify(t)}notify(t){ha();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{pa()}}}function bu(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)bu(i)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const os=new WeakMap,Kn=Symbol(""),Oo=Symbol(""),cr=Symbol("");function Qe(e,t,n){if(Pt&&Se){let i=os.get(e);i||os.set(e,i=new Map);let r=i.get(n);r||(i.set(n,r=new ma),r.map=i,r.key=n),r.track()}}function un(e,t,n,i,r,s){const o=os.get(e);if(!o){lr++;return}const a=c=>{c&&c.trigger()};if(ha(),t==="clear")o.forEach(a);else{const c=Y(e),l=c&&ua(n);if(c&&n==="length"){const u=Number(i);o.forEach((d,f)=>{(f==="length"||f===cr||!Mt(f)&&f>=u)&&a(d)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),l&&a(o.get(cr)),t){case"add":c?l&&a(o.get("length")):(a(o.get(Kn)),wi(e)&&a(o.get(Oo)));break;case"delete":c||(a(o.get(Kn)),wi(e)&&a(o.get(Oo)));break;case"set":wi(e)&&a(o.get(Kn));break}}pa()}function gh(e,t){const n=os.get(e);return n&&n.get(t)}function pi(e){const t=ue(e);return t===e?t:(Qe(t,"iterate",cr),Ct(e)?t:t.map(je))}function Ts(e){return Qe(e=ue(e),"iterate",cr),e}const mh={__proto__:null,[Symbol.iterator](){return eo(this,Symbol.iterator,je)},concat(...e){return pi(this).concat(...e.map(t=>Y(t)?pi(t):t))},entries(){return eo(this,"entries",e=>(e[1]=je(e[1]),e))},every(e,t){return rn(this,"every",e,t,void 0,arguments)},filter(e,t){return rn(this,"filter",e,t,n=>n.map(je),arguments)},find(e,t){return rn(this,"find",e,t,je,arguments)},findIndex(e,t){return rn(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return rn(this,"findLast",e,t,je,arguments)},findLastIndex(e,t){return rn(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return rn(this,"forEach",e,t,void 0,arguments)},includes(...e){return to(this,"includes",e)},indexOf(...e){return to(this,"indexOf",e)},join(e){return pi(this).join(e)},lastIndexOf(...e){return to(this,"lastIndexOf",e)},map(e,t){return rn(this,"map",e,t,void 0,arguments)},pop(){return Pi(this,"pop")},push(...e){return Pi(this,"push",e)},reduce(e,...t){return sl(this,"reduce",e,t)},reduceRight(e,...t){return sl(this,"reduceRight",e,t)},shift(){return Pi(this,"shift")},some(e,t){return rn(this,"some",e,t,void 0,arguments)},splice(...e){return Pi(this,"splice",e)},toReversed(){return pi(this).toReversed()},toSorted(e){return pi(this).toSorted(e)},toSpliced(...e){return pi(this).toSpliced(...e)},unshift(...e){return Pi(this,"unshift",e)},values(){return eo(this,"values",je)}};function eo(e,t,n){const i=Ts(e),r=i[t]();return i!==e&&!Ct(e)&&(r._next=r.next,r.next=()=>{const s=r._next();return s.value&&(s.value=n(s.value)),s}),r}const _h=Array.prototype;function rn(e,t,n,i,r,s){const o=Ts(e),a=o!==e&&!Ct(e),c=o[t];if(c!==_h[t]){const d=c.apply(e,s);return a?je(d):d}let l=n;o!==e&&(a?l=function(d,f){return n.call(this,je(d),f,e)}:n.length>2&&(l=function(d,f){return n.call(this,d,f,e)}));const u=c.call(o,l,i);return a&&r?r(u):u}function sl(e,t,n,i){const r=Ts(e);let s=n;return r!==e&&(Ct(e)?n.length>3&&(s=function(o,a,c){return n.call(this,o,a,c,e)}):s=function(o,a,c){return n.call(this,o,je(a),c,e)}),r[t](s,...i)}function to(e,t,n){const i=ue(e);Qe(i,"iterate",cr);const r=i[t](...n);return(r===-1||r===!1)&&va(n[0])?(n[0]=ue(n[0]),i[t](...n)):r}function Pi(e,t,n=[]){pn(),ha();const i=ue(e)[t].apply(e,n);return pa(),gn(),i}const bh=aa("__proto__,__v_isRef,__isVue"),vu=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Mt));function vh(e){Mt(e)||(e=String(e));const t=ue(this);return Qe(t,"has",e),t.hasOwnProperty(e)}class wu{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,i){if(n==="__v_skip")return t.__v_skip;const r=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return s;if(n==="__v_raw")return i===(r?s?Ih:Su:s?ku:xu).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const o=Y(t);if(!r){let c;if(o&&(c=mh[n]))return c;if(n==="hasOwnProperty")return vh}const a=Reflect.get(t,n,De(t)?t:i);return(Mt(n)?vu.has(n):bh(n))||(r||Qe(t,"get",n),s)?a:De(a)?o&&ua(n)?a:a.value:ke(a)?r?Eu(a):Tr(a):a}}class yu extends wu{constructor(t=!1){super(!1,t)}set(t,n,i,r){let s=t[n];if(!this._isShallow){const c=On(s);if(!Ct(i)&&!On(i)&&(s=ue(s),i=ue(i)),!Y(t)&&De(s)&&!De(i))return c?!1:(s.value=i,!0)}const o=Y(t)&&ua(n)?Number(n)<t.length:me(t,n),a=Reflect.set(t,n,i,De(t)?t:r);return t===ue(r)&&(o?In(i,s)&&un(t,"set",n,i):un(t,"add",n,i)),a}deleteProperty(t,n){const i=me(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&i&&un(t,"delete",n,void 0),r}has(t,n){const i=Reflect.has(t,n);return(!Mt(n)||!vu.has(n))&&Qe(t,"has",n),i}ownKeys(t){return Qe(t,"iterate",Y(t)?"length":Kn),Reflect.ownKeys(t)}}class wh extends wu{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const yh=new yu,xh=new wh,kh=new yu(!0);const Po=e=>e,Hr=e=>Reflect.getPrototypeOf(e);function Sh(e,t,n){return function(...i){const r=this.__v_raw,s=ue(r),o=wi(s),a=e==="entries"||e===Symbol.iterator&&o,c=e==="keys"&&o,l=r[e](...i),u=n?Po:t?as:je;return!t&&Qe(s,"iterate",c?Oo:Kn),{next(){const{value:d,done:f}=l.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function zr(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Eh(e,t){const n={get(r){const s=this.__v_raw,o=ue(s),a=ue(r);e||(In(r,a)&&Qe(o,"get",r),Qe(o,"get",a));const{has:c}=Hr(o),l=t?Po:e?as:je;if(c.call(o,r))return l(s.get(r));if(c.call(o,a))return l(s.get(a));s!==o&&s.get(r)},get size(){const r=this.__v_raw;return!e&&Qe(ue(r),"iterate",Kn),Reflect.get(r,"size",r)},has(r){const s=this.__v_raw,o=ue(s),a=ue(r);return e||(In(r,a)&&Qe(o,"has",r),Qe(o,"has",a)),r===a?s.has(r):s.has(r)||s.has(a)},forEach(r,s){const o=this,a=o.__v_raw,c=ue(a),l=t?Po:e?as:je;return!e&&Qe(c,"iterate",Kn),a.forEach((u,d)=>r.call(s,l(u),l(d),o))}};return He(n,e?{add:zr("add"),set:zr("set"),delete:zr("delete"),clear:zr("clear")}:{add(r){!t&&!Ct(r)&&!On(r)&&(r=ue(r));const s=ue(this);return Hr(s).has.call(s,r)||(s.add(r),un(s,"add",r,r)),this},set(r,s){!t&&!Ct(s)&&!On(s)&&(s=ue(s));const o=ue(this),{has:a,get:c}=Hr(o);let l=a.call(o,r);l||(r=ue(r),l=a.call(o,r));const u=c.call(o,r);return o.set(r,s),l?In(s,u)&&un(o,"set",r,s):un(o,"add",r,s),this},delete(r){const s=ue(this),{has:o,get:a}=Hr(s);let c=o.call(s,r);c||(r=ue(r),c=o.call(s,r)),a&&a.call(s,r);const l=s.delete(r);return c&&un(s,"delete",r,void 0),l},clear(){const r=ue(this),s=r.size!==0,o=r.clear();return s&&un(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=Sh(r,e,t)}),n}function _a(e,t){const n=Eh(e,t);return(i,r,s)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?i:Reflect.get(me(n,r)&&r in i?n:i,r,s)}const Th={get:_a(!1,!1)},Ah={get:_a(!1,!0)},Ch={get:_a(!0,!1)};const xu=new WeakMap,ku=new WeakMap,Su=new WeakMap,Ih=new WeakMap;function Dh(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Lh(e){return e.__v_skip||!Object.isExtensible(e)?0:Dh(th(e))}function Tr(e){return On(e)?e:ba(e,!1,yh,Th,xu)}function Rh(e){return ba(e,!1,kh,Ah,ku)}function Eu(e){return ba(e,!0,xh,Ch,Su)}function ba(e,t,n,i,r){if(!ke(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=Lh(e);if(s===0)return e;const o=r.get(e);if(o)return o;const a=new Proxy(e,s===2?i:n);return r.set(e,a),a}function Dn(e){return On(e)?Dn(e.__v_raw):!!(e&&e.__v_isReactive)}function On(e){return!!(e&&e.__v_isReadonly)}function Ct(e){return!!(e&&e.__v_isShallow)}function va(e){return e?!!e.__v_raw:!1}function ue(e){const t=e&&e.__v_raw;return t?ue(t):e}function wa(e){return!me(e,"__v_skip")&&Object.isExtensible(e)&&ru(e,"__v_skip",!0),e}const je=e=>ke(e)?Tr(e):e,as=e=>ke(e)?Eu(e):e;function De(e){return e?e.__v_isRef===!0:!1}function Fe(e){return Tu(e,!1)}function $h(e){return Tu(e,!0)}function Tu(e,t){return De(e)?e:new Oh(e,t)}class Oh{constructor(t,n){this.dep=new ma,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:ue(t),this._value=n?t:je(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,i=this.__v_isShallow||Ct(t)||On(t);t=i?t:ue(t),In(t,n)&&(this._rawValue=t,this._value=i?t:je(t),this.dep.trigger())}}function w(e){return De(e)?e.value:e}const Ph={get:(e,t,n)=>t==="__v_raw"?e:w(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return De(r)&&!De(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function Au(e){return Dn(e)?e:new Proxy(e,Ph)}function Mh(e){const t=Y(e)?new Array(e.length):{};for(const n in e)t[n]=Fh(e,n);return t}class Nh{constructor(t,n,i){this._object=t,this._key=n,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return gh(ue(this._object),this._key)}}function Fh(e,t,n){const i=e[t];return De(i)?i:new Nh(e,t,n)}class Hh{constructor(t,n,i){this.fn=t,this.setter=n,this._value=void 0,this.dep=new ma(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=lr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&Se!==this)return hu(this,!0),!0}get value(){const t=this.dep.track();return mu(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function zh(e,t,n=!1){let i,r;return Q(e)?i=e:(i=e.get,r=e.set),new Hh(i,r,n)}const Ur={},ls=new WeakMap;let Bn;function Uh(e,t=!1,n=Bn){if(n){let i=ls.get(n);i||ls.set(n,i=[]),i.push(e)}}function Bh(e,t,n=xe){const{immediate:i,deep:r,once:s,scheduler:o,augmentJob:a,call:c}=n,l=v=>r?v:Ct(v)||r===!1||r===0?fn(v,1):fn(v);let u,d,f,h,p=!1,b=!1;if(De(e)?(d=()=>e.value,p=Ct(e)):Dn(e)?(d=()=>l(e),p=!0):Y(e)?(b=!0,p=e.some(v=>Dn(v)||Ct(v)),d=()=>e.map(v=>{if(De(v))return v.value;if(Dn(v))return l(v);if(Q(v))return c?c(v,2):v()})):Q(e)?t?d=c?()=>c(e,2):e:d=()=>{if(f){pn();try{f()}finally{gn()}}const v=Bn;Bn=u;try{return c?c(e,3,[h]):e(h)}finally{Bn=v}}:d=Yt,t&&r){const v=d,T=r===!0?1/0:r;d=()=>fn(v(),T)}const E=uu(),x=()=>{u.stop(),E&&E.active&&ca(E.effects,u)};if(s&&t){const v=t;t=(...T)=>{v(...T),x()}}let C=b?new Array(e.length).fill(Ur):Ur;const k=v=>{if(!(!(u.flags&1)||!u.dirty&&!v))if(t){const T=u.run();if(r||p||(b?T.some((j,L)=>In(j,C[L])):In(T,C))){f&&f();const j=Bn;Bn=u;try{const L=[T,C===Ur?void 0:b&&C[0]===Ur?[]:C,h];C=T,c?c(t,3,L):t(...L)}finally{Bn=j}}}else u.run()};return a&&a(k),u=new fu(d),u.scheduler=o?()=>o(k,!1):k,h=v=>Uh(v,!1,u),f=u.onStop=()=>{const v=ls.get(u);if(v){if(c)c(v,4);else for(const T of v)T();ls.delete(u)}},t?i?k(!0):C=u.run():o?o(k.bind(null,!0),!0):u.run(),x.pause=u.pause.bind(u),x.resume=u.resume.bind(u),x.stop=x,x}function fn(e,t=1/0,n){if(t<=0||!ke(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,De(e))fn(e.value,t,n);else if(Y(e))for(let i=0;i<e.length;i++)fn(e[i],t,n);else if(Ii(e)||wi(e))e.forEach(i=>{fn(i,t,n)});else if(iu(e)){for(const i in e)fn(e[i],t,n);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&fn(e[i],t,n)}return e}/**
* @vue/runtime-core v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ar(e,t,n,i){try{return i?e(...i):e()}catch(r){Cr(r,t,n)}}function Nt(e,t,n,i){if(Q(e)){const r=Ar(e,t,n,i);return r&&tu(r)&&r.catch(s=>{Cr(s,t,n)}),r}if(Y(e)){const r=[];for(let s=0;s<e.length;s++)r.push(Nt(e[s],t,n,i));return r}}function Cr(e,t,n,i=!0){const r=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||xe;if(t){let a=t.parent;const c=t.proxy,l=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](e,c,l)===!1)return}a=a.parent}if(s){pn(),Ar(s,null,10,[e,c,l]),gn();return}}Vh(e,n,r,i,o)}function Vh(e,t,n,i=!0,r=!1){if(r)throw e;console.error(e)}const st=[];let jt=-1;const yi=[];let Sn=null,bi=0;const Cu=Promise.resolve();let cs=null;function As(e){const t=cs||Cu;return e?t.then(this?e.bind(this):e):t}function Gh(e){let t=jt+1,n=st.length;for(;t<n;){const i=t+n>>>1,r=st[i],s=ur(r);s<e||s===e&&r.flags&2?t=i+1:n=i}return t}function ya(e){if(!(e.flags&1)){const t=ur(e),n=st[st.length-1];!n||!(e.flags&2)&&t>=ur(n)?st.push(e):st.splice(Gh(t),0,e),e.flags|=1,Iu()}}function Iu(){cs||(cs=Cu.then(Lu))}function jh(e){Y(e)?yi.push(...e):Sn&&e.id===-1?Sn.splice(bi+1,0,e):e.flags&1||(yi.push(e),e.flags|=1),Iu()}function ol(e,t,n=jt+1){for(;n<st.length;n++){const i=st[n];if(i&&i.flags&2){if(e&&i.id!==e.uid)continue;st.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function Du(e){if(yi.length){const t=[...new Set(yi)].sort((n,i)=>ur(n)-ur(i));if(yi.length=0,Sn){Sn.push(...t);return}for(Sn=t,bi=0;bi<Sn.length;bi++){const n=Sn[bi];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Sn=null,bi=0}}const ur=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Lu(e){try{for(jt=0;jt<st.length;jt++){const t=st[jt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ar(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;jt<st.length;jt++){const t=st[jt];t&&(t.flags&=-2)}jt=-1,st.length=0,Du(),cs=null,(st.length||yi.length)&&Lu()}}let Ne=null,Ru=null;function us(e){const t=Ne;return Ne=e,Ru=e&&e.type.__scopeId||null,t}function Ir(e,t=Ne,n){if(!t||e._n)return e;const i=(...r)=>{i._d&&wl(-1);const s=us(t);let o;try{o=e(...r)}finally{us(s),i._d&&wl(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function fe(e,t){if(Ne===null)return e;const n=$s(Ne),i=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[s,o,a,c=xe]=t[r];s&&(Q(s)&&(s={mounted:s,updated:s}),s.deep&&fn(o),i.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:c}))}return e}function Hn(e,t,n,i){const r=e.dirs,s=t&&t.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let c=a.dir[i];c&&(pn(),Nt(c,n,8,[e.el,a,e,t]),gn())}}const qh=Symbol("_vte"),$u=e=>e.__isTeleport,En=Symbol("_leaveCb"),Br=Symbol("_enterCb");function Ou(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return oi(()=>{e.isMounted=!0}),Ds(()=>{e.isUnmounting=!0}),e}const St=[Function,Array],Pu={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:St,onEnter:St,onAfterEnter:St,onEnterCancelled:St,onBeforeLeave:St,onLeave:St,onAfterLeave:St,onLeaveCancelled:St,onBeforeAppear:St,onAppear:St,onAfterAppear:St,onAppearCancelled:St},Mu=e=>{const t=e.subTree;return t.component?Mu(t.component):t},Zh={name:"BaseTransition",props:Pu,setup(e,{slots:t}){const n=lf(),i=Ou();return()=>{const r=t.default&&xa(t.default(),!0);if(!r||!r.length)return;const s=Nu(r),o=ue(e),{mode:a}=o;if(i.isLeaving)return no(s);const c=al(s);if(!c)return no(s);let l=fr(c,o,i,n,d=>l=d);c.type!==et&&ei(c,l);let u=n.subTree&&al(n.subTree);if(u&&u.type!==et&&!Vn(c,u)&&Mu(n).type!==et){let d=fr(u,o,i,n);if(ei(u,d),a==="out-in"&&c.type!==et)return i.isLeaving=!0,d.afterLeave=()=>{i.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,u=void 0},no(s);a==="in-out"&&c.type!==et?d.delayLeave=(f,h,p)=>{const b=Fu(i,u);b[String(u.key)]=u,f[En]=()=>{h(),f[En]=void 0,delete l.delayedLeave,u=void 0},l.delayedLeave=()=>{p(),delete l.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return s}}};function Nu(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==et){t=n;break}}return t}const Wh=Zh;function Fu(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function fr(e,t,n,i,r){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:f,onLeave:h,onAfterLeave:p,onLeaveCancelled:b,onBeforeAppear:E,onAppear:x,onAfterAppear:C,onAppearCancelled:k}=t,v=String(e.key),T=Fu(n,e),j=(A,R)=>{A&&Nt(A,i,9,R)},L=(A,R)=>{const P=R[1];j(A,R),Y(A)?A.every(N=>N.length<=1)&&P():A.length<=1&&P()},F={mode:o,persisted:a,beforeEnter(A){let R=c;if(!n.isMounted)if(s)R=E||c;else return;A[En]&&A[En](!0);const P=T[v];P&&Vn(e,P)&&P.el[En]&&P.el[En](),j(R,[A])},enter(A){let R=l,P=u,N=d;if(!n.isMounted)if(s)R=x||l,P=C||u,N=k||d;else return;let ie=!1;const ae=A[Br]=Le=>{ie||(ie=!0,Le?j(N,[A]):j(P,[A]),F.delayedLeave&&F.delayedLeave(),A[Br]=void 0)};R?L(R,[A,ae]):ae()},leave(A,R){const P=String(e.key);if(A[Br]&&A[Br](!0),n.isUnmounting)return R();j(f,[A]);let N=!1;const ie=A[En]=ae=>{N||(N=!0,R(),ae?j(b,[A]):j(p,[A]),A[En]=void 0,T[P]===e&&delete T[P])};T[P]=e,h?L(h,[A,ie]):ie()},clone(A){const R=fr(A,t,n,i,r);return r&&r(R),R}};return F}function no(e){if(Dr(e))return e=Pn(e),e.children=null,e}function al(e){if(!Dr(e))return $u(e.type)&&e.children?Nu(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&Q(n.default))return n.default()}}function ei(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ei(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function xa(e,t=!1,n){let i=[],r=0;for(let s=0;s<e.length;s++){let o=e[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===pe?(o.patchFlag&128&&r++,i=i.concat(xa(o.children,t,a))):(t||o.type!==et)&&i.push(a!=null?Pn(o,{key:a}):o)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}/*! #__NO_SIDE_EFFECTS__ */function Kh(e,t){return Q(e)?He({name:e.name},t,{setup:e}):e}function ka(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function fs(e,t,n,i,r=!1){if(Y(e)){e.forEach((p,b)=>fs(p,t&&(Y(t)?t[b]:t),n,i,r));return}if(xi(i)&&!r){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&fs(e,t,n,i.component.subTree);return}const s=i.shapeFlag&4?$s(i.component):i.el,o=r?null:s,{i:a,r:c}=e,l=t&&t.r,u=a.refs===xe?a.refs={}:a.refs,d=a.setupState,f=ue(d),h=d===xe?()=>!1:p=>me(f,p);if(l!=null&&l!==c&&(Ie(l)?(u[l]=null,h(l)&&(d[l]=null)):De(l)&&(l.value=null)),Q(c))Ar(c,a,12,[o,u]);else{const p=Ie(c),b=De(c);if(p||b){const E=()=>{if(e.f){const x=p?h(c)?d[c]:u[c]:c.value;r?Y(x)&&ca(x,s):Y(x)?x.includes(s)||x.push(s):p?(u[c]=[s],h(c)&&(d[c]=u[c])):(c.value=[s],e.k&&(u[e.k]=c.value))}else p?(u[c]=o,h(c)&&(d[c]=o)):b&&(c.value=o,e.k&&(u[e.k]=o))};o?(E.id=-1,bt(E,n)):E()}}}const ll=e=>e.nodeType===8;Es().requestIdleCallback;Es().cancelIdleCallback;function Yh(e,t){if(ll(e)&&e.data==="["){let n=1,i=e.nextSibling;for(;i;){if(i.nodeType===1){if(t(i)===!1)break}else if(ll(i))if(i.data==="]"){if(--n===0)break}else i.data==="["&&n++;i=i.nextSibling}}else t(e)}const xi=e=>!!e.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function Cs(e){Q(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:i,delay:r=200,hydrate:s,timeout:o,suspensible:a=!0,onError:c}=e;let l=null,u,d=0;const f=()=>(d++,l=null,h()),h=()=>{let p;return l||(p=l=t().catch(b=>{if(b=b instanceof Error?b:new Error(String(b)),c)return new Promise((E,x)=>{c(b,()=>E(f()),()=>x(b),d+1)});throw b}).then(b=>p!==l&&l?l:(b&&(b.__esModule||b[Symbol.toStringTag]==="Module")&&(b=b.default),u=b,b)))};return Kh({name:"AsyncComponentWrapper",__asyncLoader:h,__asyncHydrate(p,b,E){const x=s?()=>{const k=s(()=>{E()},v=>Yh(p,v));k&&(b.bum||(b.bum=[])).push(k),(b.u||(b.u=[])).push(()=>!0)}:E;u?x():h().then(()=>!b.isUnmounted&&x())},get __asyncResolved(){return u},setup(){const p=Me;if(ka(p),u)return()=>io(u,p);const b=k=>{l=null,Cr(k,p,13,!i)};if(a&&p.suspense||Si)return h().then(k=>()=>io(k,p)).catch(k=>(b(k),()=>i?se(i,{error:k}):null));const E=Fe(!1),x=Fe(),C=Fe(!!r);return r&&setTimeout(()=>{C.value=!1},r),o!=null&&setTimeout(()=>{if(!E.value&&!x.value){const k=new Error(`Async component timed out after ${o}ms.`);b(k),x.value=k}},o),h().then(()=>{E.value=!0,p.parent&&Dr(p.parent.vnode)&&p.parent.update()}).catch(k=>{b(k),x.value=k}),()=>{if(E.value&&u)return io(u,p);if(x.value&&i)return se(i,{error:x.value});if(n&&!C.value)return se(n)}}})}function io(e,t){const{ref:n,props:i,children:r,ce:s}=t.vnode,o=se(e,i,r);return o.ref=n,o.ce=s,delete t.vnode.ce,o}const Dr=e=>e.type.__isKeepAlive;function Xh(e,t){Hu(e,"a",t)}function Jh(e,t){Hu(e,"da",t)}function Hu(e,t,n=Me){const i=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(Is(t,i,n),n){let r=n.parent;for(;r&&r.parent;)Dr(r.parent.vnode)&&Qh(i,t,n,r),r=r.parent}}function Qh(e,t,n,i){const r=Is(t,e,i,!0);Sa(()=>{ca(i[t],r)},n)}function Is(e,t,n=Me,i=!1){if(n){const r=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{pn();const a=Lr(n),c=Nt(t,n,e,o);return a(),gn(),c});return i?r.unshift(s):r.push(s),s}}const mn=e=>(t,n=Me)=>{(!Si||e==="sp")&&Is(e,(...i)=>t(...i),n)},ep=mn("bm"),oi=mn("m"),tp=mn("bu"),zu=mn("u"),Ds=mn("bum"),Sa=mn("um"),np=mn("sp"),ip=mn("rtg"),rp=mn("rtc");function sp(e,t=Me){Is("ec",e,t)}const op="components",Uu=Symbol.for("v-ndc");function cl(e){return Ie(e)?ap(op,e,!1)||e:e||Uu}function ap(e,t,n=!0,i=!1){const r=Ne||Me;if(r){const s=r.type;{const a=Yp(s,!1);if(a&&(a===t||a===Dt(t)||a===Ss(Dt(t))))return s}const o=ul(r[e]||s[e],t)||ul(r.appContext[e],t);return!o&&i?s:o}}function ul(e,t){return e&&(e[t]||e[Dt(t)]||e[Ss(Dt(t))])}function tt(e,t,n,i){let r;const s=n,o=Y(e);if(o||Ie(e)){const a=o&&Dn(e);let c=!1,l=!1;a&&(c=!Ct(e),l=On(e),e=Ts(e)),r=new Array(e.length);for(let u=0,d=e.length;u<d;u++)r[u]=t(c?l?as(je(e[u])):je(e[u]):e[u],u,void 0,s)}else if(typeof e=="number"){r=new Array(e);for(let a=0;a<e;a++)r[a]=t(a+1,a,void 0,s)}else if(ke(e))if(e[Symbol.iterator])r=Array.from(e,(a,c)=>t(a,c,void 0,s));else{const a=Object.keys(e);r=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const u=a[c];r[c]=t(e[u],u,c,s)}}else r=[];return r}function lp(e,t,n={},i,r){if(Ne.ce||Ne.parent&&xi(Ne.parent)&&Ne.parent.ce)return H(),hn(pe,null,[se("slot",n,i)],64);let s=e[t];s&&s._c&&(s._d=!1),H();const o=s&&Bu(s(n)),a=n.key||o&&o.key,c=hn(pe,{key:(a&&!Mt(a)?a:`_${t}`)+""},o||[],o&&e._===1?64:-2);return c.scopeId&&(c.slotScopeIds=[c.scopeId+"-s"]),s&&s._c&&(s._d=!0),c}function Bu(e){return e.some(t=>hr(t)?!(t.type===et||t.type===pe&&!Bu(t.children)):!0)?e:null}function fl(e,t){const n={};for(const i in e)n[Xr(i)]=e[i];return n}const Mo=e=>e?cf(e)?$s(e):Mo(e.parent):null,Ji=He(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Mo(e.parent),$root:e=>Mo(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Gu(e),$forceUpdate:e=>e.f||(e.f=()=>{ya(e.update)}),$nextTick:e=>e.n||(e.n=As.bind(e.proxy)),$watch:e=>Lp.bind(e)}),ro=(e,t)=>e!==xe&&!e.__isScriptSetup&&me(e,t),cp={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:i,data:r,props:s,accessCache:o,type:a,appContext:c}=e;let l;if(t[0]!=="$"){const h=o[t];if(h!==void 0)switch(h){case 1:return i[t];case 2:return r[t];case 4:return n[t];case 3:return s[t]}else{if(ro(i,t))return o[t]=1,i[t];if(r!==xe&&me(r,t))return o[t]=2,r[t];if((l=e.propsOptions[0])&&me(l,t))return o[t]=3,s[t];if(n!==xe&&me(n,t))return o[t]=4,n[t];No&&(o[t]=0)}}const u=Ji[t];let d,f;if(u)return t==="$attrs"&&Qe(e.attrs,"get",""),u(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(n!==xe&&me(n,t))return o[t]=4,n[t];if(f=c.config.globalProperties,me(f,t))return f[t]},set({_:e},t,n){const{data:i,setupState:r,ctx:s}=e;return ro(r,t)?(r[t]=n,!0):i!==xe&&me(i,t)?(i[t]=n,!0):me(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,propsOptions:s}},o){let a;return!!n[o]||e!==xe&&me(e,o)||ro(t,o)||(a=s[0])&&me(a,o)||me(i,o)||me(Ji,o)||me(r.config.globalProperties,o)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:me(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function dl(e){return Y(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let No=!0;function up(e){const t=Gu(e),n=e.proxy,i=e.ctx;No=!1,t.beforeCreate&&hl(t.beforeCreate,e,"bc");const{data:r,computed:s,methods:o,watch:a,provide:c,inject:l,created:u,beforeMount:d,mounted:f,beforeUpdate:h,updated:p,activated:b,deactivated:E,beforeDestroy:x,beforeUnmount:C,destroyed:k,unmounted:v,render:T,renderTracked:j,renderTriggered:L,errorCaptured:F,serverPrefetch:A,expose:R,inheritAttrs:P,components:N,directives:ie,filters:ae}=t;if(l&&fp(l,i,null),o)for(const ne in o){const re=o[ne];Q(re)&&(i[ne]=re.bind(n))}if(r){const ne=r.call(n,n);ke(ne)&&(e.data=Tr(ne))}if(No=!0,s)for(const ne in s){const re=s[ne],ut=Q(re)?re.bind(n,n):Q(re.get)?re.get.bind(n,n):Yt,en=!Q(re)&&Q(re.set)?re.set.bind(n):Yt,le=We({get:ut,set:en});Object.defineProperty(i,ne,{enumerable:!0,configurable:!0,get:()=>le.value,set:mt=>le.value=mt})}if(a)for(const ne in a)Vu(a[ne],i,n,ne);if(c){const ne=Q(c)?c.call(n):c;Reflect.ownKeys(ne).forEach(re=>{_p(re,ne[re])})}u&&hl(u,e,"c");function we(ne,re){Y(re)?re.forEach(ut=>ne(ut.bind(n))):re&&ne(re.bind(n))}if(we(ep,d),we(oi,f),we(tp,h),we(zu,p),we(Xh,b),we(Jh,E),we(sp,F),we(rp,j),we(ip,L),we(Ds,C),we(Sa,v),we(np,A),Y(R))if(R.length){const ne=e.exposed||(e.exposed={});R.forEach(re=>{Object.defineProperty(ne,re,{get:()=>n[re],set:ut=>n[re]=ut})})}else e.exposed||(e.exposed={});T&&e.render===Yt&&(e.render=T),P!=null&&(e.inheritAttrs=P),N&&(e.components=N),ie&&(e.directives=ie),A&&ka(e)}function fp(e,t,n=Yt){Y(e)&&(e=Fo(e));for(const i in e){const r=e[i];let s;ke(r)?"default"in r?s=Qi(r.from||i,r.default,!0):s=Qi(r.from||i):s=Qi(r),De(s)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[i]=s}}function hl(e,t,n){Nt(Y(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function Vu(e,t,n,i){let r=i.includes(".")?nf(n,i):()=>n[i];if(Ie(e)){const s=t[e];Q(s)&&Xt(r,s)}else if(Q(e))Xt(r,e.bind(n));else if(ke(e))if(Y(e))e.forEach(s=>Vu(s,t,n,i));else{const s=Q(e.handler)?e.handler.bind(n):t[e.handler];Q(s)&&Xt(r,s,e)}}function Gu(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let c;return a?c=a:!r.length&&!n&&!i?c=t:(c={},r.length&&r.forEach(l=>ds(c,l,o,!0)),ds(c,t,o)),ke(t)&&s.set(t,c),c}function ds(e,t,n,i=!1){const{mixins:r,extends:s}=t;s&&ds(e,s,n,!0),r&&r.forEach(o=>ds(e,o,n,!0));for(const o in t)if(!(i&&o==="expose")){const a=dp[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const dp={data:pl,props:gl,emits:gl,methods:qi,computed:qi,beforeCreate:rt,created:rt,beforeMount:rt,mounted:rt,beforeUpdate:rt,updated:rt,beforeDestroy:rt,beforeUnmount:rt,destroyed:rt,unmounted:rt,activated:rt,deactivated:rt,errorCaptured:rt,serverPrefetch:rt,components:qi,directives:qi,watch:pp,provide:pl,inject:hp};function pl(e,t){return t?e?function(){return He(Q(e)?e.call(this,this):e,Q(t)?t.call(this,this):t)}:t:e}function hp(e,t){return qi(Fo(e),Fo(t))}function Fo(e){if(Y(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function rt(e,t){return e?[...new Set([].concat(e,t))]:t}function qi(e,t){return e?He(Object.create(null),e,t):t}function gl(e,t){return e?Y(e)&&Y(t)?[...new Set([...e,...t])]:He(Object.create(null),dl(e),dl(t??{})):t}function pp(e,t){if(!e)return t;if(!t)return e;const n=He(Object.create(null),e);for(const i in t)n[i]=rt(e[i],t[i]);return n}function ju(){return{app:null,config:{isNativeTag:Qd,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let gp=0;function mp(e,t){return function(i,r=null){Q(i)||(i=He({},i)),r!=null&&!ke(r)&&(r=null);const s=ju(),o=new WeakSet,a=[];let c=!1;const l=s.app={_uid:gp++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:Qp,get config(){return s.config},set config(u){},use(u,...d){return o.has(u)||(u&&Q(u.install)?(o.add(u),u.install(l,...d)):Q(u)&&(o.add(u),u(l,...d))),l},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),l},component(u,d){return d?(s.components[u]=d,l):s.components[u]},directive(u,d){return d?(s.directives[u]=d,l):s.directives[u]},mount(u,d,f){if(!c){const h=l._ceVNode||se(i,r);return h.appContext=s,f===!0?f="svg":f===!1&&(f=void 0),e(h,u,f),c=!0,l._container=u,u.__vue_app__=l,$s(h.component)}},onUnmount(u){a.push(u)},unmount(){c&&(Nt(a,l._instance,16),e(null,l._container),delete l._container.__vue_app__)},provide(u,d){return s.provides[u]=d,l},runWithContext(u){const d=Yn;Yn=l;try{return u()}finally{Yn=d}}};return l}}let Yn=null;function _p(e,t){if(Me){let n=Me.provides;const i=Me.parent&&Me.parent.provides;i===n&&(n=Me.provides=Object.create(i)),n[e]=t}}function Qi(e,t,n=!1){const i=Me||Ne;if(i||Yn){let r=Yn?Yn._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&Q(t)?t.call(i&&i.proxy):t}}function bp(){return!!(Me||Ne||Yn)}const qu={},Zu=()=>Object.create(qu),Wu=e=>Object.getPrototypeOf(e)===qu;function vp(e,t,n,i=!1){const r={},s=Zu();e.propsDefaults=Object.create(null),Ku(e,t,r,s);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);n?e.props=i?r:Rh(r):e.type.props?e.props=r:e.props=s,e.attrs=s}function wp(e,t,n,i){const{props:r,attrs:s,vnode:{patchFlag:o}}=e,a=ue(r),[c]=e.propsOptions;let l=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(Ls(e.emitsOptions,f))continue;const h=t[f];if(c)if(me(s,f))h!==s[f]&&(s[f]=h,l=!0);else{const p=Dt(f);r[p]=Ho(c,a,p,h,e,!1)}else h!==s[f]&&(s[f]=h,l=!0)}}}else{Ku(e,t,r,s)&&(l=!0);let u;for(const d in a)(!t||!me(t,d)&&((u=si(d))===d||!me(t,u)))&&(c?n&&(n[d]!==void 0||n[u]!==void 0)&&(r[d]=Ho(c,a,d,void 0,e,!0)):delete r[d]);if(s!==a)for(const d in s)(!t||!me(t,d))&&(delete s[d],l=!0)}l&&un(e.attrs,"set","")}function Ku(e,t,n,i){const[r,s]=e.propsOptions;let o=!1,a;if(t)for(let c in t){if(Ki(c))continue;const l=t[c];let u;r&&me(r,u=Dt(c))?!s||!s.includes(u)?n[u]=l:(a||(a={}))[u]=l:Ls(e.emitsOptions,c)||(!(c in i)||l!==i[c])&&(i[c]=l,o=!0)}if(s){const c=ue(n),l=a||xe;for(let u=0;u<s.length;u++){const d=s[u];n[d]=Ho(r,c,d,l[d],e,!me(l,d))}}return o}function Ho(e,t,n,i,r,s){const o=e[n];if(o!=null){const a=me(o,"default");if(a&&i===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Q(c)){const{propsDefaults:l}=r;if(n in l)i=l[n];else{const u=Lr(r);i=l[n]=c.call(null,t),u()}}else i=c;r.ce&&r.ce._setProp(n,i)}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===si(n))&&(i=!0))}return i}const yp=new WeakMap;function Yu(e,t,n=!1){const i=n?yp:t.propsCache,r=i.get(e);if(r)return r;const s=e.props,o={},a=[];let c=!1;if(!Q(e)){const u=d=>{c=!0;const[f,h]=Yu(d,t,!0);He(o,f),h&&a.push(...h)};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!s&&!c)return ke(e)&&i.set(e,vi),vi;if(Y(s))for(let u=0;u<s.length;u++){const d=Dt(s[u]);ml(d)&&(o[d]=xe)}else if(s)for(const u in s){const d=Dt(u);if(ml(d)){const f=s[u],h=o[d]=Y(f)||Q(f)?{type:f}:He({},f),p=h.type;let b=!1,E=!0;if(Y(p))for(let x=0;x<p.length;++x){const C=p[x],k=Q(C)&&C.name;if(k==="Boolean"){b=!0;break}else k==="String"&&(E=!1)}else b=Q(p)&&p.name==="Boolean";h[0]=b,h[1]=E,(b||me(h,"default"))&&a.push(d)}}const l=[o,a];return ke(e)&&i.set(e,l),l}function ml(e){return e[0]!=="$"&&!Ki(e)}const Ea=e=>e[0]==="_"||e==="$stable",Ta=e=>Y(e)?e.map(qt):[qt(e)],xp=(e,t,n)=>{if(t._n)return t;const i=Ir((...r)=>Ta(t(...r)),n);return i._c=!1,i},Xu=(e,t,n)=>{const i=e._ctx;for(const r in e){if(Ea(r))continue;const s=e[r];if(Q(s))t[r]=xp(r,s,i);else if(s!=null){const o=Ta(s);t[r]=()=>o}}},Ju=(e,t)=>{const n=Ta(t);e.slots.default=()=>n},Qu=(e,t,n)=>{for(const i in t)(n||!Ea(i))&&(e[i]=t[i])},kp=(e,t,n)=>{const i=e.slots=Zu();if(e.vnode.shapeFlag&32){const r=t._;r?(Qu(i,t,n),n&&ru(i,"_",r,!0)):Xu(t,i)}else t&&Ju(e,t)},Sp=(e,t,n)=>{const{vnode:i,slots:r}=e;let s=!0,o=xe;if(i.shapeFlag&32){const a=t._;a?n&&a===1?s=!1:Qu(r,t,n):(s=!t.$stable,Xu(t,r)),o=t}else t&&(Ju(e,t),o={default:1});if(s)for(const a in r)!Ea(a)&&o[a]==null&&delete r[a]},bt=Fp;function Ep(e){return Tp(e)}function Tp(e,t){const n=Es();n.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:o,createText:a,createComment:c,setText:l,setElementText:u,parentNode:d,nextSibling:f,setScopeId:h=Yt,insertStaticContent:p}=e,b=(g,m,S,$=null,I=null,D=null,B=void 0,z=null,U=!!m.dynamicChildren)=>{if(g===m)return;g&&!Vn(g,m)&&($=_n(g),mt(g,I,D,!0),g=null),m.patchFlag===-2&&(U=!1,m.dynamicChildren=null);const{type:O,ref:X,shapeFlag:V}=m;switch(O){case Rs:E(g,m,S,$);break;case et:x(g,m,S,$);break;case Qr:g==null&&C(m,S,$,B);break;case pe:N(g,m,S,$,I,D,B,z,U);break;default:V&1?T(g,m,S,$,I,D,B,z,U):V&6?ie(g,m,S,$,I,D,B,z,U):(V&64||V&128)&&O.process(g,m,S,$,I,D,B,z,U,bn)}X!=null&&I&&fs(X,g&&g.ref,D,m||g,!m)},E=(g,m,S,$)=>{if(g==null)i(m.el=a(m.children),S,$);else{const I=m.el=g.el;m.children!==g.children&&l(I,m.children)}},x=(g,m,S,$)=>{g==null?i(m.el=c(m.children||""),S,$):m.el=g.el},C=(g,m,S,$)=>{[g.el,g.anchor]=p(g.children,m,S,$,g.el,g.anchor)},k=({el:g,anchor:m},S,$)=>{let I;for(;g&&g!==m;)I=f(g),i(g,S,$),g=I;i(m,S,$)},v=({el:g,anchor:m})=>{let S;for(;g&&g!==m;)S=f(g),r(g),g=S;r(m)},T=(g,m,S,$,I,D,B,z,U)=>{m.type==="svg"?B="svg":m.type==="math"&&(B="mathml"),g==null?j(m,S,$,I,D,B,z,U):A(g,m,I,D,B,z,U)},j=(g,m,S,$,I,D,B,z)=>{let U,O;const{props:X,shapeFlag:V,transition:Z,dirs:J}=g;if(U=g.el=o(g.type,D,X&&X.is,X),V&8?u(U,g.children):V&16&&F(g.children,U,null,$,I,so(g,D),B,z),J&&Hn(g,null,$,"created"),L(U,g,g.scopeId,B,$),X){for(const ve in X)ve!=="value"&&!Ki(ve)&&s(U,ve,null,X[ve],D,$);"value"in X&&s(U,"value",null,X.value,D),(O=X.onVnodeBeforeMount)&&zt(O,$,g)}J&&Hn(g,null,$,"beforeMount");const te=Ap(I,Z);te&&Z.beforeEnter(U),i(U,m,S),((O=X&&X.onVnodeMounted)||te||J)&&bt(()=>{O&&zt(O,$,g),te&&Z.enter(U),J&&Hn(g,null,$,"mounted")},I)},L=(g,m,S,$,I)=>{if(S&&h(g,S),$)for(let D=0;D<$.length;D++)h(g,$[D]);if(I){let D=I.subTree;if(m===D||sf(D.type)&&(D.ssContent===m||D.ssFallback===m)){const B=I.vnode;L(g,B,B.scopeId,B.slotScopeIds,I.parent)}}},F=(g,m,S,$,I,D,B,z,U=0)=>{for(let O=U;O<g.length;O++){const X=g[O]=z?Tn(g[O]):qt(g[O]);b(null,X,m,S,$,I,D,B,z)}},A=(g,m,S,$,I,D,B)=>{const z=m.el=g.el;let{patchFlag:U,dynamicChildren:O,dirs:X}=m;U|=g.patchFlag&16;const V=g.props||xe,Z=m.props||xe;let J;if(S&&zn(S,!1),(J=Z.onVnodeBeforeUpdate)&&zt(J,S,m,g),X&&Hn(m,g,S,"beforeUpdate"),S&&zn(S,!0),(V.innerHTML&&Z.innerHTML==null||V.textContent&&Z.textContent==null)&&u(z,""),O?R(g.dynamicChildren,O,z,S,$,so(m,I),D):B||re(g,m,z,null,S,$,so(m,I),D,!1),U>0){if(U&16)P(z,V,Z,S,I);else if(U&2&&V.class!==Z.class&&s(z,"class",null,Z.class,I),U&4&&s(z,"style",V.style,Z.style,I),U&8){const te=m.dynamicProps;for(let ve=0;ve<te.length;ve++){const de=te[ve],Ke=V[de],ze=Z[de];(ze!==Ke||de==="value")&&s(z,de,Ke,ze,I,S)}}U&1&&g.children!==m.children&&u(z,m.children)}else!B&&O==null&&P(z,V,Z,S,I);((J=Z.onVnodeUpdated)||X)&&bt(()=>{J&&zt(J,S,m,g),X&&Hn(m,g,S,"updated")},$)},R=(g,m,S,$,I,D,B)=>{for(let z=0;z<m.length;z++){const U=g[z],O=m[z],X=U.el&&(U.type===pe||!Vn(U,O)||U.shapeFlag&198)?d(U.el):S;b(U,O,X,null,$,I,D,B,!0)}},P=(g,m,S,$,I)=>{if(m!==S){if(m!==xe)for(const D in m)!Ki(D)&&!(D in S)&&s(g,D,m[D],null,I,$);for(const D in S){if(Ki(D))continue;const B=S[D],z=m[D];B!==z&&D!=="value"&&s(g,D,z,B,I,$)}"value"in S&&s(g,"value",m.value,S.value,I)}},N=(g,m,S,$,I,D,B,z,U)=>{const O=m.el=g?g.el:a(""),X=m.anchor=g?g.anchor:a("");let{patchFlag:V,dynamicChildren:Z,slotScopeIds:J}=m;J&&(z=z?z.concat(J):J),g==null?(i(O,S,$),i(X,S,$),F(m.children||[],S,X,I,D,B,z,U)):V>0&&V&64&&Z&&g.dynamicChildren?(R(g.dynamicChildren,Z,S,I,D,B,z),(m.key!=null||I&&m===I.subTree)&&ef(g,m,!0)):re(g,m,S,X,I,D,B,z,U)},ie=(g,m,S,$,I,D,B,z,U)=>{m.slotScopeIds=z,g==null?m.shapeFlag&512?I.ctx.activate(m,S,$,B,U):ae(m,S,$,I,D,B,U):Le(g,m,U)},ae=(g,m,S,$,I,D,B)=>{const z=g.component=jp(g,$,I);if(Dr(g)&&(z.ctx.renderer=bn),qp(z,!1,B),z.asyncDep){if(I&&I.registerDep(z,we,B),!g.el){const U=z.subTree=se(et);x(null,U,m,S)}}else we(z,g,m,S,I,D,B)},Le=(g,m,S)=>{const $=m.component=g.component;if(Mp(g,m,S))if($.asyncDep&&!$.asyncResolved){ne($,m,S);return}else $.next=m,$.update();else m.el=g.el,$.vnode=m},we=(g,m,S,$,I,D,B)=>{const z=()=>{if(g.isMounted){let{next:V,bu:Z,u:J,parent:te,vnode:ve}=g;{const nt=tf(g);if(nt){V&&(V.el=ve.el,ne(g,V,B)),nt.asyncDep.then(()=>{g.isUnmounted||z()});return}}let de=V,Ke;zn(g,!1),V?(V.el=ve.el,ne(g,V,B)):V=ve,Z&&Jr(Z),(Ke=V.props&&V.props.onVnodeBeforeUpdate)&&zt(Ke,te,V,ve),zn(g,!0);const ze=bl(g),_t=g.subTree;g.subTree=ze,b(_t,ze,d(_t.el),_n(_t),g,I,D),V.el=ze.el,de===null&&Np(g,ze.el),J&&bt(J,I),(Ke=V.props&&V.props.onVnodeUpdated)&&bt(()=>zt(Ke,te,V,ve),I)}else{let V;const{el:Z,props:J}=m,{bm:te,m:ve,parent:de,root:Ke,type:ze}=g,_t=xi(m);zn(g,!1),te&&Jr(te),!_t&&(V=J&&J.onVnodeBeforeMount)&&zt(V,de,m),zn(g,!0);{Ke.ce&&Ke.ce._injectChildStyle(ze);const nt=g.subTree=bl(g);b(null,nt,S,$,g,I,D),m.el=nt.el}if(ve&&bt(ve,I),!_t&&(V=J&&J.onVnodeMounted)){const nt=m;bt(()=>zt(V,de,nt),I)}(m.shapeFlag&256||de&&xi(de.vnode)&&de.vnode.shapeFlag&256)&&g.a&&bt(g.a,I),g.isMounted=!0,m=S=$=null}};g.scope.on();const U=g.effect=new fu(z);g.scope.off();const O=g.update=U.run.bind(U),X=g.job=U.runIfDirty.bind(U);X.i=g,X.id=g.uid,U.scheduler=()=>ya(X),zn(g,!0),O()},ne=(g,m,S)=>{m.component=g;const $=g.vnode.props;g.vnode=m,g.next=null,wp(g,m.props,$,S),Sp(g,m.children,S),pn(),ol(g),gn()},re=(g,m,S,$,I,D,B,z,U=!1)=>{const O=g&&g.children,X=g?g.shapeFlag:0,V=m.children,{patchFlag:Z,shapeFlag:J}=m;if(Z>0){if(Z&128){en(O,V,S,$,I,D,B,z,U);return}else if(Z&256){ut(O,V,S,$,I,D,B,z,U);return}}J&8?(X&16&&$t(O,I,D),V!==O&&u(S,V)):X&16?J&16?en(O,V,S,$,I,D,B,z,U):$t(O,I,D,!0):(X&8&&u(S,""),J&16&&F(V,S,$,I,D,B,z,U))},ut=(g,m,S,$,I,D,B,z,U)=>{g=g||vi,m=m||vi;const O=g.length,X=m.length,V=Math.min(O,X);let Z;for(Z=0;Z<V;Z++){const J=m[Z]=U?Tn(m[Z]):qt(m[Z]);b(g[Z],J,S,null,I,D,B,z,U)}O>X?$t(g,I,D,!0,!1,V):F(m,S,$,I,D,B,z,U,V)},en=(g,m,S,$,I,D,B,z,U)=>{let O=0;const X=m.length;let V=g.length-1,Z=X-1;for(;O<=V&&O<=Z;){const J=g[O],te=m[O]=U?Tn(m[O]):qt(m[O]);if(Vn(J,te))b(J,te,S,null,I,D,B,z,U);else break;O++}for(;O<=V&&O<=Z;){const J=g[V],te=m[Z]=U?Tn(m[Z]):qt(m[Z]);if(Vn(J,te))b(J,te,S,null,I,D,B,z,U);else break;V--,Z--}if(O>V){if(O<=Z){const J=Z+1,te=J<X?m[J].el:$;for(;O<=Z;)b(null,m[O]=U?Tn(m[O]):qt(m[O]),S,te,I,D,B,z,U),O++}}else if(O>Z)for(;O<=V;)mt(g[O],I,D,!0),O++;else{const J=O,te=O,ve=new Map;for(O=te;O<=Z;O++){const $e=m[O]=U?Tn(m[O]):qt(m[O]);$e.key!=null&&ve.set($e.key,O)}let de,Ke=0;const ze=Z-te+1;let _t=!1,nt=0;const Ft=new Array(ze);for(O=0;O<ze;O++)Ft[O]=0;for(O=J;O<=V;O++){const $e=g[O];if(Ke>=ze){mt($e,I,D,!0);continue}let ft;if($e.key!=null)ft=ve.get($e.key);else for(de=te;de<=Z;de++)if(Ft[de-te]===0&&Vn($e,m[de])){ft=de;break}ft===void 0?mt($e,I,D,!0):(Ft[ft-te]=O+1,ft>=nt?nt=ft:_t=!0,b($e,m[ft],S,null,I,D,B,z,U),Ke++)}const kt=_t?Cp(Ft):vi;for(de=kt.length-1,O=ze-1;O>=0;O--){const $e=te+O,ft=m[$e],fi=$e+1<X?m[$e+1].el:$;Ft[O]===0?b(null,ft,S,fi,I,D,B,z,U):_t&&(de<0||O!==kt[de]?le(ft,S,fi,2):de--)}}},le=(g,m,S,$,I=null)=>{const{el:D,type:B,transition:z,children:U,shapeFlag:O}=g;if(O&6){le(g.component.subTree,m,S,$);return}if(O&128){g.suspense.move(m,S,$);return}if(O&64){B.move(g,m,S,bn);return}if(B===pe){i(D,m,S);for(let V=0;V<U.length;V++)le(U[V],m,S,$);i(g.anchor,m,S);return}if(B===Qr){k(g,m,S);return}if($!==2&&O&1&&z)if($===0)z.beforeEnter(D),i(D,m,S),bt(()=>z.enter(D),I);else{const{leave:V,delayLeave:Z,afterLeave:J}=z,te=()=>{g.ctx.isUnmounted?r(D):i(D,m,S)},ve=()=>{V(D,()=>{te(),J&&J()})};Z?Z(D,te,ve):ve()}else i(D,m,S)},mt=(g,m,S,$=!1,I=!1)=>{const{type:D,props:B,ref:z,children:U,dynamicChildren:O,shapeFlag:X,patchFlag:V,dirs:Z,cacheIndex:J}=g;if(V===-2&&(I=!1),z!=null&&(pn(),fs(z,null,S,g,!0),gn()),J!=null&&(m.renderCache[J]=void 0),X&256){m.ctx.deactivate(g);return}const te=X&1&&Z,ve=!xi(g);let de;if(ve&&(de=B&&B.onVnodeBeforeUnmount)&&zt(de,m,g),X&6)Ae(g.component,S,$);else{if(X&128){g.suspense.unmount(S,$);return}te&&Hn(g,null,m,"beforeUnmount"),X&64?g.type.remove(g,m,S,bn,$):O&&!O.hasOnce&&(D!==pe||V>0&&V&64)?$t(O,m,S,!1,!0):(D===pe&&V&384||!I&&X&16)&&$t(U,m,S),$&&Re(g)}(ve&&(de=B&&B.onVnodeUnmounted)||te)&&bt(()=>{de&&zt(de,m,g),te&&Hn(g,null,m,"unmounted")},S)},Re=g=>{const{type:m,el:S,anchor:$,transition:I}=g;if(m===pe){Mr(S,$);return}if(m===Qr){v(g);return}const D=()=>{r(S),I&&!I.persisted&&I.afterLeave&&I.afterLeave()};if(g.shapeFlag&1&&I&&!I.persisted){const{leave:B,delayLeave:z}=I,U=()=>B(S,D);z?z(g.el,D,U):U()}else D()},Mr=(g,m)=>{let S;for(;g!==m;)S=f(g),r(g),g=S;r(m)},Ae=(g,m,S)=>{const{bum:$,scope:I,job:D,subTree:B,um:z,m:U,a:O,parent:X,slots:{__:V}}=g;_l(U),_l(O),$&&Jr($),X&&Y(V)&&V.forEach(Z=>{X.renderCache[Z]=void 0}),I.stop(),D&&(D.flags|=8,mt(B,g,m,S)),z&&bt(z,m),bt(()=>{g.isUnmounted=!0},m),m&&m.pendingBranch&&!m.isUnmounted&&g.asyncDep&&!g.asyncResolved&&g.suspenseId===m.pendingId&&(m.deps--,m.deps===0&&m.resolve())},$t=(g,m,S,$=!1,I=!1,D=0)=>{for(let B=D;B<g.length;B++)mt(g[B],m,S,$,I)},_n=g=>{if(g.shapeFlag&6)return _n(g.component.subTree);if(g.shapeFlag&128)return g.suspense.next();const m=f(g.anchor||g.el),S=m&&m[qh];return S?f(S):m};let ci=!1;const ui=(g,m,S)=>{g==null?m._vnode&&mt(m._vnode,null,null,!0):b(m._vnode||null,g,m,null,null,null,S),m._vnode=g,ci||(ci=!0,ol(),Du(),ci=!1)},bn={p:b,um:mt,m:le,r:Re,mt:ae,mc:F,pc:re,pbc:R,n:_n,o:e};return{render:ui,hydrate:void 0,createApp:mp(ui)}}function so({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function zn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Ap(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ef(e,t,n=!1){const i=e.children,r=t.children;if(Y(i)&&Y(r))for(let s=0;s<i.length;s++){const o=i[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=Tn(r[s]),a.el=o.el),!n&&a.patchFlag!==-2&&ef(o,a)),a.type===Rs&&(a.el=o.el),a.type===et&&!a.el&&(a.el=o.el)}}function Cp(e){const t=e.slice(),n=[0];let i,r,s,o,a;const c=e.length;for(i=0;i<c;i++){const l=e[i];if(l!==0){if(r=n[n.length-1],e[r]<l){t[i]=r,n.push(i);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,e[n[a]]<l?s=a+1:o=a;l<e[n[s]]&&(s>0&&(t[i]=n[s-1]),n[s]=i)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=t[o];return n}function tf(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:tf(t)}function _l(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Ip=Symbol.for("v-scx"),Dp=()=>Qi(Ip);function Fx(e,t){return Aa(e,null,t)}function Xt(e,t,n){return Aa(e,t,n)}function Aa(e,t,n=xe){const{immediate:i,deep:r,flush:s,once:o}=n,a=He({},n),c=t&&i||!t&&s!=="post";let l;if(Si){if(s==="sync"){const h=Dp();l=h.__watcherHandles||(h.__watcherHandles=[])}else if(!c){const h=()=>{};return h.stop=Yt,h.resume=Yt,h.pause=Yt,h}}const u=Me;a.call=(h,p,b)=>Nt(h,u,p,b);let d=!1;s==="post"?a.scheduler=h=>{bt(h,u&&u.suspense)}:s!=="sync"&&(d=!0,a.scheduler=(h,p)=>{p?h():ya(h)}),a.augmentJob=h=>{t&&(h.flags|=4),d&&(h.flags|=2,u&&(h.id=u.uid,h.i=u))};const f=Bh(e,t,a);return Si&&(l?l.push(f):c&&f()),f}function Lp(e,t,n){const i=this.proxy,r=Ie(e)?e.includes(".")?nf(i,e):()=>i[e]:e.bind(i,i);let s;Q(t)?s=t:(s=t.handler,n=t);const o=Lr(this),a=Aa(r,s.bind(i),n);return o(),a}function nf(e,t){const n=t.split(".");return()=>{let i=e;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}const Rp=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Dt(t)}Modifiers`]||e[`${si(t)}Modifiers`];function $p(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||xe;let r=n;const s=t.startsWith("update:"),o=s&&Rp(i,t.slice(7));o&&(o.trim&&(r=n.map(u=>Ie(u)?u.trim():u)),o.number&&(r=n.map(ss)));let a,c=i[a=Xr(t)]||i[a=Xr(Dt(t))];!c&&s&&(c=i[a=Xr(si(t))]),c&&Nt(c,e,6,r);const l=i[a+"Once"];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Nt(l,e,6,r)}}function rf(e,t,n=!1){const i=t.emitsCache,r=i.get(e);if(r!==void 0)return r;const s=e.emits;let o={},a=!1;if(!Q(e)){const c=l=>{const u=rf(l,t,!0);u&&(a=!0,He(o,u))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!s&&!a?(ke(e)&&i.set(e,null),null):(Y(s)?s.forEach(c=>o[c]=null):He(o,s),ke(e)&&i.set(e,o),o)}function Ls(e,t){return!e||!xs(t)?!1:(t=t.slice(2).replace(/Once$/,""),me(e,t[0].toLowerCase()+t.slice(1))||me(e,si(t))||me(e,t))}function bl(e){const{type:t,vnode:n,proxy:i,withProxy:r,propsOptions:[s],slots:o,attrs:a,emit:c,render:l,renderCache:u,props:d,data:f,setupState:h,ctx:p,inheritAttrs:b}=e,E=us(e);let x,C;try{if(n.shapeFlag&4){const v=r||i,T=v;x=qt(l.call(T,v,u,d,h,f,p)),C=a}else{const v=t;x=qt(v.length>1?v(d,{attrs:a,slots:o,emit:c}):v(d,null)),C=t.props?a:Op(a)}}catch(v){er.length=0,Cr(v,e,1),x=se(et)}let k=x;if(C&&b!==!1){const v=Object.keys(C),{shapeFlag:T}=k;v.length&&T&7&&(s&&v.some(la)&&(C=Pp(C,s)),k=Pn(k,C,!1,!0))}return n.dirs&&(k=Pn(k,null,!1,!0),k.dirs=k.dirs?k.dirs.concat(n.dirs):n.dirs),n.transition&&ei(k,n.transition),x=k,us(E),x}const Op=e=>{let t;for(const n in e)(n==="class"||n==="style"||xs(n))&&((t||(t={}))[n]=e[n]);return t},Pp=(e,t)=>{const n={};for(const i in e)(!la(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function Mp(e,t,n){const{props:i,children:r,component:s}=e,{props:o,children:a,patchFlag:c}=t,l=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return i?vl(i,o,l):!!o;if(c&8){const u=t.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(o[f]!==i[f]&&!Ls(l,f))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?vl(i,o,l):!0:!!o;return!1}function vl(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(t[s]!==e[s]&&!Ls(n,s))return!0}return!1}function Np({vnode:e,parent:t},n){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=n,t=t.parent;else break}}const sf=e=>e.__isSuspense;function Fp(e,t){t&&t.pendingBranch?Y(e)?t.effects.push(...e):t.effects.push(e):jh(e)}const pe=Symbol.for("v-fgt"),Rs=Symbol.for("v-txt"),et=Symbol.for("v-cmt"),Qr=Symbol.for("v-stc"),er=[];let wt=null;function H(e=!1){er.push(wt=e?null:[])}function Hp(){er.pop(),wt=er[er.length-1]||null}let dr=1;function wl(e,t=!1){dr+=e,e<0&&wt&&t&&(wt.hasOnce=!0)}function of(e){return e.dynamicChildren=dr>0?wt||vi:null,Hp(),dr>0&&wt&&wt.push(e),e}function G(e,t,n,i,r,s){return of(y(e,t,n,i,r,s,!0))}function hn(e,t,n,i,r){return of(se(e,t,n,i,r,!0))}function hr(e){return e?e.__v_isVNode===!0:!1}function Vn(e,t){return e.type===t.type&&e.key===t.key}const af=({key:e})=>e??null,es=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Ie(e)||De(e)||Q(e)?{i:Ne,r:e,k:t,f:!!n}:e:null);function y(e,t=null,n=null,i=0,r=null,s=e===pe?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&af(t),ref:t&&es(t),scopeId:Ru,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Ne};return a?(Ca(c,n),s&128&&e.normalize(c)):n&&(c.shapeFlag|=Ie(n)?8:16),dr>0&&!o&&wt&&(c.patchFlag>0||s&6)&&c.patchFlag!==32&&wt.push(c),c}const se=zp;function zp(e,t=null,n=null,i=0,r=null,s=!1){if((!e||e===Uu)&&(e=et),hr(e)){const a=Pn(e,t,!0);return n&&Ca(a,n),dr>0&&!s&&wt&&(a.shapeFlag&6?wt[wt.indexOf(e)]=a:wt.push(a)),a.patchFlag=-2,a}if(Xp(e)&&(e=e.__vccOpts),t){t=Up(t);let{class:a,style:c}=t;a&&!Ie(a)&&(t.class=ht(a)),ke(c)&&(va(c)&&!Y(c)&&(c=He({},c)),t.style=fa(c))}const o=Ie(e)?1:sf(e)?128:$u(e)?64:ke(e)?4:Q(e)?2:0;return y(e,t,n,i,r,o,s,!0)}function Up(e){return e?va(e)||Wu(e)?He({},e):e:null}function Pn(e,t,n=!1,i=!1){const{props:r,ref:s,patchFlag:o,children:a,transition:c}=e,l=t?hs(r||{},t):r,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&af(l),ref:t&&t.ref?n&&s?Y(s)?s.concat(es(t)):[s,es(t)]:es(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==pe?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Pn(e.ssContent),ssFallback:e.ssFallback&&Pn(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&i&&ei(u,c.clone(u)),u}function Et(e=" ",t=0){return se(Rs,null,e,t)}function Bp(e,t){const n=se(Qr,null,e);return n.staticCount=t,n}function Oe(e="",t=!1){return t?(H(),hn(et,null,e)):se(et,null,e)}function qt(e){return e==null||typeof e=="boolean"?se(et):Y(e)?se(pe,null,e.slice()):hr(e)?Tn(e):se(Rs,null,String(e))}function Tn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Pn(e)}function Ca(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(Y(t))n=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),Ca(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!Wu(t)?t._ctx=Ne:r===3&&Ne&&(Ne.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Q(t)?(t={default:t,_ctx:Ne},n=32):(t=String(t),i&64?(n=16,t=[Et(t)]):n=8);e.children=t,e.shapeFlag|=n}function hs(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=ht([t.class,i.class]));else if(r==="style")t.style=fa([t.style,i.style]);else if(xs(r)){const s=t[r],o=i[r];o&&s!==o&&!(Y(s)&&s.includes(o))&&(t[r]=s?[].concat(s,o):o)}else r!==""&&(t[r]=i[r])}return t}function zt(e,t,n,i=null){Nt(e,t,7,[n,i])}const Vp=ju();let Gp=0;function jp(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||Vp,s={uid:Gp++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new lu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Yu(i,r),emitsOptions:rf(i,r),emit:null,emitted:null,propsDefaults:xe,inheritAttrs:i.inheritAttrs,ctx:xe,data:xe,props:xe,attrs:xe,slots:xe,refs:xe,setupState:xe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=$p.bind(null,s),e.ce&&e.ce(s),s}let Me=null;const lf=()=>Me||Ne;let ps,zo;{const e=Es(),t=(n,i)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(i),s=>{r.length>1?r.forEach(o=>o(s)):r[0](s)}};ps=t("__VUE_INSTANCE_SETTERS__",n=>Me=n),zo=t("__VUE_SSR_SETTERS__",n=>Si=n)}const Lr=e=>{const t=Me;return ps(e),e.scope.on(),()=>{e.scope.off(),ps(t)}},yl=()=>{Me&&Me.scope.off(),ps(null)};function cf(e){return e.vnode.shapeFlag&4}let Si=!1;function qp(e,t=!1,n=!1){t&&zo(t);const{props:i,children:r}=e.vnode,s=cf(e);vp(e,i,s,t),kp(e,r,n||t);const o=s?Zp(e,t):void 0;return t&&zo(!1),o}function Zp(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,cp);const{setup:i}=n;if(i){pn();const r=e.setupContext=i.length>1?Kp(e):null,s=Lr(e),o=Ar(i,e,0,[e.props,r]),a=tu(o);if(gn(),s(),(a||e.sp)&&!xi(e)&&ka(e),a){if(o.then(yl,yl),t)return o.then(c=>{xl(e,c)}).catch(c=>{Cr(c,e,0)});e.asyncDep=o}else xl(e,o)}else uf(e)}function xl(e,t,n){Q(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ke(t)&&(e.setupState=Au(t)),uf(e)}function uf(e,t,n){const i=e.type;e.render||(e.render=i.render||Yt);{const r=Lr(e);pn();try{up(e)}finally{gn(),r()}}}const Wp={get(e,t){return Qe(e,"get",""),e[t]}};function Kp(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Wp),slots:e.slots,emit:e.emit,expose:t}}function $s(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Au(wa(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Ji)return Ji[n](e)},has(t,n){return n in t||n in Ji}})):e.proxy}function Yp(e,t=!0){return Q(e)?e.displayName||e.name:e.name||t&&e.__name}function Xp(e){return Q(e)&&"__vccOpts"in e}const We=(e,t)=>zh(e,t,Si);function Jp(e,t,n){const i=arguments.length;return i===2?ke(t)&&!Y(t)?hr(t)?se(e,null,[t]):se(e,t):se(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&hr(n)&&(n=[n]),se(e,t,n))}const Qp="3.5.16";/**
* @vue/runtime-dom v3.5.16
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Uo;const kl=typeof window<"u"&&window.trustedTypes;if(kl)try{Uo=kl.createPolicy("vue",{createHTML:e=>e})}catch{}const ff=Uo?e=>Uo.createHTML(e):e=>e,eg="http://www.w3.org/2000/svg",tg="http://www.w3.org/1998/Math/MathML",an=typeof document<"u"?document:null,Sl=an&&an.createElement("template"),ng={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t==="svg"?an.createElementNS(eg,e):t==="mathml"?an.createElementNS(tg,e):n?an.createElement(e,{is:n}):an.createElement(e);return e==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:e=>an.createTextNode(e),createComment:e=>an.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>an.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,r,s){const o=n?n.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===s||!(r=r.nextSibling)););else{Sl.innerHTML=ff(i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e);const a=Sl.content;if(i==="svg"||i==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},vn="transition",Mi="animation",Ei=Symbol("_vtc"),df={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},hf=He({},Pu,df),ig=e=>(e.displayName="Transition",e.props=hf,e),pf=ig((e,{slots:t})=>Jp(Wh,gf(e),t)),Un=(e,t=[])=>{Y(e)?e.forEach(n=>n(...t)):e&&e(...t)},El=e=>e?Y(e)?e.some(t=>t.length>1):e.length>1:!1;function gf(e){const t={};for(const N in e)N in df||(t[N]=e[N]);if(e.css===!1)return t;const{name:n="v",type:i,duration:r,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=s,appearActiveClass:l=o,appearToClass:u=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=e,p=rg(r),b=p&&p[0],E=p&&p[1],{onBeforeEnter:x,onEnter:C,onEnterCancelled:k,onLeave:v,onLeaveCancelled:T,onBeforeAppear:j=x,onAppear:L=C,onAppearCancelled:F=k}=t,A=(N,ie,ae,Le)=>{N._enterCancelled=Le,xn(N,ie?u:a),xn(N,ie?l:o),ae&&ae()},R=(N,ie)=>{N._isLeaving=!1,xn(N,d),xn(N,h),xn(N,f),ie&&ie()},P=N=>(ie,ae)=>{const Le=N?L:C,we=()=>A(ie,N,ae);Un(Le,[ie,we]),Tl(()=>{xn(ie,N?c:s),Vt(ie,N?u:a),El(Le)||Al(ie,i,b,we)})};return He(t,{onBeforeEnter(N){Un(x,[N]),Vt(N,s),Vt(N,o)},onBeforeAppear(N){Un(j,[N]),Vt(N,c),Vt(N,l)},onEnter:P(!1),onAppear:P(!0),onLeave(N,ie){N._isLeaving=!0;const ae=()=>R(N,ie);Vt(N,d),N._enterCancelled?(Vt(N,f),Bo()):(Bo(),Vt(N,f)),Tl(()=>{N._isLeaving&&(xn(N,d),Vt(N,h),El(v)||Al(N,i,E,ae))}),Un(v,[N,ae])},onEnterCancelled(N){A(N,!1,void 0,!0),Un(k,[N])},onAppearCancelled(N){A(N,!0,void 0,!0),Un(F,[N])},onLeaveCancelled(N){R(N),Un(T,[N])}})}function rg(e){if(e==null)return null;if(ke(e))return[oo(e.enter),oo(e.leave)];{const t=oo(e);return[t,t]}}function oo(e){return rh(e)}function Vt(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[Ei]||(e[Ei]=new Set)).add(t)}function xn(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const n=e[Ei];n&&(n.delete(t),n.size||(e[Ei]=void 0))}function Tl(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let sg=0;function Al(e,t,n,i){const r=e._endId=++sg,s=()=>{r===e._endId&&i()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:c}=mf(e,t);if(!o)return i();const l=o+"end";let u=0;const d=()=>{e.removeEventListener(l,f),s()},f=h=>{h.target===e&&++u>=c&&d()};setTimeout(()=>{u<c&&d()},a+1),e.addEventListener(l,f)}function mf(e,t){const n=window.getComputedStyle(e),i=p=>(n[p]||"").split(", "),r=i(`${vn}Delay`),s=i(`${vn}Duration`),o=Cl(r,s),a=i(`${Mi}Delay`),c=i(`${Mi}Duration`),l=Cl(a,c);let u=null,d=0,f=0;t===vn?o>0&&(u=vn,d=o,f=s.length):t===Mi?l>0&&(u=Mi,d=l,f=c.length):(d=Math.max(o,l),u=d>0?o>l?vn:Mi:null,f=u?u===vn?s.length:c.length:0);const h=u===vn&&/\b(transform|all)(,|$)/.test(i(`${vn}Property`).toString());return{type:u,timeout:d,propCount:f,hasTransform:h}}function Cl(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,i)=>Il(n)+Il(e[i])))}function Il(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function Bo(){return document.body.offsetHeight}function og(e,t,n){const i=e[Ei];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const gs=Symbol("_vod"),_f=Symbol("_vsh"),bf={beforeMount(e,{value:t},{transition:n}){e[gs]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Ni(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),Ni(e,!0),i.enter(e)):i.leave(e,()=>{Ni(e,!1)}):Ni(e,t))},beforeUnmount(e,{value:t}){Ni(e,t)}};function Ni(e,t){e.style.display=t?e[gs]:"none",e[_f]=!t}const ag=Symbol(""),lg=/(^|;)\s*display\s*:/;function cg(e,t,n){const i=e.style,r=Ie(n);let s=!1;if(n&&!r){if(t)if(Ie(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&ts(i,a,"")}else for(const o in t)n[o]==null&&ts(i,o,"");for(const o in n)o==="display"&&(s=!0),ts(i,o,n[o])}else if(r){if(t!==n){const o=i[ag];o&&(n+=";"+o),i.cssText=n,s=lg.test(n)}}else t&&e.removeAttribute("style");gs in e&&(e[gs]=s?i.display:"",e[_f]&&(i.display="none"))}const Dl=/\s*!important$/;function ts(e,t,n){if(Y(n))n.forEach(i=>ts(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=ug(e,t);Dl.test(n)?e.setProperty(si(i),n.replace(Dl,""),"important"):e[i]=n}}const Ll=["Webkit","Moz","ms"],ao={};function ug(e,t){const n=ao[t];if(n)return n;let i=Dt(t);if(i!=="filter"&&i in e)return ao[t]=i;i=Ss(i);for(let r=0;r<Ll.length;r++){const s=Ll[r]+i;if(s in e)return ao[t]=s}return t}const Rl="http://www.w3.org/1999/xlink";function $l(e,t,n,i,r,s=uh(t)){i&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Rl,t.slice(6,t.length)):e.setAttributeNS(Rl,t,n):n==null||s&&!su(n)?e.removeAttribute(t):e.setAttribute(t,s?"":Mt(n)?String(n):n)}function Ol(e,t,n,i,r){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?ff(n):n);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=su(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(r||t)}function dn(e,t,n,i){e.addEventListener(t,n,i)}function fg(e,t,n,i){e.removeEventListener(t,n,i)}const Pl=Symbol("_vei");function dg(e,t,n,i,r=null){const s=e[Pl]||(e[Pl]={}),o=s[t];if(i&&o)o.value=i;else{const[a,c]=hg(t);if(i){const l=s[t]=mg(i,r);dn(e,a,l,c)}else o&&(fg(e,a,o,c),s[t]=void 0)}}const Ml=/(?:Once|Passive|Capture)$/;function hg(e){let t;if(Ml.test(e)){t={};let i;for(;i=e.match(Ml);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):si(e.slice(2)),t]}let lo=0;const pg=Promise.resolve(),gg=()=>lo||(pg.then(()=>lo=0),lo=Date.now());function mg(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Nt(_g(i,n.value),t,5,[i])};return n.value=e,n.attached=gg(),n}function _g(e,t){if(Y(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>r=>!r._stopped&&i&&i(r))}else return t}const Nl=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,bg=(e,t,n,i,r,s)=>{const o=r==="svg";t==="class"?og(e,i,o):t==="style"?cg(e,n,i):xs(t)?la(t)||dg(e,t,n,i,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):vg(e,t,i,o))?(Ol(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&$l(e,t,i,o,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ie(i))?Ol(e,Dt(t),i,s,t):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),$l(e,t,i,o))};function vg(e,t,n,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&Nl(t)&&Q(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Nl(t)&&Ie(n)?!1:t in e}const vf=new WeakMap,wf=new WeakMap,ms=Symbol("_moveCb"),Fl=Symbol("_enterCb"),wg=e=>(delete e.props.mode,e),yg=wg({name:"TransitionGroup",props:He({},hf,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=lf(),i=Ou();let r,s;return zu(()=>{if(!r.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!Tg(r[0].el,n.vnode.el,o)){r=[];return}r.forEach(kg),r.forEach(Sg);const a=r.filter(Eg);Bo(),a.forEach(c=>{const l=c.el,u=l.style;Vt(l,o),u.transform=u.webkitTransform=u.transitionDuration="";const d=l[ms]=f=>{f&&f.target!==l||(!f||/transform$/.test(f.propertyName))&&(l.removeEventListener("transitionend",d),l[ms]=null,xn(l,o))};l.addEventListener("transitionend",d)}),r=[]}),()=>{const o=ue(e),a=gf(o);let c=o.tag||pe;if(r=[],s)for(let l=0;l<s.length;l++){const u=s[l];u.el&&u.el instanceof Element&&(r.push(u),ei(u,fr(u,a,i,n)),vf.set(u,u.el.getBoundingClientRect()))}s=t.default?xa(t.default()):[];for(let l=0;l<s.length;l++){const u=s[l];u.key!=null&&ei(u,fr(u,a,i,n))}return se(c,null,s)}}}),xg=yg;function kg(e){const t=e.el;t[ms]&&t[ms](),t[Fl]&&t[Fl]()}function Sg(e){wf.set(e,e.el.getBoundingClientRect())}function Eg(e){const t=vf.get(e),n=wf.get(e),i=t.left-n.left,r=t.top-n.top;if(i||r){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${i}px,${r}px)`,s.transitionDuration="0s",e}}function Tg(e,t,n){const i=e.cloneNode(),r=e[Ei];r&&r.forEach(a=>{a.split(/\s+/).forEach(c=>c&&i.classList.remove(c))}),n.split(/\s+/).forEach(a=>a&&i.classList.add(a)),i.style.display="none";const s=t.nodeType===1?t:t.parentNode;s.appendChild(i);const{hasTransform:o}=mf(i);return s.removeChild(i),o}const Mn=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Y(t)?n=>Jr(t,n):t};function Ag(e){e.target.composing=!0}function Hl(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const It=Symbol("_assign"),Ce={created(e,{modifiers:{lazy:t,trim:n,number:i}},r){e[It]=Mn(r);const s=i||r.props&&r.props.type==="number";dn(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;n&&(a=a.trim()),s&&(a=ss(a)),e[It](a)}),n&&dn(e,"change",()=>{e.value=e.value.trim()}),t||(dn(e,"compositionstart",Ag),dn(e,"compositionend",Hl),dn(e,"change",Hl))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:i,trim:r,number:s}},o){if(e[It]=Mn(o),e.composing)return;const a=(s||e.type==="number")&&!/^0\d/.test(e.value)?ss(e.value):e.value,c=t??"";a!==c&&(document.activeElement===e&&e.type!=="range"&&(i&&t===n||r&&e.value.trim()===c)||(e.value=c))}},yf={deep:!0,created(e,t,n){e[It]=Mn(n),dn(e,"change",()=>{const i=e._modelValue,r=Ti(e),s=e.checked,o=e[It];if(Y(i)){const a=da(i,r),c=a!==-1;if(s&&!c)o(i.concat(r));else if(!s&&c){const l=[...i];l.splice(a,1),o(l)}}else if(Ii(i)){const a=new Set(i);s?a.add(r):a.delete(r),o(a)}else o(xf(e,s))})},mounted:zl,beforeUpdate(e,t,n){e[It]=Mn(n),zl(e,t,n)}};function zl(e,{value:t,oldValue:n},i){e._modelValue=t;let r;if(Y(t))r=da(t,i.props.value)>-1;else if(Ii(t))r=t.has(i.props.value);else{if(t===n)return;r=Qn(t,xf(e,!0))}e.checked!==r&&(e.checked=r)}const Hx={created(e,{value:t},n){e.checked=Qn(t,n.props.value),e[It]=Mn(n),dn(e,"change",()=>{e[It](Ti(e))})},beforeUpdate(e,{value:t,oldValue:n},i){e[It]=Mn(i),t!==n&&(e.checked=Qn(t,i.props.value))}},Xn={deep:!0,created(e,{value:t,modifiers:{number:n}},i){const r=Ii(t);dn(e,"change",()=>{const s=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?ss(Ti(o)):Ti(o));e[It](e.multiple?r?new Set(s):s:s[0]),e._assigning=!0,As(()=>{e._assigning=!1})}),e[It]=Mn(i)},mounted(e,{value:t}){Ul(e,t)},beforeUpdate(e,t,n){e[It]=Mn(n)},updated(e,{value:t}){e._assigning||Ul(e,t)}};function Ul(e,t){const n=e.multiple,i=Y(t);if(!(n&&!i&&!Ii(t))){for(let r=0,s=e.options.length;r<s;r++){const o=e.options[r],a=Ti(o);if(n)if(i){const c=typeof a;c==="string"||c==="number"?o.selected=t.some(l=>String(l)===String(a)):o.selected=da(t,a)>-1}else o.selected=t.has(a);else if(Qn(Ti(o),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Ti(e){return"_value"in e?e._value:e.value}function xf(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const Cg=["ctrl","shift","alt","meta"],Ig={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Cg.some(n=>e[`${n}Key`]&&!t.includes(n))},Dg=(e,t)=>{const n=e._withMods||(e._withMods={}),i=t.join(".");return n[i]||(n[i]=(r,...s)=>{for(let o=0;o<t.length;o++){const a=Ig[t[o]];if(a&&a(r,t))return}return e(r,...s)})},Lg=He({patchProp:bg},ng);let Bl;function Rg(){return Bl||(Bl=Ep(Lg))}const $g=(...e)=>{const t=Rg().createApp(...e),{mount:n}=t;return t.mount=i=>{const r=Pg(i);if(!r)return;const s=t._component;!Q(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,Og(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t};function Og(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Pg(e){return Ie(e)?document.querySelector(e):e}/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let kf;const Os=e=>kf=e,Sf=Symbol();function Vo(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var tr;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(tr||(tr={}));function Mg(){const e=cu(!0),t=e.run(()=>Fe({}));let n=[],i=[];const r=wa({install(s){Os(r),r._a=s,s.provide(Sf,r),s.config.globalProperties.$pinia=r,i.forEach(o=>n.push(o)),i=[]},use(s){return this._a?n.push(s):i.push(s),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return r}const Ef=()=>{};function Vl(e,t,n,i=Ef){e.push(t);const r=()=>{const s=e.indexOf(t);s>-1&&(e.splice(s,1),i())};return!n&&uu()&&dh(r),r}function gi(e,...t){e.slice().forEach(n=>{n(...t)})}const Ng=e=>e(),Gl=Symbol(),co=Symbol();function Go(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,i)=>e.set(i,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const i=t[n],r=e[n];Vo(r)&&Vo(i)&&e.hasOwnProperty(n)&&!De(i)&&!Dn(i)?e[n]=Go(r,i):e[n]=i}return e}const Fg=Symbol();function Hg(e){return!Vo(e)||!e.hasOwnProperty(Fg)}const{assign:kn}=Object;function zg(e){return!!(De(e)&&e.effect)}function Ug(e,t,n,i){const{state:r,actions:s,getters:o}=t,a=n.state.value[e];let c;function l(){a||(n.state.value[e]=r?r():{});const u=Mh(n.state.value[e]);return kn(u,s,Object.keys(o||{}).reduce((d,f)=>(d[f]=wa(We(()=>{Os(n);const h=n._s.get(e);return o[f].call(h,h)})),d),{}))}return c=Tf(e,l,t,n,i,!0),c}function Tf(e,t,n={},i,r,s){let o;const a=kn({actions:{}},n),c={deep:!0};let l,u,d=[],f=[],h;const p=i.state.value[e];!s&&!p&&(i.state.value[e]={}),Fe({});let b;function E(F){let A;l=u=!1,typeof F=="function"?(F(i.state.value[e]),A={type:tr.patchFunction,storeId:e,events:h}):(Go(i.state.value[e],F),A={type:tr.patchObject,payload:F,storeId:e,events:h});const R=b=Symbol();As().then(()=>{b===R&&(l=!0)}),u=!0,gi(d,A,i.state.value[e])}const x=s?function(){const{state:A}=n,R=A?A():{};this.$patch(P=>{kn(P,R)})}:Ef;function C(){o.stop(),d=[],f=[],i._s.delete(e)}const k=(F,A="")=>{if(Gl in F)return F[co]=A,F;const R=function(){Os(i);const P=Array.from(arguments),N=[],ie=[];function ae(ne){N.push(ne)}function Le(ne){ie.push(ne)}gi(f,{args:P,name:R[co],store:T,after:ae,onError:Le});let we;try{we=F.apply(this&&this.$id===e?this:T,P)}catch(ne){throw gi(ie,ne),ne}return we instanceof Promise?we.then(ne=>(gi(N,ne),ne)).catch(ne=>(gi(ie,ne),Promise.reject(ne))):(gi(N,we),we)};return R[Gl]=!0,R[co]=A,R},v={_p:i,$id:e,$onAction:Vl.bind(null,f),$patch:E,$reset:x,$subscribe(F,A={}){const R=Vl(d,F,A.detached,()=>P()),P=o.run(()=>Xt(()=>i.state.value[e],N=>{(A.flush==="sync"?u:l)&&F({storeId:e,type:tr.direct,events:h},N)},kn({},c,A)));return R},$dispose:C},T=Tr(v);i._s.set(e,T);const L=(i._a&&i._a.runWithContext||Ng)(()=>i._e.run(()=>(o=cu()).run(()=>t({action:k}))));for(const F in L){const A=L[F];if(De(A)&&!zg(A)||Dn(A))s||(p&&Hg(A)&&(De(A)?A.value=p[F]:Go(A,p[F])),i.state.value[e][F]=A);else if(typeof A=="function"){const R=k(A,F);L[F]=R,a.actions[F]=A}}return kn(T,L),kn(ue(T),L),Object.defineProperty(T,"$state",{get:()=>i.state.value[e],set:F=>{E(A=>{kn(A,F)})}}),i._p.forEach(F=>{kn(T,o.run(()=>F({store:T,app:i._a,pinia:i,options:a})))}),p&&s&&n.hydrate&&n.hydrate(T.$state,p),l=!0,u=!0,T}/*! #__NO_SIDE_EFFECTS__ */function Ps(e,t,n){let i,r;const s=typeof t=="function";typeof e=="string"?(i=e,r=s?n:t):(r=e,i=e.id);function o(a,c){const l=bp();return a=a||(l?Qi(Sf,null):null),a&&Os(a),a=kf,a._s.has(i)||(s?Tf(i,t,r,a):Ug(i,r,a)),a._s.get(i)}return o.$id=i,o}const ee={specialSkillData:{tactics:[{value:"concealed_weapon",label:"暗器"},{value:"fence_off",label:"受け流し"},{value:"covering_fire",label:"援護射撃"},{value:"stance",label:"構え"},{value:"riding_combat",label:"騎乗戦闘"},{value:"fatal_spot_attack",label:"急所の一撃"},{value:"high_angle_fire",label:"曲射"},{value:"ready_to_die",label:"決死の覚悟"},{value:"martial_arts",label:"拳闘術"},{value:"escort",label:"護衛"},{value:"heavy_attack",label:"重撃"},{value:"risk_attack",label:"捨て身の一撃"},{value:"machine_gunning",label:"掃射"},{value:"snipe",label:"狙撃"},{value:"provoke",label:"挑発"},{value:"lightning_speed",label:"電光石火"},{value:"rush",label:"突撃"},{value:"cleave",label:"凪払い"},{value:"knock_shooting",label:"弾き落とし"},{value:"parry",label:"パリィ"},{value:"feint",label:"フェイント"},{value:"throw_weapon",label:"武器投げの習熟"},{value:"break_weapon",label:"武器破壊"},{value:"fortitude",label:"不屈"},{value:"gait",label:"歩法"},{value:"anticipate",label:"見切り"},{value:"pierce_armor",label:"鎧通し"}],magic:[{value:"light",label:"灯り"},{value:"dozing",label:"居眠り"},{value:"enchant",label:"エンチャント"},{value:"send_sound",label:"音送り"},{value:"silence",label:"音消し"},{value:"recovery",label:"回復"},{value:"read_wind",label:"風読み"},{value:"activate",label:"活性"},{value:"fear",label:"恐怖"},{value:"warning",label:"警報"},{value:"barrier",label:"結界"},{value:"illusion",label:"幻影"},{value:"telecommunication",label:"交信"},{value:"power_of_word",label:"言霊"},{value:"ritual_of_spirit",label:"死儀"},{value:"heal",label:"治癒"},{value:"calling",label:"通話"},{value:"familiar",label:"使い魔"},{value:"ignite",label:"点火"},{value:"extend_magic",label:"範囲魔術"},{value:"light_brush",label:"光の筆"},{value:"cover",label:"被覆"},{value:"float",label:"浮遊"},{value:"magic_weapon",label:"魔術の得物"}],features:[{value:"wisdom",label:"叡智"},{value:"concentrate",label:"過集中"},{value:"acrobatics",label:"軽業"},{value:"connivance",label:"看破"},{value:"thin",label:"希薄"},{value:"cajolery",label:"口車"},{value:"connection",label:"コネクション"},{value:"change_clothes",label:"様変わりの衣"},{value:"hide_object",label:"仕込み"},{value:"auto_writing",label:"自動筆記具"},{value:"pickpocket",label:"スリの極意"},{value:"instant",label:"即席"},{value:"infinite_bagpack",label:"底なしの鞄"},{value:"training",label:"調教"},{value:"instruction",label:"伝授"},{value:"cleverness",label:"天性の小手先"},{value:"adaptability",label:"踏破"},{value:"cipher",label:"独自暗号"},{value:"spoofing",label:"なりすまし"},{value:"beauty",label:"美貌"},{value:"other_name",label:"二つ名"},{value:"decompose",label:"分解"},{value:"honor",label:"誉れ"},{value:"night_vision",label:"夜目"}]},baseSkills:[{id:"motion",name:"運動",checked:!1,canHaveExperts:!0,experts:[{value:""}]},{id:"avoidance",name:"回避",checked:!1,canHaveExperts:!1,experts:[]},{id:"sense",name:"感覚",checked:!1,canHaveExperts:!0,experts:[{value:""}]},{id:"observation",name:"観察",checked:!1,canHaveExperts:!0,experts:[{value:""}]},{id:"technique",name:"技巧",checked:!1,canHaveExperts:!0,experts:[{value:""}]},{id:"shooting",name:"射撃",checked:!1,canHaveExperts:!0,experts:[{value:""}]},{id:"sociality",name:"社交",checked:!1,canHaveExperts:!0,experts:[{value:""}]},{id:"knowledge",name:"知識",checked:!1,canHaveExperts:!0,experts:[{value:""}]},{id:"combat",name:"白兵",checked:!1,canHaveExperts:!0,experts:[{value:""}]},{id:"defense",name:"防御",checked:!1,canHaveExperts:!1,experts:[]}],externalSkillOrder:["motion","avoidance","sense","observation","technique","shooting","sociality","knowledge","combat","defense"],specialSkillsRequiringNote:["enchant","ritual_of_spirit","familiar","magic_weapon","wisdom","connection","hide_object","training","spoofing","other_name","honor"],speciesOptions:[{value:"",label:"選択してください",disabled:!0},{value:"human",label:"人間"},{value:"elf",label:"エルフ"},{value:"dwarf",label:"ドワーフ"},{value:"halfling",label:"ディグリング"},{value:"therianthropy",label:"獣人"},{value:"dragonfolk",label:"竜人"},{value:"treefolk",label:"ツリーフォーク"},{value:"other",label:"希少人種"}],weaponOptions:[{value:"",label:"なし"},{value:"combat_small",label:"小型白兵武器"},{value:"combat_medium",label:"中型白兵武器"},{value:"combat_large",label:"大型白兵武器"},{value:"shooting",label:"射撃武器"},{value:"catalyst",label:"魔術触媒"}],armorOptions:[{value:"",label:"なし"},{value:"light_armor",label:"軽装防具"},{value:"heavy_armor",label:"重装防具"}],weaknessAcquisitionOptions:[{value:"--",text:"--",disabled:!1},{value:"作成時",text:"作成時",disabled:!1}],specialSkillGroupOptions:[{value:"",label:"種類を選択"},{value:"tactics",label:"戦術"},{value:"magic",label:"魔術"},{value:"features",label:"特徴"},{value:"free",label:"自由入力"}],speciesLabelMap:{human:"人間",elf:"エルフ",dwarf:"ドワーフ",halfling:"ディグリング",therianthropy:"獣人",dragonfolk:"竜人",treefolk:"ツリーフォーク",other:"希少人種","":"未選択"},equipmentGroupLabelMap:{"":"なし",combat_small:"小型白兵武器",combat_medium:"中型白兵武器",combat_large:"大型白兵武器",shooting:"射撃武器",catalyst:"魔術触媒",light_armor:"軽装防具",heavy_armor:"重装防具"},weaponDamage:{"":"",combat_small:"1d4+1",combat_medium:"1d6+1",combat_large:"1d10",shooting:"1d8",catalyst:""},equipmentWeights:{weapon:{"":0,combat_small:1,combat_medium:3,combat_large:5,shooting:2,catalyst:1},armor:{"":0,light_armor:2,heavy_armor:5}},defaultCharacterData:{images:[],name:"",playerName:"",species:"",rareSpecies:"",occupation:"",age:null,gender:"",height:"",weight:"",origin:"",faith:"",otherItems:"",currentScar:0,initialScar:0,linkCurrentToInitialScar:!0,memo:"",weaknesses:null},experiencePointValues:{skillBase:10,expertSkill:5,specialSkill:5,weakness:10,basePoints:100,maxInitialBonus:20},placeholderTexts:{expertSkill:"専門技能",expertSkillDisabled:"専門技能 (技能選択で有効)",weaponName:"装備名",armorName:"装備名",specialSkillNote:"追記事項",characterMemo:"キャラクター背景、設定、その他メモを記入"},config:{initialSpecialSkillCount:8,maxSpecialSkills:20,maxWeaknesses:10},helpText:`#### 基本操作
- **データ保存**: 画面下部の「端末保存」ボタンで、入力内容をお使いの端末にファイル(.json または .zip)としてダウンロードできます。
- **データ読込**: 「読み込み」ボタンから、保存したファイルを選択してキャラクターデータを復元できます。
- **ココフォリア駒出力**: 「ココフォリア駒出力」ボタンをクリックすると、駒データがクリップボードにコピーされます。コピーされたデータをココフォリアのチャット欄に貼り付けるとキャラクター駒が作成されます。

#### Google Drive連携
- **サインイン**: 左上のクラウドアイコンから「キャラクターハブ」を開き、Googleアカウントでサインインできます。
- **保存と管理**: サインインすると、キャラクターハブ内でクラウド上のキャラクターデータを一覧表示し、「新規保存」「上書き保存」「削除」などが可能です。

#### 共有機能
- **共有リンク作成**: フッターの「共有」ボタンから、他の人とキャラクターデータを共有するためのリンクを作成できます。
- **スナップショット**: 作成した時点のキャラクターデータのコピーを共有します。
- **ライブリンク**: Google Driveに保存されたデータを常に参照するリンクを共有します。データを更新すると、共有相手が見る内容も更新されます。(要Google Drive連携)
- **オプション**: 共有リンクにはパスワードや有効期限を設定できます。「全文・画像を含める」オプションもGoogle Driveを利用します。

#### トラブルシューティング
- **Google Driveにサインインできない**: ポップアップブロック機能が有効な場合、認証画面が表示されないことがあります。ブラウザの設定で、このサイトのポップアップを許可してください。
- **ファイルが読み込めない**: ファイルが破損しているか、非対応の形式の可能性があります。本ツールの「データ保存」機能で保存したファイルをご利用ください。
- **共有リンクが開けない**: リンクの有効期限が切れているか、パスワードが間違っている可能性があります。リンクの作成者に確認してください。

#### 互換性とフィードバック
- bright-trpg様作成の「慈悲なきアイオニア　キャラクター作成用ツール」で保存されたJSONファイルも読み込み可能です。
- 不具合報告やご要望は、[GitHub Issues](https://github.com/ktakahiro1729/aioniacs/issues)までお寄せください。
  `},uo={general:"共有データ読み込み失敗",invalid:"共有リンクが不正です",expired:"共有リンクの有効期限が切れています",passwordRequired:"パスワードが必要です",decryptionFailed:"復号に失敗しました"},q={googleDrive:{signIn:{loading:()=>({title:"Google Drive",message:"サインインしています..."}),success:()=>({title:"サインイン完了",message:""}),error:e=>({title:"サインイン失敗",message:e.message||e.details||"もう一度お試しください。"})},signOut:{success:()=>({title:"サインアウトしました",message:""})},folderPicker:{error:e=>({title:"Google Drive",message:(e==null?void 0:e.message)||"フォルダ選択をキャンセルしました"})},save:{loading:()=>({title:"Google Drive",message:"保存中..."}),success:()=>({title:"保存完了",message:""}),error:e=>({title:"保存失敗",message:e.message||""})},load:{loading:e=>({title:"Google Drive",message:`${e} を読み込み中...`}),success:e=>({title:"読込完了",message:`${e} を読み込みました`}),error:e=>({title:"読み込みエラー",message:e.message||"不明なエラー"})},apiInitError:()=>({title:"Google API エラー",message:"初期化に失敗しました"}),signInInitError:()=>({title:"Google サインインエラー",message:"初期化に失敗しました"})},share:{copied:e=>({title:"共有リンクをコピーしました",message:e}),copyFailed:e=>({title:"コピー失敗",message:e.message}),needSignIn:()=>({title:"Google Drive",message:"サインインしてください"}),generateFailed:e=>({title:"共有リンク生成失敗",message:e.message}),loadError:{...uo,toast:e=>({title:"共有データエラー",message:uo[e]||uo.general})}},characterHub:{loadConfirm:e=>({title:"読込確認",message:`${e} を読み込みますか？`,buttons:[{label:"読込",value:"load",variant:"primary"},{label:"キャンセル",value:"cancel",variant:"secondary"}]}),deleteConfirm:e=>({title:"削除確認",message:`${e} を削除しますか？`,buttons:[{label:"削除",value:"delete",variant:"primary"},{label:"キャンセル",value:"cancel",variant:"secondary"}]}),delete:{successToast:()=>({title:"削除完了",message:""}),asyncToast:{loading:()=>({title:"削除",message:"削除中..."}),success:()=>({title:"削除完了",message:""}),error:e=>({title:"削除失敗",message:e.message||""})}},export:{loading:()=>({title:"エクスポート",message:"エクスポート中..."}),success:()=>({title:"エクスポート完了",message:""}),error:e=>({title:"エクスポート失敗",message:e.message||""})}},image:{loadError:e=>({title:"画像読み込み失敗",message:e.message})},dataExport:{loadError:e=>({title:"読み込み失敗",message:e})},file:{loadError:"ファイルの読み込みに失敗しました。JSON形式が正しくない可能性があります。"},ui:{header:{defaultTitle:"Aionia TRPG Character Sheet",cloudHub:"Cloud Hub",helpLabel:"?"},footer:{experience:"経験点",io:"入出力",share:"共有",copyEdit:"自分用にコピーして編集"},viewModeBanner:"閲覧モードで表示中",buttons:{saveCloud:"Drive保存",saveCloudNew:"新規保存",saveCloudOverwrite:"上書保存",saveCloudTitle:"Google Driveに保存",loadCloud:"Drive読込",loadCloudTitle:"Google Driveから読込む",saveLocal:"端末保存",saveLocalTitle:"端末に保存",loadLocal:"読み込み",loadLocalTitle:"端末から読込む"},prompts:{sharedDataPassword:"共有データのパスワードを入力してください"},modal:{hubTitle:"クラウドキャラクター管理",generate:"生成",shareTitle:"共有リンクを生成",cancel:"キャンセル",shareFailed:"共有リンク生成失敗",io:{title:"入出力",buttons:{saveLocal:"端末保存",loadLocal:"端末読込",output:"駒出力",print:"印刷",driveFolder:"フォルダ変更"}}}},outputButton:{default:"ココフォリア駒出力",success:"コピー完了！",successFallback:"コピー完了！ (fallback)",failed:"コピー失敗 (fallback)",error:"コピーエラー (fallback)",animating:"冒険が始まる――",animationTimings:{state1_bgFill:500,state2_textHold:1e3,state3_textFadeOut:500,state4_bgReset:700,state5_successHold:300}},weaknessDropdownHelp:"（冒険の記録を追加すると選択肢が増えます）"};function Jn(e){return JSON.parse(JSON.stringify(e))}function jo(e){return Array(e).fill(null).map(()=>({text:"",acquired:"--"}))}function jl(){const e=Jn(ee.defaultCharacterData);return e.weaknesses=jo(ee.config.maxWeaknesses),e}function ql(){return Jn(ee.baseSkills)}function Zl(){return Array(ee.config.initialSpecialSkillCount).fill(null).map(()=>({group:"",name:"",note:"",showNote:!1}))}function Wl(){return{weapon1:{group:"",name:""},weapon2:{group:"",name:""},armor:{group:"",name:""}}}function Kl(){return[{sessionName:"",gotExperiments:null,memo:""}]}const Ve=Ps("character",{state:()=>({character:jl(),skills:ql(),specialSkills:Zl(),equipments:Wl(),histories:Kl()}),getters:{maxExperiencePoints(e){const t=Number(e.character.initialScar)||0,n=e.character.weaknesses.reduce((s,o)=>s+(o.text&&o.text.trim()!==""&&o.acquired==="作成時"?ee.experiencePointValues.weakness:0),0),i=Math.min(t+n,ee.experiencePointValues.maxInitialBonus),r=e.histories.reduce((s,o)=>s+(Number(o.gotExperiments)||0),0);return ee.experiencePointValues.basePoints+i+r},currentExperiencePoints(e){const t=e.skills.reduce((r,s)=>r+(s.checked?ee.experiencePointValues.skillBase:0),0),n=e.skills.reduce((r,s)=>s.checked&&s.canHaveExperts?r+s.experts.reduce((o,a)=>o+(a.value&&a.value.trim()!==""?ee.experiencePointValues.expertSkill:0),0):r,0),i=e.specialSkills.reduce((r,s)=>r+(s.name&&s.name.trim()!==""?ee.experiencePointValues.specialSkill:0),0);return t+n+i},currentWeight(e){const t=ee.equipmentWeights.weapon,n=ee.equipmentWeights.armor;let i=0;return i+=t[e.equipments.weapon1.group]||0,i+=t[e.equipments.weapon2.group]||0,i+=n[e.equipments.armor.group]||0,i},sessionNamesForWeaknessDropdown(e){const t=[...ee.weaknessAcquisitionOptions],n=e.histories.map(r=>r.sessionName).filter(r=>r&&r.trim()!=="").map(r=>({value:r,text:r,disabled:!1})),i={value:"help-text",text:q.weaknessDropdownHelp,disabled:!0};return t.concat(n,i)}},actions:{_manageListItem({list:e,action:t,index:n,newItemFactory:i,hasContentChecker:r,maxLength:s}){if(t==="add"){if(s&&e.length>=s)return;const o=typeof i=="function"?i():i;e.push(typeof o=="object"&&o!==null?Jn(o):o)}else if(t==="remove"){if(e.length>1)e.splice(n,1);else if(e.length===1&&r&&r(e[n])){const o=typeof i=="function"?i():i;e[n]=typeof o=="object"&&o!==null?Jn(o):o}}},addSpecialSkillItem(){this._manageListItem({list:this.specialSkills,action:"add",newItemFactory:()=>({group:"",name:"",note:"",showNote:!1}),maxLength:ee.config.maxSpecialSkills})},removeSpecialSkill(e){this._manageListItem({list:this.specialSkills,action:"remove",index:e,newItemFactory:()=>({group:"",name:"",note:"",showNote:!1}),hasContentChecker:t=>!!(t.group||t.name||t.note)})},addHistoryItem(){this._manageListItem({list:this.histories,action:"add",newItemFactory:()=>({sessionName:"",gotExperiments:null,memo:""})})},removeHistoryItem(e){this._manageListItem({list:this.histories,action:"remove",index:e,newItemFactory:()=>({sessionName:"",gotExperiments:null,memo:""}),hasContentChecker:t=>!!(t.sessionName||t.gotExperiments!==null&&t.gotExperiments!==""||t.memo)})},addExpert(e){const t=this.skills.find(n=>n.id===e);t&&t.canHaveExperts&&this._manageListItem({list:t.experts,action:"add",newItemFactory:()=>({value:""})})},removeExpert(e,t){const n=this.skills.find(i=>i.id===e);n&&n.canHaveExperts&&this._manageListItem({list:n.experts,action:"remove",index:t,newItemFactory:()=>({value:""}),hasContentChecker:i=>i.value&&i.value.trim()!==""})},updateHistoryItem(e,t,n){this.histories[e]&&(this.histories[e][t]=t==="gotExperiments"&&n!==""&&n!==null?Number(n):n)},handleSpeciesChange(){this.character.species!=="other"&&(this.character.rareSpecies="")},initializeAll(){Object.assign(this.character,jl()),this.skills.splice(0,this.skills.length,...ql()),this.specialSkills.splice(0,this.specialSkills.length,...Zl()),Object.assign(this.equipments,Wl()),this.histories.splice(0,this.histories.length,...Kl())}}}),gt=Ps("ui",{state:()=>({isCloudSaveSuccess:!1,isSignedIn:!1,isGapiInitialized:!1,isGisInitialized:!1,isLoading:!1,driveFolderId:null,driveFolderName:"",currentDriveFileId:null,currentDriveFileName:"",isViewingShared:!1,driveCharacters:[],pendingDriveSaves:{},showHeader:!0}),getters:{experienceStatusClass(){const e=Ve();return e.currentExperiencePoints>e.maxExperiencePoints?"status-display--experience-over":"status-display--experience-ok"},canSignInToGoogle(e){return e.isGapiInitialized&&e.isGisInitialized&&!e.isSignedIn},canOperateDrive(e){return e.isSignedIn&&e.driveFolderId}},actions:{setLoading(e){this.isLoading=e},async refreshDriveCharacters(e){if(!e)return;const t=this.driveCharacters.filter(s=>s.id.startsWith("temp-")),n=await e.readIndexFile(),i=new Set(n.map(s=>s.id));let r=this.driveCharacters.filter(s=>s.id.startsWith("temp-")||i.has(s.id));n.forEach(s=>{const o=r.findIndex(a=>a.id===s.id);o!==-1?r[o]={...r[o],...s}:r.push(s)}),t.forEach(s=>{r.some(o=>o.id===s.id)||r.push(s)}),this.driveCharacters=r},clearDriveCharacters(){this.driveCharacters=[]},addDriveCharacter(e){this.driveCharacters.push(e)},updateDriveCharacter(e,t){const n=this.driveCharacters.findIndex(i=>i.id===e);n!==-1&&(this.driveCharacters[n]={...this.driveCharacters[n],...t})},removeDriveCharacter(e){this.driveCharacters=this.driveCharacters.filter(t=>t.id!==e)},registerPendingDriveSave(e){return this.pendingDriveSaves[e]={canceled:!1},this.pendingDriveSaves[e]},cancelPendingDriveSave(e){this.pendingDriveSaves[e]&&(this.pendingDriveSaves[e].canceled=!0)},completePendingDriveSave(e){delete this.pendingDriveSaves[e]}}});class Af{constructor(t,n){this.apiKey=t,this.clientId=n,this.discoveryDocs=["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],this.scope="https://www.googleapis.com/auth/drive.appdata https://www.googleapis.com/auth/drive.file",this.gapiLoadedCallback=null,this.gisLoadedCallback=null,this.tokenClient=null,this.pickerApiLoaded=!1,this.handleSignIn=this.handleSignIn.bind(this),this.handleSignOut=this.handleSignOut.bind(this)}onGapiLoad(){return new Promise((t,n)=>{if(typeof gapi>"u"||!gapi.load){const i=new Error("GAPI core script not available for gapi.load.");return console.error("GDM: "+i.message),n(i)}gapi.load("client:picker",()=>{if(typeof gapi.client>"u"||!gapi.client.init){const i=new Error("GAPI client script not available for gapi.client.init.");return console.error("GDM: "+i.message),n(i)}gapi.client.init({apiKey:this.apiKey,discoveryDocs:this.discoveryDocs}).then(()=>{this.pickerApiLoaded=!0,console.log("GDM: GAPI client and Picker initialized."),t()}).catch(i=>{console.error("GDM: Error initializing GAPI client:",i),n(i)})})})}onGisLoad(){return new Promise((t,n)=>{if(typeof google>"u"||!google.accounts||!google.accounts.oauth2||!google.accounts.oauth2.initTokenClient){const i=new Error("GIS library not fully available to initialize token client (google.accounts.oauth2.initTokenClient is undefined).");return console.error("GDM: "+i.message),n(i)}try{this.tokenClient=google.accounts.oauth2.initTokenClient({client_id:this.clientId,scope:this.scope,callback:""}),console.log("GDM: GIS Token Client initialized."),t()}catch(i){console.error("GDM: Error initializing GIS Token Client:",i),n(i)}})}handleSignIn(t){if(!this.tokenClient){console.error("GIS Token Client not initialized."),t&&t(new Error("GIS Token Client not initialized."));return}this.tokenClient.callback=n=>{if(n.error){console.error("Google Sign-In error:",n.error),t&&t(new Error(n.error));return}console.log("Sign-in successful, token obtained."),t&&t(null,{signedIn:!0})},gapi.client.getToken()===null?this.tokenClient.requestAccessToken({prompt:"consent"}):this.tokenClient.requestAccessToken({prompt:""})}handleSignOut(t){const n=gapi.client.getToken();n!==null?google.accounts.oauth2.revoke(n.access_token,()=>{gapi.client.setToken(""),console.log("User signed out and token revoked."),t&&t()}):t&&t()}async createFolder(t){if(!gapi.client||!gapi.client.drive)return console.error("GAPI client or Drive API not loaded."),null;try{const n=await gapi.client.drive.files.create({resource:{name:t,mimeType:"application/vnd.google-apps.folder"},fields:"id, name"});return console.log("Folder created successfully:",n.result),n.result}catch(n){return console.error("Error creating folder:",n),null}}async findFolder(t){if(!gapi.client||!gapi.client.drive)return console.error("GAPI client or Drive API not loaded."),null;try{const i=(await gapi.client.drive.files.list({q:`mimeType='application/vnd.google-apps.folder' and name='${t}' and trashed=false`,fields:"files(id, name)",spaces:"drive"})).result.files;return i&&i.length>0?(console.log("Folder found:",i[0]),i[0]):(console.log("Folder not found:",t),null)}catch(n){return console.error("Error finding folder:",n),null}}async getOrCreateAppFolder(t){if(!gapi.client||!gapi.client.drive)return console.error("GAPI client or Drive API not loaded for getOrCreateAppFolder."),null;try{let n=await this.findFolder(t);return n||(console.log(`Folder "${t}" not found, creating it.`),n=await this.createFolder(t)),n}catch(n){return console.error(`Error in getOrCreateAppFolder for "${t}":`,n),null}}async listFiles(t,n="application/json"){if(!gapi.client||!gapi.client.drive)return console.error("GAPI client or Drive API not loaded for listFiles."),[];try{return(await gapi.client.drive.files.list({q:`'${t}' in parents and mimeType='${n}' and trashed=false`,fields:"files(id, name)",spaces:"drive"})).result.files||[]}catch(i){return console.error("Error listing files:",i),[]}}async saveFile(t,n,i,r=null){if(!gapi.client||!gapi.client.drive)return console.error("GAPI client or Drive API not loaded for saveFile."),null;if(r)try{const s="-------314159265358979323846",o=`\r
--${s}\r
`,a=`\r
--${s}--`,c="application/json",l={name:n,mimeType:c},u=o+`Content-Type: application/json; charset=UTF-8\r
\r
`+JSON.stringify(l)+o+`Content-Type: ${c}\r
\r
`+i+a,d=await gapi.client.request({path:`/upload/drive/v3/files/${r}`,method:"PATCH",params:{uploadType:"multipart"},headers:{"Content-Type":`multipart/related; boundary=${s}`},body:u});return console.log("File updated successfully:",d.result),{id:d.result.id,name:d.result.name}}catch(s){if(s.status===404)throw console.error("Error creating file: The parent folder was not found.",s),new Error("Parent folder not found. Please select a new folder.");return console.error("Error creating new file:",s),s.result&&s.result.error&&console.error("Detailed error:",s.result.error.message),null}try{const s="-------314159265358979323846",o=`\r
--${s}\r
`,a=`\r
--${s}--`,c="application/json",l={name:n,parents:[t],mimeType:c},u=o+`Content-Type: application/json; charset=UTF-8\r
\r
`+JSON.stringify(l)+o+`Content-Type: ${c}\r
\r
`+i+a,d=await gapi.client.request({path:"/upload/drive/v3/files",method:"POST",params:{uploadType:"multipart",fields:"id,name"},headers:{"Content-Type":`multipart/related; boundary=${s}`},body:u});return console.log("File created successfully:",d.result),{id:d.result.id,name:d.result.name}}catch(s){return console.error("Error creating new file:",s),s.result&&s.result.error&&console.error("Detailed error:",s.result.error.message),null}}async loadFileContent(t){if(!gapi.client||!gapi.client.drive)return console.error("GAPI client or Drive API not loaded for loadFileContent."),null;try{const n=await gapi.client.drive.files.get({fileId:t,alt:"media"});return typeof n.body=="object"?JSON.stringify(n.body):n.body}catch(n){return console.error("Error loading file content:",n),n.result&&n.result.error&&console.error("Detailed error:",n.result.error.message),null}}async uploadAndShareFile(t,n,i){if(!gapi.client||!gapi.client.drive)return console.error("GAPI client or Drive API not loaded for uploadAndShareFile."),null;try{const r="-------314159265358979323846",s=`\r
--${r}\r
`,o=`\r
--${r}--`,a={name:n,mimeType:i},c=s+`Content-Type: application/json; charset=UTF-8\r
\r
`+JSON.stringify(a)+s+`Content-Type: ${i}\r
\r
`+t+o,l=await gapi.client.request({path:"/upload/drive/v3/files",method:"POST",params:{uploadType:"multipart",fields:"id"},headers:{"Content-Type":`multipart/related; boundary=${r}`},body:c});return await gapi.client.drive.permissions.create({fileId:l.result.id,resource:{role:"reader",type:"anyone"}}),l.result.id}catch(r){return console.error("Error uploading and sharing file:",r),null}}showFilePicker(t,n=null,i=["application/json"]){if(!this.pickerApiLoaded){console.error("Picker API not loaded yet."),t&&t(new Error("Picker API not loaded."));return}const r=gapi.client.getToken();if(!r){console.error("User not signed in or token not available for Picker."),t&&t(new Error("Not signed in or token unavailable."));return}const s=l=>{if(l[google.picker.Response.ACTION]===google.picker.Action.PICKED){const u=l[google.picker.Response.DOCUMENTS][0];t&&t(null,{id:u.id,name:u.name})}else l[google.picker.Response.ACTION]===google.picker.Action.CANCEL&&(console.log("Picker cancelled by user."),t&&t(new Error("Picker cancelled by user.")))},o=new google.picker.View(google.picker.ViewId.DOCS);n&&o.setParent(n),i&&i.length>0&&o.setMimeTypes(i.join(",")),new google.picker.PickerBuilder().setOrigin(window.location.origin).addView(o).enableFeature(google.picker.Feature.NAV_HIDDEN).setOAuthToken(r.access_token).setCallback(s).build().setVisible(!0)}showFolderPicker(t){if(!this.pickerApiLoaded){console.error("Picker API not loaded yet for folder picker."),t&&t(new Error("Picker API not loaded."));return}const n=gapi.client.getToken();if(!n){console.error("User not signed in or token not available for Folder Picker."),t&&t(new Error("Not signed in or token unavailable."));return}const i=a=>{if(a[google.picker.Response.ACTION]===google.picker.Action.PICKED){const c=a[google.picker.Response.DOCUMENTS][0];t&&t(null,{id:c.id,name:c.name})}else a[google.picker.Response.ACTION]===google.picker.Action.CANCEL&&(console.log("Folder Picker cancelled by user."),t&&t(new Error("Folder Picker cancelled by user.")))},r=new google.picker.DocsView;r.setIncludeFolders(!0),r.setSelectFolderEnabled(!0),r.setMimeTypes("application/vnd.google-apps.folder"),new google.picker.PickerBuilder().setOrigin(window.location.origin).addView(r).setTitle("Select a folder").setOAuthToken(n.access_token).setCallback(i).build().setVisible(!0)}async ensureIndexFile(){const t=(await gapi.client.drive.files.list({q:"name='character_index.json' and trashed=false",spaces:"appDataFolder",fields:"files(id,name)"})).result.files||[];if(t.length>0)return this.indexFileId=t[0].id,t[0];const n=await this.saveFile("appDataFolder","character_index.json","[]");return n&&(this.indexFileId=n.id),n}async readIndexFile(){const t=await this.ensureIndexFile();if(!t)return[];const n=await this.loadFileContent(t.id);try{return JSON.parse(n||"[]")}catch{return[]}}async writeIndexFile(t){const n=await this.ensureIndexFile();return n?this.saveFile("appDataFolder","character_index.json",JSON.stringify(t,null,2),n.id):null}async addIndexEntry(t){const n=await this.readIndexFile();n.push({...t,updatedAt:new Date().toISOString()}),await this.writeIndexFile(n)}async renameIndexEntry(t,n){const i=await this.readIndexFile();i.forEach(r=>{r.id===t&&(r.characterName=n,r.updatedAt=new Date().toISOString())}),await this.writeIndexFile(i)}async removeIndexEntry(t){const i=(await this.readIndexFile()).filter(r=>r.id!==t);await this.writeIndexFile(i)}async createCharacterFile(t,n){return this.saveFile("appDataFolder",n,JSON.stringify(t,null,2))}async updateCharacterFile(t,n,i){return this.saveFile("appDataFolder",i,JSON.stringify(n,null,2),t)}async loadCharacterFile(t){const n=await this.loadFileContent(t);return n?JSON.parse(n):null}async deleteCharacterFile(t){if(!gapi.client||!gapi.client.drive)return null;await gapi.client.drive.files.delete({fileId:t}),await this.removeIndexEntry(t)}}window.GoogleDriveManager=Af;const Cf=Ps("notification",{state:()=>({toasts:[]}),actions:{addToast(e){const t=Date.now()+Math.random(),n={id:t,duration:5e3,type:"info",...e};return this.toasts.push(n),n.duration>0&&setTimeout(()=>{this.removeToast(t)},n.duration),t},updateToast(e,t){const n=this.toasts.findIndex(r=>r.id===e);if(n===-1)return;const i=this.toasts[n];Object.assign(i,t),t.duration>0&&setTimeout(()=>{this.removeToast(e)},t.duration)},removeToast(e){this.toasts=this.toasts.filter(t=>t.id!==e)}}});function ai(){const e=Cf();function t(i){return e.addToast(i)}function n(i,r){const s=t({duration:0,type:"info",...r.loading||{}}),o=(a,c)=>{e.updateToast(s,{duration:5e3,type:c,...a})};return i.then(a=>(o(r.success||{},"success"),a)).catch(a=>{const c=typeof r.error=="function"?r.error(a):{...r.error||{},message:r.error&&r.error.message||a.message};o(c,"error")}),i}return{showToast:t,showAsyncToast:n}}function Bg(e){const t=gt(),n=Ve(),i=Fe(null),{showToast:r,showAsyncToast:s}=ai(),o=We(()=>t.canSignInToGoogle);function a(){if(!i.value)return;const p=new Promise((b,E)=>{i.value.handleSignIn((x,C)=>{x||!C||!C.signedIn?(t.isSignedIn=!1,E(x||new Error("Ensure pop-ups are enabled."))):(t.isSignedIn=!0,t.refreshDriveCharacters(i.value),b())})});s(p,{loading:q.googleDrive.signIn.loading(),success:q.googleDrive.signIn.success(),error:b=>q.googleDrive.signIn.error(b)})}function c(){i.value&&i.value.handleSignOut(()=>{t.isSignedIn=!1,t.clearDriveCharacters(),r({type:"success",...q.googleDrive.signOut.success()})})}function l(){const p=e.googleDriveManager;p&&p.showFolderPicker((b,E)=>{if(b||!E){r({type:"error",...q.googleDrive.folderPicker.error(b)});return}t.driveFolderId=E.id,t.driveFolderName=E.name})}async function u(p,b){if(!e.googleDriveManager)return;t.isCloudSaveSuccess=!1;const E=n.character.name||b,x=new Date().toISOString();if(p){const C=t.driveCharacters.findIndex(T=>T.id===p),k=C!==-1?{...t.driveCharacters[C]}:null;t.updateDriveCharacter(p,{characterName:E,updatedAt:x});const v=e.saveDataToAppData(n.character,n.skills,n.specialSkills,n.equipments,n.histories,p,b).then(T=>{T&&(t.isCloudSaveSuccess=!0)}).catch(T=>{throw k&&t.updateDriveCharacter(p,k),T});return s(v,{loading:q.googleDrive.save.loading(),success:q.googleDrive.save.success(),error:T=>q.googleDrive.save.error(T)}),v}else{const C=`temp-${Date.now()}`;t.addDriveCharacter({id:C,name:b,characterName:E,updatedAt:x});const k=t.registerPendingDriveSave(C),v=e.saveDataToAppData(n.character,n.skills,n.specialSkills,n.equipments,n.histories,p,b).then(T=>{!k.canceled&&T&&(t.isCloudSaveSuccess=!0,t.updateDriveCharacter(C,{id:T.id,name:T.name,updatedAt:x})),t.completePendingDriveSave(C)}).catch(T=>{throw k.canceled||t.removeDriveCharacter(C),t.completePendingDriveSave(C),T});return s(v,{loading:q.googleDrive.save.loading(),success:q.googleDrive.save.success(),error:T=>q.googleDrive.save.error(T)}),v}}function d(){return u(t.currentDriveFileId,t.currentDriveFileName)}function f(){return u(t.currentDriveFileId,t.currentDriveFileId?t.currentDriveFileName:n.character.name)}function h(){const p="AIzaSyBXvh_XH2XdHedIO5AaZKWLl1NJm7UAHnU",b="913887099800-5pkljcl9uua4ktealpbndilam9i1q1dg.apps.googleusercontent.com";i.value=new Af(p,b),e.setGoogleDriveManager(i.value);const E=async()=>{if(!(t.isGapiInitialized||!i.value)){t.isGapiInitialized=!0,console.info("Google API Loading...");try{await i.value.onGapiLoad(),console.info("Google API Ready")}catch{r({type:"error",...q.googleDrive.apiInitError()})}}},x=async()=>{if(!(t.isGisInitialized||!i.value)){t.isGisInitialized=!0,console.info("Google Sign-In Loading...");try{await i.value.onGisLoad(),console.info("Google Sign-In Ready")}catch{r({type:"error",...q.googleDrive.signInInitError()})}}};function C(k,v){return new Promise((T,j)=>{if(v()){T();return}const L=document.querySelector(k);if(!L){j(new Error("Script not found"));return}L.addEventListener("load",T,{once:!0}),L.addEventListener("error",()=>j(new Error("Script load failed")),{once:!0})})}C('script[src="https://apis.google.com/js/api.js"]',()=>window.gapi&&window.gapi.load).then(E).catch(()=>r({type:"error",...q.googleDrive.apiInitError()})),C('script[src="https://accounts.google.com/gsi/client"]',()=>window.google&&window.google.accounts).then(x).catch(()=>r({type:"error",...q.googleDrive.signInInitError()}))}return oi(()=>{window.GoogleDriveManager&&h()}),{canSignInToGoogle:o,handleSignInClick:a,handleSignOutClick:c,promptForDriveFolder:l,saveCharacterToDrive:u,handleSaveToDriveClick:d,saveOrUpdateCurrentCharacterInDrive:f}}function If(){return!("ontouchstart"in window||navigator.maxTouchPoints>0)}function Vg(e,t){const n=Fe("closed"),i=Fe(!1),r=We(()=>n.value!=="closed");function s(){i.value&&n.value==="closed"&&(n.value="hovered")}function o(){i.value&&n.value==="hovered"&&(n.value="closed")}function a(){i.value?n.value=n.value==="fixed"?"closed":"fixed":n.value=n.value==="closed"?"fixed":"closed"}function c(){n.value="closed"}function l(u){var h,p;if(n.value!=="fixed")return;const d=((h=e.value)==null?void 0:h.panelEl)||e.value,f=(p=t.value)==null?void 0:p.helpIcon;d&&f&&!d.contains(u.target)&&!f.contains(u.target)&&(n.value="closed")}return oi(()=>{i.value=If(),document.addEventListener("click",l)}),Ds(()=>{document.removeEventListener("click",l)}),{helpState:n,isHelpVisible:r,handleHelpIconMouseOver:s,handleHelpIconMouseLeave:o,handleHelpIconClick:a,closeHelpPanel:c}}const Gg="modulepreload",jg=function(e,t){return new URL(e,t).href},Yl={},At=function(t,n,i){let r=Promise.resolve();if(n&&n.length>0){let o=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};const a=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),l=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));r=o(n.map(u=>{if(u=jg(u,i),u in Yl)return;Yl[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(!!i)for(let b=a.length-1;b>=0;b--){const E=a[b];if(E.href===u&&(!d||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":Gg,d||(p.as="script"),p.crossOrigin="",p.href=u,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((b,E)=>{p.addEventListener("load",b),p.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return t().catch(s)})};class Df{constructor(t){this.gameData=t,this.googleDriveManager=null}setGoogleDriveManager(t){this.googleDriveManager=t}_sanitizeFileName(t){return(t||"").replace(/[\\/:*?"<>|]/g,"_").trim()||"Aionia_Character"}async saveData(t,n,i,r,s){const o={...t};let a=null;o.images&&o.images.length>0&&(a=[...o.images],delete o.images);const c={character:o,skills:n.map(k=>({id:k.id,checked:k.checked,canHaveExperts:k.canHaveExperts,experts:k.canHaveExperts?k.experts.filter(v=>v.value&&v.value.trim()!=="").map(v=>({value:v.value})):[]})),specialSkills:i.filter(k=>k.group&&k.name),equipments:r,histories:s.filter(k=>k.sessionName||k.gotExperiments!==null&&k.gotExperiments!==""||k.memo)},l=JSON.stringify(c,null,2),u=this._sanitizeFileName(t.name),d=new Date,f=d.getFullYear(),h=String(d.getMonth()+1).padStart(2,"0"),p=String(d.getDate()).padStart(2,"0"),b=String(d.getHours()).padStart(2,"0"),E=String(d.getMinutes()).padStart(2,"0"),x=String(d.getSeconds()).padStart(2,"0"),C=`${f}${h}${p}${b}${E}${x}`;if(a)try{const{default:k}=await At(async()=>{const{default:A}=await import("./jszip.min-BmGvmV6A.js").then(R=>R.j);return{default:A}},[],import.meta.url),v=new k;v.file("character_data.json",l);const T=v.folder("images");a.forEach((A,R)=>{const P=A.substring(A.indexOf(",")+1),N=A.substring(A.indexOf("/")+1,A.indexOf(";"));T.file(`image_${R}.${N||"png"}`,P,{base64:!0})});const j=await v.generateAsync({type:"blob"}),L=URL.createObjectURL(j),F=document.createElement("a");F.href=L,F.download=`${u}_${C}.zip`,document.body.appendChild(F),F.click(),document.body.removeChild(F),URL.revokeObjectURL(L)}catch(k){throw console.error("Error saving ZIP file:",k),new Error("ZIPファイルの保存に失敗しました: "+k.message)}else{const k=new Blob([l],{type:"application/json"}),v=URL.createObjectURL(k),T=document.createElement("a");T.href=v,T.download=`${u}_${C}.json`,document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(v)}}handleFileUpload(t,n,i){const r=t.target.files[0];if(!r)return;const s=r.name,o=new FileReader;s.endsWith(".zip")?(o.onload=async a=>{try{const{default:c}=await At(async()=>{const{default:E}=await import("./jszip.min-BmGvmV6A.js").then(x=>x.j);return{default:E}},[],import.meta.url),l=await c.loadAsync(a.target.result),u=l.file("character_data.json");if(!u)throw new Error("ZIPファイルに character_data.json が見つかりません。");const d=await u.async("string"),f=JSON.parse(d),h=[],p=l.folder("images");if(p){const E=[];p.forEach((x,C)=>{if(!C.dir){const k=C.async("base64").then(v=>{const T=x.substring(x.lastIndexOf(".")+1)||"png",j=`image/${T==="jpg"?"jpeg":T}`;h.push({relativePath:x,imageDataUrl:`data:${j};base64,${v}`})}).catch(v=>{console.error(`Error loading image ${x} from zip:`,v)});E.push(k)}}),await Promise.all(E),h.sort((x,C)=>{const k=/image_(\d+)\..+/i,v=x.relativePath.match(k),T=C.relativePath.match(k),j=v?parseInt(v[1],10):1/0,L=T?parseInt(T[1],10):1/0;return j!==1/0&&L!==1/0?j-L:j!==1/0?-1:L!==1/0?1:x.relativePath.localeCompare(C.relativePath)})}f.character||(f.character={}),f.character.images=h.map(E=>E.imageDataUrl);const b=this.parseLoadedData(f);n(b)}catch(c){console.error("Failed to parse ZIP file:",c),i(q.file.loadError+" (ZIP: "+c.message+")")}},o.readAsArrayBuffer(r)):(o.onload=a=>{const c=a.target.result;try{const l=JSON.parse(c),u=this.parseLoadedData(l);n(u)}catch(l){console.error("Failed to parse JSON file:",l),i(q.file.loadError)}},o.readAsText(r)),t.target.value=null}async exportDataToDriveFolder(t,n,i,r,s,o,a,c){if(!this.googleDriveManager)throw console.error("GoogleDriveManager not set in DataManager."),new Error("GoogleDriveManager not configured. Please sign in or initialize the Drive manager.");const l={character:t,skills:n.map(f=>({id:f.id,checked:f.checked,canHaveExperts:f.canHaveExperts,experts:f.canHaveExperts?f.experts.filter(h=>h.value&&h.value.trim()!=="").map(h=>({value:h.value})):[]})),specialSkills:i.filter(f=>f.group&&f.name),equipments:r,histories:s.filter(f=>f.sessionName||f.gotExperiments!==null&&f.gotExperiments!==""||f.memo)},u=JSON.stringify(l,null,2),d=(c||t.name||"Aionia_Character_Sheet").replace(/[\\/:*?"<>|]/g,"_")+".json";try{return await this.googleDriveManager.saveFile(o,d,u,a)}catch(f){throw console.error("Error saving data to Google Drive:",f),f}}async saveDataToAppData(t,n,i,r,s,o,a){if(!this.googleDriveManager)throw console.error("GoogleDriveManager not set in DataManager."),new Error("GoogleDriveManager not configured. Please sign in or initialize the Drive manager.");const c={character:t,skills:n.map(d=>({id:d.id,checked:d.checked,canHaveExperts:d.canHaveExperts,experts:d.canHaveExperts?d.experts.filter(f=>f.value&&f.value.trim()!=="").map(f=>({value:f.value})):[]})),specialSkills:i.filter(d=>d.group&&d.name),equipments:r,histories:s.filter(d=>d.sessionName||d.gotExperiments!==null&&d.gotExperiments!==""||d.memo)},l=(a||t.name||"Aionia_Character_Sheet").replace(/[\\/:*?"<>|]/g,"_")+".json";if(o){const d=await this.googleDriveManager.updateCharacterFile(o,c,l);return await this.googleDriveManager.renameIndexEntry(o,t.name||"名称未設定"),d}const u=await this.googleDriveManager.createCharacterFile(c,l);return u&&await this.googleDriveManager.addIndexEntry({id:u.id,name:u.name,characterName:t.name||"名称未設定"}),u}async loadDataFromDrive(t){if(!this.googleDriveManager)throw console.error("GoogleDriveManager not set in DataManager."),new Error("GoogleDriveManager not configured. Please sign in or initialize the Drive manager.");try{const n=await this.googleDriveManager.loadFileContent(t);if(n){const i=JSON.parse(n);return this.parseLoadedData(i)}return null}catch(n){throw console.error("Error loading data from Google Drive:",n),n instanceof SyntaxError?new Error(q.file.loadError):n}}convertExternalJsonToInternalFormat(t){const n={character:{name:t.name||"",playerName:t.player||"",species:t.species||"",rareSpecies:t.rare_species||"",occupation:t.occupation||"",age:t.age?parseInt(t.age,10):null,gender:t.gender||"",height:t.height||"",weight:t.weight||"",origin:t.origin||"",faith:t.faith||"",otherItems:t.otherItems||"",initialScar:t.init_scar?parseInt(t.init_scar,10):0,currentScar:t.init_scar?parseInt(t.init_scar,10):0,linkCurrentToInitialScar:typeof t.linkCurrentToInitialScar=="boolean"?t.linkCurrentToInitialScar:!0,memo:t.character_memo||"",images:[],weaknesses:jo(this.gameData.config.maxWeaknesses)},skills:[],specialSkills:[],equipments:{weapon1:{group:"",name:""},weapon2:{group:"",name:""},armor:{group:"",name:""}},histories:[]};return t.init_weakness1&&(n.character.weaknesses[0]={text:t.init_weakness1,acquired:"作成時"}),t.init_weakness2&&(n.character.weaknesses[1]={text:t.init_weakness2,acquired:"作成時"}),this._convertSkillsData(t,n),this._convertSpecialSkillsData(t,n),this._convertEquipmentData(t,n),this._convertHistoryData(t,n),n}parseLoadedData(t){let n=t;if(this._isExternalFormat(t))console.log("External JSON format (bright-trpg tool) detected, converting..."),n=this.convertExternalJsonToInternalFormat(t);else if(this._isInternalFormat(t))console.log("Internal JSON format (this tool) detected."),n.character&&typeof n.character.images>"u"&&(n.character.images=[]);else{console.warn("Unknown JSON format, attempting to parse as is. Data integrity not guaranteed.");let i=[];t&&t.character&&Array.isArray(t.character.images)?i=t.character.images:t&&t.character&&typeof t.character.images<"u"&&console.warn("Loaded character data has an 'images' property that is not an array. Defaulting to empty images array."),n={character:{images:i,...t.character||{}},skills:[],specialSkills:[],equipments:{},histories:[],...t},n.character?Array.isArray(n.character.images)||(n.character.images=[]):n.character={images:[]}}return this._normalizeLoadedData(n)}_isExternalFormat(t){return t&&typeof t.player<"u"&&typeof t.character_memo<"u"}_isInternalFormat(t){return t&&t.character&&typeof t.character.playerName<"u"}_convertSkillsData(t,n){t.skills&&Array.isArray(t.skills)?this.gameData.externalSkillOrder.forEach((i,r)=>{const s=this.gameData.baseSkills.find(o=>o.id===i);if(s&&t.skills[r]){const o=t.skills[r],a={id:s.id,name:s.name,checked:!!o.selected,canHaveExperts:s.canHaveExperts,experts:[]};a.checked&&a.canHaveExperts?(o.expert_skills&&o.expert_skills.length>0&&(a.experts=o.expert_skills.map(c=>({value:c||""})).filter(c=>c.value)),a.experts.length===0&&a.experts.push({value:""})):a.canHaveExperts&&a.experts.push({value:""}),n.skills.push(a)}else s&&n.skills.push(Jn(s))}):n.skills=Jn(this.gameData.baseSkills)}_convertSpecialSkillsData(t,n){t.special_skills&&Array.isArray(t.special_skills)&&(n.specialSkills=t.special_skills.filter(i=>i.group&&i.name).map(i=>({group:i.group||"",name:i.name||"",note:i.note||"",showNote:this.gameData.specialSkillsRequiringNote.includes(i.name||"")})))}_convertEquipmentData(t,n){n.equipments={weapon1:{group:"",name:""},weapon2:{group:"",name:""},armor:{group:"",name:""}},(t.weapon1_type||t.weapon1_name)&&(n.equipments.weapon1={group:t.weapon1_type||"",name:t.weapon1_name||""}),(t.weapon2_type||t.weapon2_name)&&(n.equipments.weapon2={group:t.weapon2_type||"",name:t.weapon2_name||""}),(t.armor_type||t.armor_name)&&(n.equipments.armor={group:t.armor_type||"",name:t.armor_name||""})}_convertHistoryData(t,n){t.history&&Array.isArray(t.history)&&(n.histories=t.history.map(i=>({sessionName:i.name||"",gotExperiments:i.experiments?parseInt(i.experiments,10):null,memo:i.memo||i.stress||""})))}_normalizeLoadedData(t){const i={...{...this.gameData.defaultCharacterData,weaknesses:jo(this.gameData.config.maxWeaknesses)},...t.character||{}};Array.isArray(i.images)||(i.images=[]);const r={character:i,skills:this._normalizeSkillsData(t.skills),specialSkills:this._normalizeSpecialSkillsData(t.specialSkills),equipments:this._normalizeEquipmentData(t.equipments),histories:this._normalizeHistoryData(t.histories)};return typeof r.character.linkCurrentToInitialScar>"u"&&(r.character.linkCurrentToInitialScar=!0),r}_normalizeSkillsData(t){const n=Jn(this.gameData.baseSkills);if(t&&Array.isArray(t)){const i=new Map(t.map(r=>[r.id,r]));return n.map(r=>{const s=i.get(r.id);return s?(r.checked=!!s.checked,r.canHaveExperts?(r.experts=s.experts&&s.experts.length>0?s.experts.map(o=>({value:o.value||""})):[{value:""}],r.experts.length>1&&r.experts.every(o=>o.value==="")&&(r.experts=[{value:""}])):r.experts=[]):r.canHaveExperts?r.experts=[{value:""}]:r.experts=[],r})}return n}_normalizeSpecialSkillsData(t){let n=0;t&&Array.isArray(t)&&(n=t.length);const i=Math.min(Math.max(this.gameData.config.initialSpecialSkillCount,n),this.gameData.config.maxSpecialSkills),r=[];for(let s=0;s<i;s++)if(t&&s<t.length){const o=t[s];r.push({group:o.group||"",name:o.name||"",note:o.note||"",showNote:this.gameData.specialSkillsRequiringNote.includes(o.name||"")})}else r.push({group:"",name:"",note:"",showNote:!1});return r}_normalizeEquipmentData(t){const n={weapon1:{group:"",name:""},weapon2:{group:"",name:""},armor:{group:"",name:""}};return t?{weapon1:{...n.weapon1,...t.weapon1||{}},weapon2:{...n.weapon2,...t.weapon2||{}},armor:{...n.armor,...t.armor||{}}}:n}_normalizeHistoryData(t){return t&&t.length>0?t.map(n=>({sessionName:n.sessionName||"",gotExperiments:n.gotExperiments===null||n.gotExperiments===void 0||n.gotExperiments===""?null:Number(n.gotExperiments),memo:n.memo||""})):[{sessionName:"",gotExperiments:null,memo:""}]}}window.DataManager=Df;class Lf{constructor(){this.MAX_MEMO_LENGTH=200,this.BREAK_CHARS=[`
`,"。","．"],this.MIN_BREAK_POSITION_RATIO=.5}buildCharacterBasicInfo(t,n){const i=[];i.push(`名前：${t.name||"名無し"}${t.playerName?`（${t.playerName}）`:""}`);const r=n[t.species]||t.species,s=t.species==="other"?`${r}（${t.rareSpecies||"未設定"}）`:r;return i.push(`種族：${s}`),t.gender&&i.push(`性別：${t.gender}`),t.age!==null&&i.push(`年齢：${t.age}`),t.origin&&i.push(`出身地：${t.origin}`),t.occupation&&i.push(`職業：${t.occupation}`),t.faith&&i.push(`信仰：${t.faith}`),t.height&&i.push(`身長：${t.height}`),t.weight&&i.push(`体重：${t.weight}`),i}buildWeaknessesInfo(t){const n=[];return t.forEach(i=>{i.text&&i.text.trim()!==""&&n.push(i.text)}),n.length>0?[`
【弱点】`,...n]:[]}buildSkillsInfo(t){const n=[];return t.forEach(i=>{if(i.checked){let r=`〈${i.name}〉`;if(i.canHaveExperts&&i.experts.some(s=>s.value&&s.value.trim()!=="")){const s=i.experts.filter(o=>o.value&&o.value.trim()!=="").map(o=>o.value);s.length>0&&(r=`〈${i.name}：${s.join("/")}〉`)}n.push(r)}}),n.length>0?[`
【技能】`,n.join(" ")]:[]}buildSpecialSkillsInfo(t,n,i){let r="";return t.forEach(s=>{if(s.group&&s.name){const a=(n[s.group]||[]).find(l=>l.value===s.name),c=a?a.label:s.name;i.includes(s.name)&&s.note?r+=`《${c}：${s.note}》`:r+=`《${c}》`}}),r?[`
【特技】`,r]:[]}buildEquipmentInfo(t,n){const i=[];if(t.weapon1.group||t.weapon1.name){const r=n[t.weapon1.group]||t.weapon1.group;i.push(`${t.weapon1.name||"武器1"}（${r||"種別なし"}）`)}if(t.weapon2.group||t.weapon2.name){const r=n[t.weapon2.group]||t.weapon2.group;i.push(`${t.weapon2.name||"武器2"}（${r||"種別なし"}）`)}if(t.armor.group||t.armor.name){const r=n[t.armor.group]||t.armor.group;i.push(`${t.armor.name||"防具"}（${r||"種別なし"}）`)}return i.length>0?[`
【武器・防具】`,...i]:[]}buildOtherItemsInfo(t){return t?[`
【その他所持品】`,t]:[]}buildCharacterMemoInfo(t){if(!t)return[];let n="";return t.length<=this.MAX_MEMO_LENGTH?n=t:n=this.truncateCharacterMemo(t,this.MAX_MEMO_LENGTH),[`
【キャラクターメモ】`,n.trim()]}truncateCharacterMemo(t,n){const i=t.substring(0,n);let r=-1;for(const s of this.BREAK_CHARS){const o=i.lastIndexOf(s);o>r&&o>n*this.MIN_BREAK_POSITION_RATIO&&(r=o)}return r!==-1?t.substring(0,r+1)+(t.length>r+1?"…":""):t.substring(0,n)+"…"}buildCocofoliaCommands(t,n,i,r){const s=Number(t.currentScar)||0;let o=`1d100>={ダメージ}+${s} 〈ダメージチェック〉
1d100>={ストレス} 〈ストレスチェック〉
:傷痕=${s}+{ダメージ}/2 〈治癒①〉
:ダメージ=0                 〈治癒②〉
`;return n.forEach(a=>{const c=a.checked?"2d10":"1d10";o+=`${c} 〈${a.name}〉
`,a.name==="防御"&&(o+=`${c}+2 〈${a.name}（防具）〉
`),a.checked&&a.canHaveExperts&&a.experts.forEach(l=>{l.value&&l.value.trim()!==""&&(o+=`3d10 〈${a.name}：${l.value}〉
`)})}),i.weapon1.group&&r[i.weapon1.group]&&(o+=`${r[i.weapon1.group]} 〈ダメージ判定（${i.weapon1.name||"武器1"}）〉
`),i.weapon2.group&&r[i.weapon2.group]&&(o+=`${r[i.weapon2.group]} 〈ダメージ判定（${i.weapon2.name||"武器2"}）〉
`),o.trim()}buildCocofoliaCharacterObject(t,n,i,r){const s=Number(t.currentScar)||0;return{kind:"character",data:{params:[],status:[{label:"ダメージ",value:0},{label:"傷痕",value:s},{label:"ストレス",value:0}],name:t.name||"名無し",initiative:r*-1,memo:n,externalUrl:"",commands:i}}}generateCocofoliaData(t){const{character:n,skills:i,specialSkills:r,equipments:s,currentWeight:o,speciesLabelMap:a,equipmentGroupLabelMap:c,specialSkillData:l,specialSkillsRequiringNote:u,weaponDamage:d}=t,h=[...this.buildCharacterBasicInfo(n,a),...this.buildWeaknessesInfo(n.weaknesses),...this.buildSkillsInfo(i),...this.buildSpecialSkillsInfo(r,l,u),...this.buildEquipmentInfo(s,c),...this.buildOtherItemsInfo(n.otherItems),...this.buildCharacterMemoInfo(n.memo)].join(`
`).trim(),p=this.buildCocofoliaCommands(n,i,s,d);return this.buildCocofoliaCharacterObject(n,h,p,o)}}window.CocofoliaExporter=Lf;async function qg(e){if(navigator&&navigator.clipboard){await navigator.clipboard.writeText(e);return}const t=document.createElement("textarea");t.value=e,t.style.cssText="position: fixed; top: 0; left: 0; opacity: 0;",document.body.appendChild(t),t.focus(),t.select();try{document.execCommand("copy")}finally{document.body.removeChild(t)}}function Zg(){const e=Ve(),t=new Df(ee),n=new Lf,{showToast:i}=ai();function r(){t.saveData(e.character,e.skills,e.specialSkills,e.equipments,e.histories)}function s(c){t.handleFileUpload(c,l=>{Object.assign(e.character,l.character),e.skills.splice(0,e.skills.length,...l.skills),e.specialSkills.splice(0,e.specialSkills.length,...l.specialSkills),Object.assign(e.equipments,l.equipments),e.histories.splice(0,e.histories.length,...l.histories)},l=>i({type:"error",...q.dataExport.loadError(l)}))}async function o(c){try{await qg(c),document.dispatchEvent(new CustomEvent("aionia-copy-success",{detail:{type:"cocofolia"}}))}catch(l){console.error("Failed to copy: ",l),i({type:"error",title:q.outputButton.error})}}function a(){const c={character:e.character,skills:e.skills,specialSkills:e.specialSkills,equipments:e.equipments,currentWeight:e.currentWeight,speciesLabelMap:ee.speciesLabelMap,equipmentGroupLabelMap:ee.equipmentGroupLabelMap,specialSkillData:ee.specialSkillData,specialSkillsRequiringNote:ee.specialSkillsRequiringNote,weaponDamage:ee.weaponDamage},l=n.generateCocofoliaData(c),u=JSON.stringify(l,null,2);o(u)}return{dataManager:t,saveData:r,handleFileUpload:s,outputToCocofolia:a}}function Wg(){if(!window.visualViewport)return;const e=document.body,t=document.documentElement;let n=!1;const i=100;function r(){const s=window.innerHeight-window.visualViewport.height;s>i?(e.classList.add("keyboard-visible"),t.style.setProperty("--keyboard-height",`${s}px`),n=!0):n&&(e.classList.remove("keyboard-visible"),t.style.removeProperty("--keyboard-height"),n=!1)}oi(()=>{window.visualViewport.addEventListener("resize",r),r()}),Ds(()=>{window.visualViewport.removeEventListener("resize",r),e.classList.remove("keyboard-visible"),t.style.removeProperty("--keyboard-height"),n=!1})}function Kg(e){return e.filter(t=>t.checked).map(t=>{let n=`〈${t.name}〉`;if(t.canHaveExperts){const i=t.experts.filter(r=>r.value&&r.value.trim()!=="").map(r=>r.value);i.length>0&&(n=`〈${t.name}：${i.join("/")}〉`)}return n}).join("")}function Yg(e,t,n){return e.filter(i=>i.group&&i.name).map(i=>{const s=(t[i.group]||[]).find(a=>a.value===i.name),o=s?s.label:i.name;return n.includes(i.name)&&i.note?`《${o}：${i.note}》`:`《${o}》`}).join("")}function Xg(){Ve();async function e(){const{default:i}=await At(async()=>{const{default:p}=await import("./print-template-Q4EN_oRV.js");return{default:p}},[],import.meta.url),{default:r}=await At(async()=>{const{default:p}=await import("./print-styles-Dn6YpGf0.js");return{default:p}},[],import.meta.url),s=Ve(),o=s.character;let a=i;const c=(p,b="")=>{a=a.replace(new RegExp(`{{${p}}}`,"g"),b)};c("character-name",o.name||""),c("player-name",o.playerName||"");const l=ee.speciesLabelMap[o.species]||o.species||"";c("race",l==="未選択"?"":l),c("gender",o.gender||""),c("age",o.age!=null?String(o.age):""),c("height",o.height||""),c("weight",o.weight||""),c("origin",o.origin||""),c("occupation",o.occupation||""),c("faith",o.faith||""),c("current-scar-value",String(o.currentScar??"")),c("current-experience-value",s.currentExperiencePoints+"/"+s.maxExperiencePoints);for(let p=0;p<10;p++){const b=o.weaknesses[p]||{};c(`weakness-content-${p}`,b.text||""),c(`weakness-acquired-${p}`,b.acquired==="--"?"":b.acquired||"")}c("skills-content",Kg(s.skills)),c("abilities-content",Yg(s.specialSkills,ee.specialSkillData,ee.specialSkillsRequiringNote));const u=s.equipments,d=ee.equipmentGroupLabelMap[u.weapon1.group]||"";c("weapon1-type",d==="なし"?"":d),c("weapon1-detail",u.weapon1.name||"");const f=ee.equipmentGroupLabelMap[u.weapon2.group]||"";c("weapon2-type",f==="なし"?"":f),c("weapon2-detail",u.weapon2.name||"");const h=ee.equipmentGroupLabelMap[u.armor.group]||"";c("armor-type",h==="なし"?"":h),c("armor-detail",u.armor.name||""),c("equipment-weight-value",String(s.currentWeight||"")),c("inventory-content",o.otherItems||""),c("background-content",o.memo||"");for(let p=0;p<7;p++){const b=s.histories[p]||{};c(`adventure-scenario-${p}`,b.sessionName||""),c(`adventure-memo-${p}`,b.memo||""),c(`adventure-experience-${p}`,b.gotExperiments!=null?String(b.gotExperiments):"")}return a=a.replace(/{{[^}]+}}/g,""),a=a.replace("</head>",`<style>${r}</style></head>`),a}async function t(){console.log("印刷プロセスを開始します。");try{const i=await e();if(!i){console.error("HTMLの構築に失敗しました。処理を中断します。");return}const r=document.createElement("iframe");r.style.position="fixed",r.style.width="0",r.style.height="0",r.style.border="0",r.style.visibility="hidden",r.onload=()=>{var s,o;try{(s=r.contentWindow)==null||s.focus(),(o=r.contentWindow)==null||o.print()}catch(a){console.error("印刷実行中にエラーが発生しました:",a)}finally{setTimeout(()=>{document.body.contains(r)&&document.body.removeChild(r)},500)}},r.onerror=s=>{console.error("iframeの読み込み中にエラーが発生しました:",s)},r.srcdoc=i,document.body.appendChild(r)}catch(i){console.error("印刷プロセスの準備中にエラーが発生しました:",i)}}async function n(){console.log("プレビューページを生成します。");try{const i=await e(),r=window.open();r?(r.document.open(),r.document.write(i),r.document.close(),console.log("プレビューページを新しいタブで開きました。")):(console.error("ポップアップがブロックされたため、プレビューページを開けませんでした。"),alert("ポップアップがブロックされました。プレビュー機能を使用するには、このサイトのポップアップを許可してください。"))}catch(i){console.error("プレビューページの生成中にエラーが発生しました:",i)}}return{printCharacterSheet:t,openPreviewPage:n}}const Ia=Ps("modal",{state:()=>({isVisible:!1,title:"",message:"",component:$h(null),props:{},buttons:[],events:{},globalActions:null,resolvePromise:null,rejectPromise:null}),actions:{showModal(e){return new Promise((t,n)=>{this.isVisible=!0,this.title=e.title||"",this.message=e.message||"",this.component=e.component||null,this.props=e.props||{},this.buttons=e.buttons||[],this.events=e.on||{},this.globalActions=e.globalActions||null,this.resolvePromise=t,this.rejectPromise=n})},hideModal(){this.isVisible=!1,this.title="",this.message="",this.component=null,this.props={},this.buttons=[],this.events={},this.globalActions=null,this.resolvePromise=null,this.rejectPromise=null},resolveModal(e){this.resolvePromise&&this.resolvePromise(e),this.hideModal()}}});function Ms(){const e=Ia();function t(n){return e.showModal(n)}return{showModal:t}}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Jg(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function nr(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Rr(e,...t){if(!Jg(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Rf(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");nr(e.outputLen),nr(e.blockLen)}function _s(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Qg(e,t){Rr(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function pr(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function ns(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Ut(e,t){return e<<32-t|e>>>t}function $f(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Da(e){return typeof e=="string"&&(e=$f(e)),Rr(e),e}function Xl(e){return typeof e=="string"&&(e=$f(e)),Rr(e),e}function em(e,t){if(t!==void 0&&{}.toString.call(t)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(e,t)}class Of{}function tm(e){const t=i=>e().update(Da(i)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}class Pf extends Of{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,Rf(t);const i=Da(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,s=new Uint8Array(r);s.set(i.length>r?t.create().update(i).digest():i);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=t.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),pr(s)}update(t){return _s(this),this.iHash.update(t),this}digestInto(t){_s(this),Rr(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:i,finished:r,destroyed:s,blockLen:o,outputLen:a}=this;return t=t,t.finished=r,t.destroyed=s,t.blockLen=o,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=i._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Mf=(e,t,n)=>new Pf(e,t).update(n).digest();Mf.create=(e,t)=>new Pf(e,t);function nm(e,t,n,i){Rf(e);const r=em({dkLen:32,asyncTick:10},i),{c:s,dkLen:o,asyncTick:a}=r;if(nr(s),nr(o),nr(a),s<1)throw new Error("iterations (c) should be >= 1");const c=Xl(t),l=Xl(n),u=new Uint8Array(o),d=Mf.create(e,c),f=d._cloneInto().update(l);return{c:s,dkLen:o,asyncTick:a,DK:u,PRF:d,PRFSalt:f}}function im(e,t,n,i,r){return e.destroy(),t.destroy(),i&&i.destroy(),pr(r),n}function rm(e,t,n,i){const{c:r,dkLen:s,DK:o,PRF:a,PRFSalt:c}=nm(e,t,n,i);let l;const u=new Uint8Array(4),d=ns(u),f=new Uint8Array(a.outputLen);for(let h=1,p=0;p<s;h++,p+=a.outputLen){const b=o.subarray(p,p+a.outputLen);d.setInt32(0,h,!1),(l=c._cloneInto(l)).update(u).digestInto(f),b.set(f.subarray(0,b.length));for(let E=1;E<r;E++){a._cloneInto(l).update(f).digestInto(f);for(let x=0;x<b.length;x++)b[x]^=f[x]}}return im(a,c,o,l,f)}function sm(e,t,n,i){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,i);const r=BigInt(32),s=BigInt(4294967295),o=Number(n>>r&s),a=Number(n&s),c=i?4:0,l=i?0:4;e.setUint32(t+c,o,i),e.setUint32(t+l,a,i)}function om(e,t,n){return e&t^~e&n}function am(e,t,n){return e&t^e&n^t&n}class lm extends Of{constructor(t,n,i,r){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=i,this.isLE=r,this.buffer=new Uint8Array(t),this.view=ns(this.buffer)}update(t){_s(this),t=Da(t),Rr(t);const{view:n,buffer:i,blockLen:r}=this,s=t.length;for(let o=0;o<s;){const a=Math.min(r-this.pos,s-o);if(a===r){const c=ns(t);for(;r<=s-o;o+=r)this.process(c,o);continue}i.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===r&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){_s(this),Qg(t,this),this.finished=!0;const{buffer:n,view:i,blockLen:r,isLE:s}=this;let{pos:o}=this;n[o++]=128,pr(this.buffer.subarray(o)),this.padOffset>r-o&&(this.process(i,0),o=0);for(let d=o;d<r;d++)n[d]=0;sm(i,r-8,BigInt(this.length*8),s),this.process(i,0);const a=ns(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let d=0;d<l;d++)a.setUint32(4*d,u[d],s)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const i=t.slice(0,n);return this.destroy(),i}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:i,length:r,finished:s,destroyed:o,pos:a}=this;return t.destroyed=o,t.finished=s,t.length=r,t.pos=a,r%n&&t.buffer.set(i),t}clone(){return this._cloneInto()}}const wn=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),cm=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),yn=new Uint32Array(64);class um extends lm{constructor(t=32){super(64,t,8,!1),this.A=wn[0]|0,this.B=wn[1]|0,this.C=wn[2]|0,this.D=wn[3]|0,this.E=wn[4]|0,this.F=wn[5]|0,this.G=wn[6]|0,this.H=wn[7]|0}get(){const{A:t,B:n,C:i,D:r,E:s,F:o,G:a,H:c}=this;return[t,n,i,r,s,o,a,c]}set(t,n,i,r,s,o,a,c){this.A=t|0,this.B=n|0,this.C=i|0,this.D=r|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=c|0}process(t,n){for(let d=0;d<16;d++,n+=4)yn[d]=t.getUint32(n,!1);for(let d=16;d<64;d++){const f=yn[d-15],h=yn[d-2],p=Ut(f,7)^Ut(f,18)^f>>>3,b=Ut(h,17)^Ut(h,19)^h>>>10;yn[d]=b+yn[d-7]+p+yn[d-16]|0}let{A:i,B:r,C:s,D:o,E:a,F:c,G:l,H:u}=this;for(let d=0;d<64;d++){const f=Ut(a,6)^Ut(a,11)^Ut(a,25),h=u+f+om(a,c,l)+cm[d]+yn[d]|0,b=(Ut(i,2)^Ut(i,13)^Ut(i,22))+am(i,r,s)|0;u=l,l=c,c=a,a=o+h|0,o=s,s=r,r=i,i=h+b|0}i=i+this.A|0,r=r+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(i,r,s,o,a,c,l,u)}roundClean(){pr(yn)}destroy(){this.set(0,0,0,0,0,0,0,0),pr(this.buffer)}}const fm=tm(()=>new um),dm=fm;class qo extends Error{constructor(t){super(t),this.name="InvalidLinkError"}}class Nf extends Error{constructor(t){super(t),this.name="ExpiredLinkError"}}class Ff extends Error{constructor(t){super(t),this.name="PasswordRequiredError"}}class hm extends Error{constructor(t){super(t),this.name="DecryptionError"}}class pm extends Error{constructor(t="Payload too large for simple mode. Please use Cloud Mode instead."){super(t),this.name="PayloadTooLargeError"}}const Nn=globalThis.crypto;function qe(e){let t="";const n=new Uint8Array(e);for(const i of n)t+=String.fromCharCode(i);return btoa(t)}function Ze(e){const t=atob(e),n=t.length,i=new Uint8Array(n);for(let r=0;r<n;r++)i[r]=t.charCodeAt(r);return i.buffer}function Hf(e=16){return Nn.getRandomValues(new Uint8Array(e))}async function zf(){return Nn.subtle.generateKey({name:"AES-GCM",length:128},!0,["encrypt","decrypt"])}async function Ns(e,t){if(!e||!t)throw new Error("Password and salt are required for KEK generation.");const n=rm(dm,e,t,{c:1e5,dkLen:32});return Nn.subtle.importKey("raw",n,{name:"AES-GCM"},!0,["encrypt","decrypt"])}async function Uf(e){const t=await Nn.subtle.exportKey("raw",e);return qe(t)}async function Bf(e){const t=Ze(e);return Nn.subtle.importKey("raw",t,{name:"AES-GCM"},!0,["encrypt","decrypt"])}async function Gn(e,t,n){const i=Nn.getRandomValues(new Uint8Array(12)),r={name:"AES-GCM",iv:i};return n&&(r.additionalData=n),{ciphertext:await Nn.subtle.encrypt(r,e,t),iv:i}}async function jn(e,{ciphertext:t,iv:n,additionalData:i}){try{const r={name:"AES-GCM",iv:n};return i&&(r.additionalData=i),await Nn.subtle.decrypt(r,e,t)}catch{throw new hm("Failed to decrypt data. The key may be incorrect or the data may be corrupted.")}}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const gm=4,Jl=0,Ql=1,mm=2;function Di(e){let t=e.length;for(;--t>=0;)e[t]=0}const _m=0,Vf=1,bm=2,vm=3,wm=258,La=29,$r=256,gr=$r+1+La,ki=30,Ra=19,Gf=2*gr+1,qn=15,fo=16,ym=7,$a=256,jf=16,qf=17,Zf=18,Zo=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),is=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),xm=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Wf=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),km=512,ln=new Array((gr+2)*2);Di(ln);const ir=new Array(ki*2);Di(ir);const mr=new Array(km);Di(mr);const _r=new Array(wm-vm+1);Di(_r);const Oa=new Array(La);Di(Oa);const bs=new Array(ki);Di(bs);function ho(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}let Kf,Yf,Xf;function po(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const Jf=e=>e<256?mr[e]:mr[256+(e>>>7)],br=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},pt=(e,t,n)=>{e.bi_valid>fo-n?(e.bi_buf|=t<<e.bi_valid&65535,br(e,e.bi_buf),e.bi_buf=t>>fo-e.bi_valid,e.bi_valid+=n-fo):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},Zt=(e,t,n)=>{pt(e,n[t*2],n[t*2+1])},Qf=(e,t)=>{let n=0;do n|=e&1,e>>>=1,n<<=1;while(--t>0);return n>>>1},Sm=e=>{e.bi_valid===16?(br(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},Em=(e,t)=>{const n=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,a=t.stat_desc.extra_base,c=t.stat_desc.max_length;let l,u,d,f,h,p,b=0;for(f=0;f<=qn;f++)e.bl_count[f]=0;for(n[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<Gf;l++)u=e.heap[l],f=n[n[u*2+1]*2+1]+1,f>c&&(f=c,b++),n[u*2+1]=f,!(u>i)&&(e.bl_count[f]++,h=0,u>=a&&(h=o[u-a]),p=n[u*2],e.opt_len+=p*(f+h),s&&(e.static_len+=p*(r[u*2+1]+h)));if(b!==0){do{for(f=c-1;e.bl_count[f]===0;)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[c]--,b-=2}while(b>0);for(f=c;f!==0;f--)for(u=e.bl_count[f];u!==0;)d=e.heap[--l],!(d>i)&&(n[d*2+1]!==f&&(e.opt_len+=(f-n[d*2+1])*n[d*2],n[d*2+1]=f),u--)}},ed=(e,t,n)=>{const i=new Array(qn+1);let r=0,s,o;for(s=1;s<=qn;s++)r=r+n[s-1]<<1,i[s]=r;for(o=0;o<=t;o++){let a=e[o*2+1];a!==0&&(e[o*2]=Qf(i[a]++,a))}},Tm=()=>{let e,t,n,i,r;const s=new Array(qn+1);for(n=0,i=0;i<La-1;i++)for(Oa[i]=n,e=0;e<1<<Zo[i];e++)_r[n++]=i;for(_r[n-1]=i,r=0,i=0;i<16;i++)for(bs[i]=r,e=0;e<1<<is[i];e++)mr[r++]=i;for(r>>=7;i<ki;i++)for(bs[i]=r<<7,e=0;e<1<<is[i]-7;e++)mr[256+r++]=i;for(t=0;t<=qn;t++)s[t]=0;for(e=0;e<=143;)ln[e*2+1]=8,e++,s[8]++;for(;e<=255;)ln[e*2+1]=9,e++,s[9]++;for(;e<=279;)ln[e*2+1]=7,e++,s[7]++;for(;e<=287;)ln[e*2+1]=8,e++,s[8]++;for(ed(ln,gr+1,s),e=0;e<ki;e++)ir[e*2+1]=5,ir[e*2]=Qf(e,5);Kf=new ho(ln,Zo,$r+1,gr,qn),Yf=new ho(ir,is,0,ki,qn),Xf=new ho(new Array(0),xm,0,Ra,ym)},td=e=>{let t;for(t=0;t<gr;t++)e.dyn_ltree[t*2]=0;for(t=0;t<ki;t++)e.dyn_dtree[t*2]=0;for(t=0;t<Ra;t++)e.bl_tree[t*2]=0;e.dyn_ltree[$a*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},nd=e=>{e.bi_valid>8?br(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},ec=(e,t,n,i)=>{const r=t*2,s=n*2;return e[r]<e[s]||e[r]===e[s]&&i[t]<=i[n]},go=(e,t,n)=>{const i=e.heap[n];let r=n<<1;for(;r<=e.heap_len&&(r<e.heap_len&&ec(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!ec(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i},tc=(e,t,n)=>{let i,r,s=0,o,a;if(e.sym_next!==0)do i=e.pending_buf[e.sym_buf+s++]&255,i+=(e.pending_buf[e.sym_buf+s++]&255)<<8,r=e.pending_buf[e.sym_buf+s++],i===0?Zt(e,r,t):(o=_r[r],Zt(e,o+$r+1,t),a=Zo[o],a!==0&&(r-=Oa[o],pt(e,r,a)),i--,o=Jf(i),Zt(e,o,n),a=is[o],a!==0&&(i-=bs[o],pt(e,i,a)));while(s<e.sym_next);Zt(e,$a,t)},Wo=(e,t)=>{const n=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,a,c=-1,l;for(e.heap_len=0,e.heap_max=Gf,o=0;o<s;o++)n[o*2]!==0?(e.heap[++e.heap_len]=c=o,e.depth[o]=0):n[o*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=c<2?++c:0,n[l*2]=1,e.depth[l]=0,e.opt_len--,r&&(e.static_len-=i[l*2+1]);for(t.max_code=c,o=e.heap_len>>1;o>=1;o--)go(e,n,o);l=s;do o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],go(e,n,1),a=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=a,n[l*2]=n[o*2]+n[a*2],e.depth[l]=(e.depth[o]>=e.depth[a]?e.depth[o]:e.depth[a])+1,n[o*2+1]=n[a*2+1]=l,e.heap[1]=l++,go(e,n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Em(e,t),ed(n,c,e.bl_count)},nc=(e,t,n)=>{let i,r=-1,s,o=t[0*2+1],a=0,c=7,l=4;for(o===0&&(c=138,l=3),t[(n+1)*2+1]=65535,i=0;i<=n;i++)s=o,o=t[(i+1)*2+1],!(++a<c&&s===o)&&(a<l?e.bl_tree[s*2]+=a:s!==0?(s!==r&&e.bl_tree[s*2]++,e.bl_tree[jf*2]++):a<=10?e.bl_tree[qf*2]++:e.bl_tree[Zf*2]++,a=0,r=s,o===0?(c=138,l=3):s===o?(c=6,l=3):(c=7,l=4))},ic=(e,t,n)=>{let i,r=-1,s,o=t[0*2+1],a=0,c=7,l=4;for(o===0&&(c=138,l=3),i=0;i<=n;i++)if(s=o,o=t[(i+1)*2+1],!(++a<c&&s===o)){if(a<l)do Zt(e,s,e.bl_tree);while(--a!==0);else s!==0?(s!==r&&(Zt(e,s,e.bl_tree),a--),Zt(e,jf,e.bl_tree),pt(e,a-3,2)):a<=10?(Zt(e,qf,e.bl_tree),pt(e,a-3,3)):(Zt(e,Zf,e.bl_tree),pt(e,a-11,7));a=0,r=s,o===0?(c=138,l=3):s===o?(c=6,l=3):(c=7,l=4)}},Am=e=>{let t;for(nc(e,e.dyn_ltree,e.l_desc.max_code),nc(e,e.dyn_dtree,e.d_desc.max_code),Wo(e,e.bl_desc),t=Ra-1;t>=3&&e.bl_tree[Wf[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},Cm=(e,t,n,i)=>{let r;for(pt(e,t-257,5),pt(e,n-1,5),pt(e,i-4,4),r=0;r<i;r++)pt(e,e.bl_tree[Wf[r]*2+1],3);ic(e,e.dyn_ltree,t-1),ic(e,e.dyn_dtree,n-1)},Im=e=>{let t=4093624447,n;for(n=0;n<=31;n++,t>>>=1)if(t&1&&e.dyn_ltree[n*2]!==0)return Jl;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Ql;for(n=32;n<$r;n++)if(e.dyn_ltree[n*2]!==0)return Ql;return Jl};let rc=!1;const Dm=e=>{rc||(Tm(),rc=!0),e.l_desc=new po(e.dyn_ltree,Kf),e.d_desc=new po(e.dyn_dtree,Yf),e.bl_desc=new po(e.bl_tree,Xf),e.bi_buf=0,e.bi_valid=0,td(e)},id=(e,t,n,i)=>{pt(e,(_m<<1)+(i?1:0),3),nd(e),br(e,n),br(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n},Lm=e=>{pt(e,Vf<<1,3),Zt(e,$a,ln),Sm(e)},Rm=(e,t,n,i)=>{let r,s,o=0;e.level>0?(e.strm.data_type===mm&&(e.strm.data_type=Im(e)),Wo(e,e.l_desc),Wo(e,e.d_desc),o=Am(e),r=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=r&&(r=s)):r=s=n+5,n+4<=r&&t!==-1?id(e,t,n,i):e.strategy===gm||s===r?(pt(e,(Vf<<1)+(i?1:0),3),tc(e,ln,ir)):(pt(e,(bm<<1)+(i?1:0),3),Cm(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),tc(e,e.dyn_ltree,e.dyn_dtree)),td(e),i&&nd(e)},$m=(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,t===0?e.dyn_ltree[n*2]++:(e.matches++,t--,e.dyn_ltree[(_r[n]+$r+1)*2]++,e.dyn_dtree[Jf(t)*2]++),e.sym_next===e.sym_end);var Om=Dm,Pm=id,Mm=Rm,Nm=$m,Fm=Lm,Hm={_tr_init:Om,_tr_stored_block:Pm,_tr_flush_block:Mm,_tr_tally:Nm,_tr_align:Fm};const zm=(e,t,n,i)=>{let r=e&65535|0,s=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do r=r+t[i++]|0,s=s+r|0;while(--o);r%=65521,s%=65521}return r|s<<16|0};var vr=zm;const Um=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},Bm=new Uint32Array(Um()),Vm=(e,t,n,i)=>{const r=Bm,s=i+n;e^=-1;for(let o=i;o<s;o++)e=e>>>8^r[(e^t[o])&255];return e^-1};var Be=Vm,ti={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Fs={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Gm,_tr_stored_block:Ko,_tr_flush_block:jm,_tr_tally:Ln,_tr_align:qm}=Hm,{Z_NO_FLUSH:Rn,Z_PARTIAL_FLUSH:Zm,Z_FULL_FLUSH:Wm,Z_FINISH:Tt,Z_BLOCK:sc,Z_OK:Ge,Z_STREAM_END:oc,Z_STREAM_ERROR:Jt,Z_DATA_ERROR:Km,Z_BUF_ERROR:mo,Z_DEFAULT_COMPRESSION:Ym,Z_FILTERED:Xm,Z_HUFFMAN_ONLY:Vr,Z_RLE:Jm,Z_FIXED:Qm,Z_DEFAULT_STRATEGY:e_,Z_UNKNOWN:t_,Z_DEFLATED:Hs}=Fs,n_=9,i_=15,r_=8,s_=29,o_=256,Yo=o_+1+s_,a_=30,l_=19,c_=2*Yo+1,u_=15,ce=3,Cn=258,Qt=Cn+ce+1,f_=32,Ai=42,Pa=57,Xo=69,Jo=73,Qo=91,ea=103,Zn=113,Zi=666,ot=1,Li=2,ni=3,Ri=4,d_=3,Wn=(e,t)=>(e.msg=ti[t],t),ac=e=>e*2-(e>4?9:0),An=e=>{let t=e.length;for(;--t>=0;)e[t]=0},h_=e=>{let t,n,i,r=e.w_size;t=e.hash_size,i=t;do n=e.head[--i],e.head[i]=n>=r?n-r:0;while(--t);t=r,i=t;do n=e.prev[--i],e.prev[i]=n>=r?n-r:0;while(--t)};let p_=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,$n=p_;const vt=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),n!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,t.pending===0&&(t.pending_out=0))},yt=(e,t)=>{jm(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,vt(e.strm)},ge=(e,t)=>{e.pending_buf[e.pending++]=t},Fi=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},ta=(e,t,n,i)=>{let r=e.avail_in;return r>i&&(r=i),r===0?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),e.state.wrap===1?e.adler=vr(e.adler,t,r,n):e.state.wrap===2&&(e.adler=Be(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},rd=(e,t)=>{let n=e.max_chain_length,i=e.strstart,r,s,o=e.prev_length,a=e.nice_match;const c=e.strstart>e.w_size-Qt?e.strstart-(e.w_size-Qt):0,l=e.window,u=e.w_mask,d=e.prev,f=e.strstart+Cn;let h=l[i+o-1],p=l[i+o];e.prev_length>=e.good_match&&(n>>=2),a>e.lookahead&&(a=e.lookahead);do if(r=t,!(l[r+o]!==p||l[r+o-1]!==h||l[r]!==l[i]||l[++r]!==l[i+1])){i+=2,r++;do;while(l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&i<f);if(s=Cn-(f-i),i=f-Cn,s>o){if(e.match_start=t,o=s,s>=a)break;h=l[i+o-1],p=l[i+o]}}while((t=d[t&u])>c&&--n!==0);return o<=e.lookahead?o:e.lookahead},Ci=e=>{const t=e.w_size;let n,i,r;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Qt)&&(e.window.set(e.window.subarray(t,t+t-i),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),h_(e),i+=t),e.strm.avail_in===0)break;if(n=ta(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=ce)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=$n(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=$n(e,e.ins_h,e.window[r+ce-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<ce)););}while(e.lookahead<Qt&&e.strm.avail_in!==0)},sd=(e,t)=>{let n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,i,r,s,o=0,a=e.strm.avail_in;do{if(i=65535,s=e.bi_valid+42>>3,e.strm.avail_out<s||(s=e.strm.avail_out-s,r=e.strstart-e.block_start,i>r+e.strm.avail_in&&(i=r+e.strm.avail_in),i>s&&(i=s),i<n&&(i===0&&t!==Tt||t===Rn||i!==r+e.strm.avail_in)))break;o=t===Tt&&i===r+e.strm.avail_in?1:0,Ko(e,0,0,o),e.pending_buf[e.pending-4]=i,e.pending_buf[e.pending-3]=i>>8,e.pending_buf[e.pending-2]=~i,e.pending_buf[e.pending-1]=~i>>8,vt(e.strm),r&&(r>i&&(r=i),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,i-=r),i&&(ta(e.strm,e.strm.output,e.strm.next_out,i),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i)}while(o===0);return a-=e.strm.avail_in,a&&(a>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=a&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-a,e.strm.next_in),e.strstart),e.strstart+=a,e.insert+=a>e.w_size-e.insert?e.w_size-e.insert:a),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?Ri:t!==Rn&&t!==Tt&&e.strm.avail_in===0&&e.strstart===e.block_start?Li:(s=e.window_size-e.strstart,e.strm.avail_in>s&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,s+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),s>e.strm.avail_in&&(s=e.strm.avail_in),s&&(ta(e.strm,e.window,e.strstart,s),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.high_water<e.strstart&&(e.high_water=e.strstart),s=e.bi_valid+42>>3,s=e.pending_buf_size-s>65535?65535:e.pending_buf_size-s,n=s>e.w_size?e.w_size:s,r=e.strstart-e.block_start,(r>=n||(r||t===Tt)&&t!==Rn&&e.strm.avail_in===0&&r<=s)&&(i=r>s?s:r,o=t===Tt&&e.strm.avail_in===0&&i===r?1:0,Ko(e,e.block_start,i,o),e.block_start+=i,vt(e.strm)),o?ni:ot)},_o=(e,t)=>{let n,i;for(;;){if(e.lookahead<Qt){if(Ci(e),e.lookahead<Qt&&t===Rn)return ot;if(e.lookahead===0)break}if(n=0,e.lookahead>=ce&&(e.ins_h=$n(e,e.ins_h,e.window[e.strstart+ce-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),n!==0&&e.strstart-n<=e.w_size-Qt&&(e.match_length=rd(e,n)),e.match_length>=ce)if(i=Ln(e,e.strstart-e.match_start,e.match_length-ce),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=ce){e.match_length--;do e.strstart++,e.ins_h=$n(e,e.ins_h,e.window[e.strstart+ce-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=$n(e,e.ins_h,e.window[e.strstart+1]);else i=Ln(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(yt(e,!1),e.strm.avail_out===0))return ot}return e.insert=e.strstart<ce-1?e.strstart:ce-1,t===Tt?(yt(e,!0),e.strm.avail_out===0?ni:Ri):e.sym_next&&(yt(e,!1),e.strm.avail_out===0)?ot:Li},mi=(e,t)=>{let n,i,r;for(;;){if(e.lookahead<Qt){if(Ci(e),e.lookahead<Qt&&t===Rn)return ot;if(e.lookahead===0)break}if(n=0,e.lookahead>=ce&&(e.ins_h=$n(e,e.ins_h,e.window[e.strstart+ce-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=ce-1,n!==0&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-Qt&&(e.match_length=rd(e,n),e.match_length<=5&&(e.strategy===Xm||e.match_length===ce&&e.strstart-e.match_start>4096)&&(e.match_length=ce-1)),e.prev_length>=ce&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-ce,i=Ln(e,e.strstart-1-e.prev_match,e.prev_length-ce),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=r&&(e.ins_h=$n(e,e.ins_h,e.window[e.strstart+ce-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=ce-1,e.strstart++,i&&(yt(e,!1),e.strm.avail_out===0))return ot}else if(e.match_available){if(i=Ln(e,0,e.window[e.strstart-1]),i&&yt(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return ot}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=Ln(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<ce-1?e.strstart:ce-1,t===Tt?(yt(e,!0),e.strm.avail_out===0?ni:Ri):e.sym_next&&(yt(e,!1),e.strm.avail_out===0)?ot:Li},g_=(e,t)=>{let n,i,r,s;const o=e.window;for(;;){if(e.lookahead<=Cn){if(Ci(e),e.lookahead<=Cn&&t===Rn)return ot;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=ce&&e.strstart>0&&(r=e.strstart-1,i=o[r],i===o[++r]&&i===o[++r]&&i===o[++r])){s=e.strstart+Cn;do;while(i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&r<s);e.match_length=Cn-(s-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=ce?(n=Ln(e,1,e.match_length-ce),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Ln(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(yt(e,!1),e.strm.avail_out===0))return ot}return e.insert=0,t===Tt?(yt(e,!0),e.strm.avail_out===0?ni:Ri):e.sym_next&&(yt(e,!1),e.strm.avail_out===0)?ot:Li},m_=(e,t)=>{let n;for(;;){if(e.lookahead===0&&(Ci(e),e.lookahead===0)){if(t===Rn)return ot;break}if(e.match_length=0,n=Ln(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(yt(e,!1),e.strm.avail_out===0))return ot}return e.insert=0,t===Tt?(yt(e,!0),e.strm.avail_out===0?ni:Ri):e.sym_next&&(yt(e,!1),e.strm.avail_out===0)?ot:Li};function Bt(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}const Wi=[new Bt(0,0,0,0,sd),new Bt(4,4,8,4,_o),new Bt(4,5,16,8,_o),new Bt(4,6,32,32,_o),new Bt(4,4,16,16,mi),new Bt(8,16,32,32,mi),new Bt(8,16,128,128,mi),new Bt(8,32,128,256,mi),new Bt(32,128,258,1024,mi),new Bt(32,258,258,4096,mi)],__=e=>{e.window_size=2*e.w_size,An(e.head),e.max_lazy_match=Wi[e.level].max_lazy,e.good_match=Wi[e.level].good_length,e.nice_match=Wi[e.level].nice_length,e.max_chain_length=Wi[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=ce-1,e.match_available=0,e.ins_h=0};function b_(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Hs,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(c_*2),this.dyn_dtree=new Uint16Array((2*a_+1)*2),this.bl_tree=new Uint16Array((2*l_+1)*2),An(this.dyn_ltree),An(this.dyn_dtree),An(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(u_+1),this.heap=new Uint16Array(2*Yo+1),An(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Yo+1),An(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Or=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==Ai&&t.status!==Pa&&t.status!==Xo&&t.status!==Jo&&t.status!==Qo&&t.status!==ea&&t.status!==Zn&&t.status!==Zi?1:0},od=e=>{if(Or(e))return Wn(e,Jt);e.total_in=e.total_out=0,e.data_type=t_;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?Pa:t.wrap?Ai:Zn,e.adler=t.wrap===2?0:1,t.last_flush=-2,Gm(t),Ge},ad=e=>{const t=od(e);return t===Ge&&__(e.state),t},v_=(e,t)=>Or(e)||e.state.wrap!==2?Jt:(e.state.gzhead=t,Ge),ld=(e,t,n,i,r,s)=>{if(!e)return Jt;let o=1;if(t===Ym&&(t=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),r<1||r>n_||n!==Hs||i<8||i>15||t<0||t>9||s<0||s>Qm||i===8&&o!==1)return Wn(e,Jt);i===8&&(i=9);const a=new b_;return e.state=a,a.strm=e,a.status=Ai,a.wrap=o,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+ce-1)/ce),a.window=new Uint8Array(a.w_size*2),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=a.lit_bufsize*4,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=(a.lit_bufsize-1)*3,a.level=t,a.strategy=s,a.method=n,ad(e)},w_=(e,t)=>ld(e,t,Hs,i_,r_,e_),y_=(e,t)=>{if(Or(e)||t>sc||t<0)return e?Wn(e,Jt):Jt;const n=e.state;if(!e.output||e.avail_in!==0&&!e.input||n.status===Zi&&t!==Tt)return Wn(e,e.avail_out===0?mo:Jt);const i=n.last_flush;if(n.last_flush=t,n.pending!==0){if(vt(e),e.avail_out===0)return n.last_flush=-1,Ge}else if(e.avail_in===0&&ac(t)<=ac(i)&&t!==Tt)return Wn(e,mo);if(n.status===Zi&&e.avail_in!==0)return Wn(e,mo);if(n.status===Ai&&n.wrap===0&&(n.status=Zn),n.status===Ai){let r=Hs+(n.w_bits-8<<4)<<8,s=-1;if(n.strategy>=Vr||n.level<2?s=0:n.level<6?s=1:n.level===6?s=2:s=3,r|=s<<6,n.strstart!==0&&(r|=f_),r+=31-r%31,Fi(n,r),n.strstart!==0&&(Fi(n,e.adler>>>16),Fi(n,e.adler&65535)),e.adler=1,n.status=Zn,vt(e),n.pending!==0)return n.last_flush=-1,Ge}if(n.status===Pa){if(e.adler=0,ge(n,31),ge(n,139),ge(n,8),n.gzhead)ge(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),ge(n,n.gzhead.time&255),ge(n,n.gzhead.time>>8&255),ge(n,n.gzhead.time>>16&255),ge(n,n.gzhead.time>>24&255),ge(n,n.level===9?2:n.strategy>=Vr||n.level<2?4:0),ge(n,n.gzhead.os&255),n.gzhead.extra&&n.gzhead.extra.length&&(ge(n,n.gzhead.extra.length&255),ge(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=Be(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=Xo;else if(ge(n,0),ge(n,0),ge(n,0),ge(n,0),ge(n,0),ge(n,n.level===9?2:n.strategy>=Vr||n.level<2?4:0),ge(n,d_),n.status=Zn,vt(e),n.pending!==0)return n.last_flush=-1,Ge}if(n.status===Xo){if(n.gzhead.extra){let r=n.pending,s=(n.gzhead.extra.length&65535)-n.gzindex;for(;n.pending+s>n.pending_buf_size;){let a=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+a),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>r&&(e.adler=Be(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex+=a,vt(e),n.pending!==0)return n.last_flush=-1,Ge;r=0,s-=a}let o=new Uint8Array(n.gzhead.extra);n.pending_buf.set(o.subarray(n.gzindex,n.gzindex+s),n.pending),n.pending+=s,n.gzhead.hcrc&&n.pending>r&&(e.adler=Be(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=Jo}if(n.status===Jo){if(n.gzhead.name){let r=n.pending,s;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=Be(e.adler,n.pending_buf,n.pending-r,r)),vt(e),n.pending!==0)return n.last_flush=-1,Ge;r=0}n.gzindex<n.gzhead.name.length?s=n.gzhead.name.charCodeAt(n.gzindex++)&255:s=0,ge(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>r&&(e.adler=Be(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=Qo}if(n.status===Qo){if(n.gzhead.comment){let r=n.pending,s;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=Be(e.adler,n.pending_buf,n.pending-r,r)),vt(e),n.pending!==0)return n.last_flush=-1,Ge;r=0}n.gzindex<n.gzhead.comment.length?s=n.gzhead.comment.charCodeAt(n.gzindex++)&255:s=0,ge(n,s)}while(s!==0);n.gzhead.hcrc&&n.pending>r&&(e.adler=Be(e.adler,n.pending_buf,n.pending-r,r))}n.status=ea}if(n.status===ea){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(vt(e),n.pending!==0))return n.last_flush=-1,Ge;ge(n,e.adler&255),ge(n,e.adler>>8&255),e.adler=0}if(n.status=Zn,vt(e),n.pending!==0)return n.last_flush=-1,Ge}if(e.avail_in!==0||n.lookahead!==0||t!==Rn&&n.status!==Zi){let r=n.level===0?sd(n,t):n.strategy===Vr?m_(n,t):n.strategy===Jm?g_(n,t):Wi[n.level].func(n,t);if((r===ni||r===Ri)&&(n.status=Zi),r===ot||r===ni)return e.avail_out===0&&(n.last_flush=-1),Ge;if(r===Li&&(t===Zm?qm(n):t!==sc&&(Ko(n,0,0,!1),t===Wm&&(An(n.head),n.lookahead===0&&(n.strstart=0,n.block_start=0,n.insert=0))),vt(e),e.avail_out===0))return n.last_flush=-1,Ge}return t!==Tt?Ge:n.wrap<=0?oc:(n.wrap===2?(ge(n,e.adler&255),ge(n,e.adler>>8&255),ge(n,e.adler>>16&255),ge(n,e.adler>>24&255),ge(n,e.total_in&255),ge(n,e.total_in>>8&255),ge(n,e.total_in>>16&255),ge(n,e.total_in>>24&255)):(Fi(n,e.adler>>>16),Fi(n,e.adler&65535)),vt(e),n.wrap>0&&(n.wrap=-n.wrap),n.pending!==0?Ge:oc)},x_=e=>{if(Or(e))return Jt;const t=e.state.status;return e.state=null,t===Zn?Wn(e,Km):Ge},k_=(e,t)=>{let n=t.length;if(Or(e))return Jt;const i=e.state,r=i.wrap;if(r===2||r===1&&i.status!==Ai||i.lookahead)return Jt;if(r===1&&(e.adler=vr(e.adler,t,n,0)),i.wrap=0,n>=i.w_size){r===0&&(An(i.head),i.strstart=0,i.block_start=0,i.insert=0);let c=new Uint8Array(i.w_size);c.set(t.subarray(n-i.w_size,n),0),t=c,n=i.w_size}const s=e.avail_in,o=e.next_in,a=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Ci(i);i.lookahead>=ce;){let c=i.strstart,l=i.lookahead-(ce-1);do i.ins_h=$n(i,i.ins_h,i.window[c+ce-1]),i.prev[c&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=c,c++;while(--l);i.strstart=c,i.lookahead=ce-1,Ci(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=ce-1,i.match_available=0,e.next_in=o,e.input=a,e.avail_in=s,i.wrap=r,Ge};var S_=w_,E_=ld,T_=ad,A_=od,C_=v_,I_=y_,D_=x_,L_=k_,R_="pako deflate (from Nodeca project)",rr={deflateInit:S_,deflateInit2:E_,deflateReset:T_,deflateResetKeep:A_,deflateSetHeader:C_,deflate:I_,deflateEnd:D_,deflateSetDictionary:L_,deflateInfo:R_};const $_=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var O_=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const i in n)$_(n,i)&&(e[i]=n[i])}}return e},P_=e=>{let t=0;for(let i=0,r=e.length;i<r;i++)t+=e[i].length;const n=new Uint8Array(t);for(let i=0,r=0,s=e.length;i<s;i++){let o=e[i];n.set(o,r),r+=o.length}return n},zs={assign:O_,flattenChunks:P_};let cd=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{cd=!1}const wr=new Uint8Array(256);for(let e=0;e<256;e++)wr[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;wr[254]=wr[254]=1;var M_=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,i,r,s,o=e.length,a=0;for(r=0;r<o;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<o&&(i=e.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(a),s=0,r=0;s<a;r++)n=e.charCodeAt(r),(n&64512)===55296&&r+1<o&&(i=e.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?t[s++]=n:n<2048?(t[s++]=192|n>>>6,t[s++]=128|n&63):n<65536?(t[s++]=224|n>>>12,t[s++]=128|n>>>6&63,t[s++]=128|n&63):(t[s++]=240|n>>>18,t[s++]=128|n>>>12&63,t[s++]=128|n>>>6&63,t[s++]=128|n&63);return t};const N_=(e,t)=>{if(t<65534&&e.subarray&&cd)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n};var F_=(e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let i,r;const s=new Array(n*2);for(r=0,i=0;i<n;){let o=e[i++];if(o<128){s[r++]=o;continue}let a=wr[o];if(a>4){s[r++]=65533,i+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&i<n;)o=o<<6|e[i++]&63,a--;if(a>1){s[r++]=65533;continue}o<65536?s[r++]=o:(o-=65536,s[r++]=55296|o>>10&1023,s[r++]=56320|o&1023)}return N_(s,r)},H_=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+wr[e[n]]>t?n:t},yr={string2buf:M_,buf2string:F_,utf8border:H_};function z_(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var ud=z_;const fd=Object.prototype.toString,{Z_NO_FLUSH:U_,Z_SYNC_FLUSH:B_,Z_FULL_FLUSH:V_,Z_FINISH:G_,Z_OK:vs,Z_STREAM_END:j_,Z_DEFAULT_COMPRESSION:q_,Z_DEFAULT_STRATEGY:Z_,Z_DEFLATED:W_}=Fs;function Us(e){this.options=zs.assign({level:q_,method:W_,chunkSize:16384,windowBits:15,memLevel:8,strategy:Z_},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ud,this.strm.avail_out=0;let n=rr.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==vs)throw new Error(ti[n]);if(t.header&&rr.deflateSetHeader(this.strm,t.header),t.dictionary){let i;if(typeof t.dictionary=="string"?i=yr.string2buf(t.dictionary):fd.call(t.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(t.dictionary):i=t.dictionary,n=rr.deflateSetDictionary(this.strm,i),n!==vs)throw new Error(ti[n]);this._dict_set=!0}}Us.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize;let r,s;if(this.ended)return!1;for(t===~~t?s=t:s=t===!0?G_:U_,typeof e=="string"?n.input=yr.string2buf(e):fd.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){if(n.avail_out===0&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(s===B_||s===V_)&&n.avail_out<=6){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(r=rr.deflate(n,s),r===j_)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=rr.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===vs;if(n.avail_out===0){this.onData(n.output);continue}if(s>0&&n.next_out>0){this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;continue}if(n.avail_in===0)break}return!0};Us.prototype.onData=function(e){this.chunks.push(e)};Us.prototype.onEnd=function(e){e===vs&&(this.result=zs.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function K_(e,t){const n=new Us(t);if(n.push(e,!0),n.err)throw n.msg||ti[n.err];return n.result}function Y_(e,t){return t=t||{},t.gzip=!0,K_(e,t)}var X_=Y_,J_={gzip:X_};const Gr=16209,Q_=16191;var eb=function(t,n){let i,r,s,o,a,c,l,u,d,f,h,p,b,E,x,C,k,v,T,j,L,F,A,R;const P=t.state;i=t.next_in,A=t.input,r=i+(t.avail_in-5),s=t.next_out,R=t.output,o=s-(n-t.avail_out),a=s+(t.avail_out-257),c=P.dmax,l=P.wsize,u=P.whave,d=P.wnext,f=P.window,h=P.hold,p=P.bits,b=P.lencode,E=P.distcode,x=(1<<P.lenbits)-1,C=(1<<P.distbits)-1;e:do{p<15&&(h+=A[i++]<<p,p+=8,h+=A[i++]<<p,p+=8),k=b[h&x];t:for(;;){if(v=k>>>24,h>>>=v,p-=v,v=k>>>16&255,v===0)R[s++]=k&65535;else if(v&16){T=k&65535,v&=15,v&&(p<v&&(h+=A[i++]<<p,p+=8),T+=h&(1<<v)-1,h>>>=v,p-=v),p<15&&(h+=A[i++]<<p,p+=8,h+=A[i++]<<p,p+=8),k=E[h&C];n:for(;;){if(v=k>>>24,h>>>=v,p-=v,v=k>>>16&255,v&16){if(j=k&65535,v&=15,p<v&&(h+=A[i++]<<p,p+=8,p<v&&(h+=A[i++]<<p,p+=8)),j+=h&(1<<v)-1,j>c){t.msg="invalid distance too far back",P.mode=Gr;break e}if(h>>>=v,p-=v,v=s-o,j>v){if(v=j-v,v>u&&P.sane){t.msg="invalid distance too far back",P.mode=Gr;break e}if(L=0,F=f,d===0){if(L+=l-v,v<T){T-=v;do R[s++]=f[L++];while(--v);L=s-j,F=R}}else if(d<v){if(L+=l+d-v,v-=d,v<T){T-=v;do R[s++]=f[L++];while(--v);if(L=0,d<T){v=d,T-=v;do R[s++]=f[L++];while(--v);L=s-j,F=R}}}else if(L+=d-v,v<T){T-=v;do R[s++]=f[L++];while(--v);L=s-j,F=R}for(;T>2;)R[s++]=F[L++],R[s++]=F[L++],R[s++]=F[L++],T-=3;T&&(R[s++]=F[L++],T>1&&(R[s++]=F[L++]))}else{L=s-j;do R[s++]=R[L++],R[s++]=R[L++],R[s++]=R[L++],T-=3;while(T>2);T&&(R[s++]=R[L++],T>1&&(R[s++]=R[L++]))}}else if((v&64)===0){k=E[(k&65535)+(h&(1<<v)-1)];continue n}else{t.msg="invalid distance code",P.mode=Gr;break e}break}}else if((v&64)===0){k=b[(k&65535)+(h&(1<<v)-1)];continue t}else if(v&32){P.mode=Q_;break e}else{t.msg="invalid literal/length code",P.mode=Gr;break e}break}}while(i<r&&s<a);T=p>>3,i-=T,p-=T<<3,h&=(1<<p)-1,t.next_in=i,t.next_out=s,t.avail_in=i<r?5+(r-i):5-(i-r),t.avail_out=s<a?257+(a-s):257-(s-a),P.hold=h,P.bits=p};const _i=15,lc=852,cc=592,uc=0,bo=1,fc=2,tb=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),nb=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ib=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),rb=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),sb=(e,t,n,i,r,s,o,a)=>{const c=a.bits;let l=0,u=0,d=0,f=0,h=0,p=0,b=0,E=0,x=0,C=0,k,v,T,j,L,F=null,A;const R=new Uint16Array(_i+1),P=new Uint16Array(_i+1);let N=null,ie,ae,Le;for(l=0;l<=_i;l++)R[l]=0;for(u=0;u<i;u++)R[t[n+u]]++;for(h=c,f=_i;f>=1&&R[f]===0;f--);if(h>f&&(h=f),f===0)return r[s++]=1<<24|64<<16|0,r[s++]=1<<24|64<<16|0,a.bits=1,0;for(d=1;d<f&&R[d]===0;d++);for(h<d&&(h=d),E=1,l=1;l<=_i;l++)if(E<<=1,E-=R[l],E<0)return-1;if(E>0&&(e===uc||f!==1))return-1;for(P[1]=0,l=1;l<_i;l++)P[l+1]=P[l]+R[l];for(u=0;u<i;u++)t[n+u]!==0&&(o[P[t[n+u]]++]=u);if(e===uc?(F=N=o,A=20):e===bo?(F=tb,N=nb,A=257):(F=ib,N=rb,A=0),C=0,u=0,l=d,L=s,p=h,b=0,T=-1,x=1<<h,j=x-1,e===bo&&x>lc||e===fc&&x>cc)return 1;for(;;){ie=l-b,o[u]+1<A?(ae=0,Le=o[u]):o[u]>=A?(ae=N[o[u]-A],Le=F[o[u]-A]):(ae=96,Le=0),k=1<<l-b,v=1<<p,d=v;do v-=k,r[L+(C>>b)+v]=ie<<24|ae<<16|Le|0;while(v!==0);for(k=1<<l-1;C&k;)k>>=1;if(k!==0?(C&=k-1,C+=k):C=0,u++,--R[l]===0){if(l===f)break;l=t[n+o[u]]}if(l>h&&(C&j)!==T){for(b===0&&(b=h),L+=d,p=l-b,E=1<<p;p+b<f&&(E-=R[p+b],!(E<=0));)p++,E<<=1;if(x+=1<<p,e===bo&&x>lc||e===fc&&x>cc)return 1;T=C&j,r[T]=h<<24|p<<16|L-s|0}}return C!==0&&(r[L+C]=l-b<<24|64<<16|0),a.bits=h,0};var sr=sb;const ob=0,dd=1,hd=2,{Z_FINISH:dc,Z_BLOCK:ab,Z_TREES:jr,Z_OK:ii,Z_STREAM_END:lb,Z_NEED_DICT:cb,Z_STREAM_ERROR:Lt,Z_DATA_ERROR:pd,Z_MEM_ERROR:gd,Z_BUF_ERROR:ub,Z_DEFLATED:hc}=Fs,Bs=16180,pc=16181,gc=16182,mc=16183,_c=16184,bc=16185,vc=16186,wc=16187,yc=16188,xc=16189,ws=16190,sn=16191,vo=16192,kc=16193,wo=16194,Sc=16195,Ec=16196,Tc=16197,Ac=16198,qr=16199,Zr=16200,Cc=16201,Ic=16202,Dc=16203,Lc=16204,Rc=16205,yo=16206,$c=16207,Oc=16208,Te=16209,md=16210,_d=16211,fb=852,db=592,hb=15,pb=hb,Pc=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function gb(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const li=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Bs||t.mode>_d?1:0},bd=e=>{if(li(e))return Lt;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=Bs,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(fb),t.distcode=t.distdyn=new Int32Array(db),t.sane=1,t.back=-1,ii},vd=e=>{if(li(e))return Lt;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,bd(e)},wd=(e,t)=>{let n;if(li(e))return Lt;const i=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Lt:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,vd(e))},yd=(e,t)=>{if(!e)return Lt;const n=new gb;e.state=n,n.strm=e,n.window=null,n.mode=Bs;const i=wd(e,t);return i!==ii&&(e.state=null),i},mb=e=>yd(e,pb);let Mc=!0,xo,ko;const _b=e=>{if(Mc){xo=new Int32Array(512),ko=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(sr(dd,e.lens,0,288,xo,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;sr(hd,e.lens,0,32,ko,0,e.work,{bits:5}),Mc=!1}e.lencode=xo,e.lenbits=9,e.distcode=ko,e.distbits=5},xd=(e,t,n,i)=>{let r;const s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),i>=s.wsize?(s.window.set(t.subarray(n-s.wsize,n),0),s.wnext=0,s.whave=s.wsize):(r=s.wsize-s.wnext,r>i&&(r=i),s.window.set(t.subarray(n-i,n-i+r),s.wnext),i-=r,i?(s.window.set(t.subarray(n-i,n),0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0},bb=(e,t)=>{let n,i,r,s,o,a,c,l,u,d,f,h,p,b,E=0,x,C,k,v,T,j,L,F;const A=new Uint8Array(4);let R,P;const N=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(li(e)||!e.output||!e.input&&e.avail_in!==0)return Lt;n=e.state,n.mode===sn&&(n.mode=vo),o=e.next_out,r=e.output,c=e.avail_out,s=e.next_in,i=e.input,a=e.avail_in,l=n.hold,u=n.bits,d=a,f=c,F=ii;e:for(;;)switch(n.mode){case Bs:if(n.wrap===0){n.mode=vo;break}for(;u<16;){if(a===0)break e;a--,l+=i[s++]<<u,u+=8}if(n.wrap&2&&l===35615){n.wbits===0&&(n.wbits=15),n.check=0,A[0]=l&255,A[1]=l>>>8&255,n.check=Be(n.check,A,2,0),l=0,u=0,n.mode=pc;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=Te;break}if((l&15)!==hc){e.msg="unknown compression method",n.mode=Te;break}if(l>>>=4,u-=4,L=(l&15)+8,n.wbits===0&&(n.wbits=L),L>15||L>n.wbits){e.msg="invalid window size",n.mode=Te;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=l&512?xc:sn,l=0,u=0;break;case pc:for(;u<16;){if(a===0)break e;a--,l+=i[s++]<<u,u+=8}if(n.flags=l,(n.flags&255)!==hc){e.msg="unknown compression method",n.mode=Te;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=Te;break}n.head&&(n.head.text=l>>8&1),n.flags&512&&n.wrap&4&&(A[0]=l&255,A[1]=l>>>8&255,n.check=Be(n.check,A,2,0)),l=0,u=0,n.mode=gc;case gc:for(;u<32;){if(a===0)break e;a--,l+=i[s++]<<u,u+=8}n.head&&(n.head.time=l),n.flags&512&&n.wrap&4&&(A[0]=l&255,A[1]=l>>>8&255,A[2]=l>>>16&255,A[3]=l>>>24&255,n.check=Be(n.check,A,4,0)),l=0,u=0,n.mode=mc;case mc:for(;u<16;){if(a===0)break e;a--,l+=i[s++]<<u,u+=8}n.head&&(n.head.xflags=l&255,n.head.os=l>>8),n.flags&512&&n.wrap&4&&(A[0]=l&255,A[1]=l>>>8&255,n.check=Be(n.check,A,2,0)),l=0,u=0,n.mode=_c;case _c:if(n.flags&1024){for(;u<16;){if(a===0)break e;a--,l+=i[s++]<<u,u+=8}n.length=l,n.head&&(n.head.extra_len=l),n.flags&512&&n.wrap&4&&(A[0]=l&255,A[1]=l>>>8&255,n.check=Be(n.check,A,2,0)),l=0,u=0}else n.head&&(n.head.extra=null);n.mode=bc;case bc:if(n.flags&1024&&(h=n.length,h>a&&(h=a),h&&(n.head&&(L=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(s,s+h),L)),n.flags&512&&n.wrap&4&&(n.check=Be(n.check,i,h,s)),a-=h,s+=h,n.length-=h),n.length))break e;n.length=0,n.mode=vc;case vc:if(n.flags&2048){if(a===0)break e;h=0;do L=i[s+h++],n.head&&L&&n.length<65536&&(n.head.name+=String.fromCharCode(L));while(L&&h<a);if(n.flags&512&&n.wrap&4&&(n.check=Be(n.check,i,h,s)),a-=h,s+=h,L)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=wc;case wc:if(n.flags&4096){if(a===0)break e;h=0;do L=i[s+h++],n.head&&L&&n.length<65536&&(n.head.comment+=String.fromCharCode(L));while(L&&h<a);if(n.flags&512&&n.wrap&4&&(n.check=Be(n.check,i,h,s)),a-=h,s+=h,L)break e}else n.head&&(n.head.comment=null);n.mode=yc;case yc:if(n.flags&512){for(;u<16;){if(a===0)break e;a--,l+=i[s++]<<u,u+=8}if(n.wrap&4&&l!==(n.check&65535)){e.msg="header crc mismatch",n.mode=Te;break}l=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=sn;break;case xc:for(;u<32;){if(a===0)break e;a--,l+=i[s++]<<u,u+=8}e.adler=n.check=Pc(l),l=0,u=0,n.mode=ws;case ws:if(n.havedict===0)return e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,n.hold=l,n.bits=u,cb;e.adler=n.check=1,n.mode=sn;case sn:if(t===ab||t===jr)break e;case vo:if(n.last){l>>>=u&7,u-=u&7,n.mode=yo;break}for(;u<3;){if(a===0)break e;a--,l+=i[s++]<<u,u+=8}switch(n.last=l&1,l>>>=1,u-=1,l&3){case 0:n.mode=kc;break;case 1:if(_b(n),n.mode=qr,t===jr){l>>>=2,u-=2;break e}break;case 2:n.mode=Ec;break;case 3:e.msg="invalid block type",n.mode=Te}l>>>=2,u-=2;break;case kc:for(l>>>=u&7,u-=u&7;u<32;){if(a===0)break e;a--,l+=i[s++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Te;break}if(n.length=l&65535,l=0,u=0,n.mode=wo,t===jr)break e;case wo:n.mode=Sc;case Sc:if(h=n.length,h){if(h>a&&(h=a),h>c&&(h=c),h===0)break e;r.set(i.subarray(s,s+h),o),a-=h,s+=h,c-=h,o+=h,n.length-=h;break}n.mode=sn;break;case Ec:for(;u<14;){if(a===0)break e;a--,l+=i[s++]<<u,u+=8}if(n.nlen=(l&31)+257,l>>>=5,u-=5,n.ndist=(l&31)+1,l>>>=5,u-=5,n.ncode=(l&15)+4,l>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Te;break}n.have=0,n.mode=Tc;case Tc:for(;n.have<n.ncode;){for(;u<3;){if(a===0)break e;a--,l+=i[s++]<<u,u+=8}n.lens[N[n.have++]]=l&7,l>>>=3,u-=3}for(;n.have<19;)n.lens[N[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,R={bits:n.lenbits},F=sr(ob,n.lens,0,19,n.lencode,0,n.work,R),n.lenbits=R.bits,F){e.msg="invalid code lengths set",n.mode=Te;break}n.have=0,n.mode=Ac;case Ac:for(;n.have<n.nlen+n.ndist;){for(;E=n.lencode[l&(1<<n.lenbits)-1],x=E>>>24,C=E>>>16&255,k=E&65535,!(x<=u);){if(a===0)break e;a--,l+=i[s++]<<u,u+=8}if(k<16)l>>>=x,u-=x,n.lens[n.have++]=k;else{if(k===16){for(P=x+2;u<P;){if(a===0)break e;a--,l+=i[s++]<<u,u+=8}if(l>>>=x,u-=x,n.have===0){e.msg="invalid bit length repeat",n.mode=Te;break}L=n.lens[n.have-1],h=3+(l&3),l>>>=2,u-=2}else if(k===17){for(P=x+3;u<P;){if(a===0)break e;a--,l+=i[s++]<<u,u+=8}l>>>=x,u-=x,L=0,h=3+(l&7),l>>>=3,u-=3}else{for(P=x+7;u<P;){if(a===0)break e;a--,l+=i[s++]<<u,u+=8}l>>>=x,u-=x,L=0,h=11+(l&127),l>>>=7,u-=7}if(n.have+h>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Te;break}for(;h--;)n.lens[n.have++]=L}}if(n.mode===Te)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=Te;break}if(n.lenbits=9,R={bits:n.lenbits},F=sr(dd,n.lens,0,n.nlen,n.lencode,0,n.work,R),n.lenbits=R.bits,F){e.msg="invalid literal/lengths set",n.mode=Te;break}if(n.distbits=6,n.distcode=n.distdyn,R={bits:n.distbits},F=sr(hd,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,R),n.distbits=R.bits,F){e.msg="invalid distances set",n.mode=Te;break}if(n.mode=qr,t===jr)break e;case qr:n.mode=Zr;case Zr:if(a>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,n.hold=l,n.bits=u,eb(e,f),o=e.next_out,r=e.output,c=e.avail_out,s=e.next_in,i=e.input,a=e.avail_in,l=n.hold,u=n.bits,n.mode===sn&&(n.back=-1);break}for(n.back=0;E=n.lencode[l&(1<<n.lenbits)-1],x=E>>>24,C=E>>>16&255,k=E&65535,!(x<=u);){if(a===0)break e;a--,l+=i[s++]<<u,u+=8}if(C&&(C&240)===0){for(v=x,T=C,j=k;E=n.lencode[j+((l&(1<<v+T)-1)>>v)],x=E>>>24,C=E>>>16&255,k=E&65535,!(v+x<=u);){if(a===0)break e;a--,l+=i[s++]<<u,u+=8}l>>>=v,u-=v,n.back+=v}if(l>>>=x,u-=x,n.back+=x,n.length=k,C===0){n.mode=Rc;break}if(C&32){n.back=-1,n.mode=sn;break}if(C&64){e.msg="invalid literal/length code",n.mode=Te;break}n.extra=C&15,n.mode=Cc;case Cc:if(n.extra){for(P=n.extra;u<P;){if(a===0)break e;a--,l+=i[s++]<<u,u+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=Ic;case Ic:for(;E=n.distcode[l&(1<<n.distbits)-1],x=E>>>24,C=E>>>16&255,k=E&65535,!(x<=u);){if(a===0)break e;a--,l+=i[s++]<<u,u+=8}if((C&240)===0){for(v=x,T=C,j=k;E=n.distcode[j+((l&(1<<v+T)-1)>>v)],x=E>>>24,C=E>>>16&255,k=E&65535,!(v+x<=u);){if(a===0)break e;a--,l+=i[s++]<<u,u+=8}l>>>=v,u-=v,n.back+=v}if(l>>>=x,u-=x,n.back+=x,C&64){e.msg="invalid distance code",n.mode=Te;break}n.offset=k,n.extra=C&15,n.mode=Dc;case Dc:if(n.extra){for(P=n.extra;u<P;){if(a===0)break e;a--,l+=i[s++]<<u,u+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Te;break}n.mode=Lc;case Lc:if(c===0)break e;if(h=f-c,n.offset>h){if(h=n.offset-h,h>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Te;break}h>n.wnext?(h-=n.wnext,p=n.wsize-h):p=n.wnext-h,h>n.length&&(h=n.length),b=n.window}else b=r,p=o-n.offset,h=n.length;h>c&&(h=c),c-=h,n.length-=h;do r[o++]=b[p++];while(--h);n.length===0&&(n.mode=Zr);break;case Rc:if(c===0)break e;r[o++]=n.length,c--,n.mode=Zr;break;case yo:if(n.wrap){for(;u<32;){if(a===0)break e;a--,l|=i[s++]<<u,u+=8}if(f-=c,e.total_out+=f,n.total+=f,n.wrap&4&&f&&(e.adler=n.check=n.flags?Be(n.check,r,f,o-f):vr(n.check,r,f,o-f)),f=c,n.wrap&4&&(n.flags?l:Pc(l))!==n.check){e.msg="incorrect data check",n.mode=Te;break}l=0,u=0}n.mode=$c;case $c:if(n.wrap&&n.flags){for(;u<32;){if(a===0)break e;a--,l+=i[s++]<<u,u+=8}if(n.wrap&4&&l!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=Te;break}l=0,u=0}n.mode=Oc;case Oc:F=lb;break e;case Te:F=pd;break e;case md:return gd;case _d:default:return Lt}return e.next_out=o,e.avail_out=c,e.next_in=s,e.avail_in=a,n.hold=l,n.bits=u,(n.wsize||f!==e.avail_out&&n.mode<Te&&(n.mode<yo||t!==dc))&&xd(e,e.output,e.next_out,f-e.avail_out),d-=e.avail_in,f-=e.avail_out,e.total_in+=d,e.total_out+=f,n.total+=f,n.wrap&4&&f&&(e.adler=n.check=n.flags?Be(n.check,r,f,e.next_out-f):vr(n.check,r,f,e.next_out-f)),e.data_type=n.bits+(n.last?64:0)+(n.mode===sn?128:0)+(n.mode===qr||n.mode===wo?256:0),(d===0&&f===0||t===dc)&&F===ii&&(F=ub),F},vb=e=>{if(li(e))return Lt;let t=e.state;return t.window&&(t.window=null),e.state=null,ii},wb=(e,t)=>{if(li(e))return Lt;const n=e.state;return(n.wrap&2)===0?Lt:(n.head=t,t.done=!1,ii)},yb=(e,t)=>{const n=t.length;let i,r,s;return li(e)||(i=e.state,i.wrap!==0&&i.mode!==ws)?Lt:i.mode===ws&&(r=1,r=vr(r,t,n,0),r!==i.check)?pd:(s=xd(e,t,n,n),s?(i.mode=md,gd):(i.havedict=1,ii))};var xb=vd,kb=wd,Sb=bd,Eb=mb,Tb=yd,Ab=bb,Cb=vb,Ib=wb,Db=yb,Lb="pako inflate (from Nodeca project)",cn={inflateReset:xb,inflateReset2:kb,inflateResetKeep:Sb,inflateInit:Eb,inflateInit2:Tb,inflate:Ab,inflateEnd:Cb,inflateGetHeader:Ib,inflateSetDictionary:Db,inflateInfo:Lb};function Rb(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var $b=Rb;const kd=Object.prototype.toString,{Z_NO_FLUSH:Ob,Z_FINISH:Pb,Z_OK:xr,Z_STREAM_END:So,Z_NEED_DICT:Eo,Z_STREAM_ERROR:Mb,Z_DATA_ERROR:Nc,Z_MEM_ERROR:Nb}=Fs;function Vs(e){this.options=zs.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ud,this.strm.avail_out=0;let n=cn.inflateInit2(this.strm,t.windowBits);if(n!==xr)throw new Error(ti[n]);if(this.header=new $b,cn.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=yr.string2buf(t.dictionary):kd.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=cn.inflateSetDictionary(this.strm,t.dictionary),n!==xr)))throw new Error(ti[n])}Vs.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let s,o,a;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?Pb:Ob,kd.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),s=cn.inflate(n,o),s===Eo&&r&&(s=cn.inflateSetDictionary(n,r),s===xr?s=cn.inflate(n,o):s===Nc&&(s=Eo));n.avail_in>0&&s===So&&n.state.wrap>0&&e[n.next_in]!==0;)cn.inflateReset(n),s=cn.inflate(n,o);switch(s){case Mb:case Nc:case Eo:case Nb:return this.onEnd(s),this.ended=!0,!1}if(a=n.avail_out,n.next_out&&(n.avail_out===0||s===So))if(this.options.to==="string"){let c=yr.utf8border(n.output,n.next_out),l=n.next_out-c,u=yr.buf2string(n.output,c);n.next_out=l,n.avail_out=i-l,l&&n.output.set(n.output.subarray(c,c+l),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(s===xr&&a===0)){if(s===So)return s=cn.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Vs.prototype.onData=function(e){this.chunks.push(e)};Vs.prototype.onEnd=function(e){e===xr&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=zs.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Fb(e,t){const n=new Vs(t);if(n.push(e),n.err)throw n.msg||ti[n.err];return n.result}var Hb=Fb,zb={ungzip:Hb};const{gzip:Ub}=J_,{ungzip:Bb}=zb;var Vb=Ub,Gb=Bb;function jb(e,t){return e==="cloud"||e==="dynamic"?t.get("p")||t.get("epayload")||t.get("data")||"":t.get("data")||t.get("p")||t.get("epayload")||""}function Ma(e){const t=new URLSearchParams(e.hash.substring(1)),n=t.get("k")||t.get("key"),i=t.get("i")||t.get("iv");if(!n||!i)return null;const r=new URLSearchParams(e.search),s={s:"simple",c:"cloud",d:"dynamic",simple:"simple",cloud:"cloud",dynamic:"dynamic"},o=t.get("m")||t.get("mode")||"s",a=s[o]||"simple";return{mode:a,salt:t.get("s")||t.get("salt")||null,expdate:t.get("x")||t.get("expdate")||null,key:n,iv:i,epayload:jb(a,r)}}const qb=7700;async function Zb({data:e,mode:t,uploadHandler:n,shortenUrlHandler:i,password:r,expiresInDays:s,simpleModePayloadLimit:o=qb}){const a=await zf(),c=Number.isFinite(s)?new Date(Date.now()+s*864e5):null,l=c?c.toISOString().slice(0,10):null,u=l?new TextEncoder().encode(l):void 0;let d,f,h;if(t==="simple")d=Vb(new Uint8Array(e)).buffer,{ciphertext:f,iv:h}=await Gn(a,d,u);else{d=e;const j=await Gn(a,d,u),L=await n(j),F=new TextEncoder().encode(L);({ciphertext:f,iv:h}=await Gn(a,F,u))}let p=null,b;if(r){p=Hf();const j=await Ns(r,p),L=await crypto.subtle.exportKey("raw",a),F=await Gn(j,L);b=`${qe(F.ciphertext)}.${qe(F.iv)}`}else b=await Uf(a);const E=new URLSearchParams({i:qe(h),k:b});p&&E.set("s",qe(p)),l&&E.set("x",l);const x={simple:"s",cloud:"c"};E.set("m",x[t]||"s");const C=qe(f);if(t==="simple"&&C.length>o)throw new pm("Payload too large for simple mode. Please use Cloud Mode instead.");const k=typeof location<"u"?location.href.split("#")[0].split("?")[0]:"";return`${await i(`${k}?${t==="simple"?"data":"p"}=${encodeURIComponent(C)}`)}#${E.toString()}`}async function Wb({location:e,downloadHandler:t,passwordPromptHandler:n}){try{const i=Ma(e);if(!i)throw new qo("Not a valid share link.");const{key:r,salt:s,expdate:o,iv:a,mode:c}=i;if(c==="cloud"&&typeof t!="function")throw new Error("downloadHandler is required for cloud mode");const l=new URLSearchParams(e.search);if(!i.epayload)throw new qo(`Invalid ${c} mode link: missing data parameter`);if(o&&new Date>new Date(o+"T23:59:59.999Z"))throw new Nf("This link has expired.");let u;if(s){const x=await n();if(!x)throw new Ff("Password is required but was not provided.");const C=await Ns(x,new Uint8Array(Ze(s))),[k,v]=r.split("."),T=await jn(C,{ciphertext:Ze(k),iv:new Uint8Array(Ze(v))});u=await crypto.subtle.importKey("raw",T,{name:"AES-GCM"},!0,["encrypt","decrypt"])}else u=await Bf(r);const d=o?new TextEncoder().encode(o):void 0,f=Ze(i.epayload);if(c==="simple"){const x=await jn(u,{ciphertext:f,iv:new Uint8Array(Ze(a)),additionalData:d});return Gb(new Uint8Array(x)).buffer}const h=await jn(u,{ciphertext:f,iv:new Uint8Array(Ze(a)),additionalData:d}),p=new TextDecoder().decode(h),b=await t(p);return await jn(u,{ciphertext:b.ciphertext,iv:b.iv,additionalData:d})}finally{if(typeof history<"u"){const i=e.href.split("#")[0].split("?")[0];history.replaceState(null,"",i)}}}async function Kb(e,t,n){if(t){if(!n)throw new Ff("Password is required but was not provided.");const i=await Ns(n,new Uint8Array(Ze(t))),[r,s]=e.split("."),o=await jn(i,{ciphertext:Ze(r),iv:new Uint8Array(Ze(s))});return crypto.subtle.importKey("raw",o,{name:"AES-GCM"},!0,["encrypt","decrypt"])}return Bf(e)}async function Yb({data:e,adapter:t,password:n,expiresInDays:i}){if(!e)throw new Error("Missing required option 'data'");if(!t||typeof t.create!="function")throw new Error("Missing required option 'adapter' with 'create' method");const r=await zf(),s=await Gn(r,e);let o;try{o=await t.create(s)}catch(x){throw new Error(`Storage adapter failed during 'create': ${x.message}`)}const a=new TextEncoder().encode(o);let c;try{c=await t.create(a)}catch(x){throw new Error(`Storage adapter failed during 'create': ${x.message}`)}const{ciphertext:l,iv:u}=await Gn(r,new TextEncoder().encode(c));let d=null,f;if(n){d=Hf();const x=await Ns(n,d),C=await crypto.subtle.exportKey("raw",r),k=await Gn(x,C);f=`${qe(k.ciphertext)}.${qe(k.iv)}`}else f=await Uf(r);const h=new URLSearchParams({i:qe(u),k:f,m:"d"});if(d&&h.set("s",qe(d)),Number.isFinite(i)){const x=new Date(Date.now()+i*864e5).toISOString().slice(0,10);h.set("x",x)}const p=qe(l);return{shareLink:`${typeof location<"u"?location.href.split("#")[0].split("?")[0]:""}?p=${encodeURIComponent(p)}#${h.toString()}`,pointerFileId:c,key:f,salt:d?qe(d):null}}async function Xb({location:e,adapter:t,passwordPromptHandler:n}){if(!e)throw new Error("Missing required option 'location'");if(!t||typeof t.read!="function")throw new Error("Missing required option 'adapter' with 'read' method");if(typeof n!="function")throw new Error("Missing required option 'passwordPromptHandler'");try{const i=Ma(e);if(!i||i.mode!=="dynamic")throw new qo("Not a valid dynamic share link.");const{key:r,salt:s,iv:o,expdate:a}=i;if(a&&new Date>new Date(a+"T23:59:59.999Z"))throw new Nf("This link has expired.");let c=null;s&&(c=await n());const l=await Kb(r,s,c),u=Ze(i.epayload),d=await jn(l,{ciphertext:u,iv:new Uint8Array(Ze(o))}),f=new TextDecoder().decode(d);let h;try{h=await t.read(f)}catch(x){throw new Error(`Storage adapter failed during 'read': ${x.message}`)}const p=new TextDecoder().decode(h);let b;try{b=await t.read(p)}catch(x){throw new Error(`Storage adapter failed during 'read': ${x.message}`)}return await jn(l,b)}finally{if(typeof history<"u"){const i=e.href.split("#")[0].split("?")[0];history.replaceState(null,"",i)}}}class Sd{constructor(t){this.gdm=t}async create(t){const n=this._serializeData(t),i=await this.gdm.saveFile("appDataFolder",`sls_${Date.now()}.json`,n);return i&&i.id?i.id:null}async read(t){const n=await this.gdm.loadFileContent(t);return n?this._deserializeData(n):null}async update(t,n){const i=this._serializeData(n);await this.gdm.saveFile("appDataFolder",`sls_${Date.now()}.json`,i,t)}_serializeData(t){if(t&&t.ciphertext&&t.iv)return JSON.stringify({ciphertext:qe(t.ciphertext),iv:qe(t.iv)});const n=t instanceof Uint8Array?t:new Uint8Array(t);return qe(n.buffer)}_deserializeData(t){try{const n=JSON.parse(t);if(n.ciphertext)return{ciphertext:Ze(n.ciphertext),iv:new Uint8Array(Ze(n.iv))}}catch{}return Ze(t.trim())}}function Jb(e){const t=Ve(),{showToast:n}=ai();function i(c){const l={...t.character};c||delete l.images;const u={character:l,skills:t.skills,specialSkills:t.specialSkills,equipments:t.equipments,histories:t.histories};return new TextEncoder().encode(JSON.stringify(u)).buffer}function r(){const c={...t.character};return delete c.images,JSON.stringify({character:c,skills:t.skills}).length>7e3}async function s(c){const l=JSON.stringify({ciphertext:qe(c.ciphertext),iv:qe(c.iv)});return await e.googleDriveManager.uploadAndShareFile(l,"share.enc","application/json")}async function o(c){const{type:l,includeFull:u,password:d,expiresInDays:f}=c,h=i(u);if(l==="dynamic"){const b=new Sd(e.googleDriveManager),{shareLink:E}=await Yb({data:h,adapter:b,password:d||void 0,expiresInDays:f});return E}return Zb({data:h,mode:u?"cloud":"simple",uploadHandler:s,shortenUrlHandler:async b=>{try{const E=await fetch(`https://tinyurl.com/api-create.php?url=${encodeURIComponent(b)}`);return E.ok?await E.text():(console.error("TinyURL API request failed:",E.status,E.statusText),b)}catch(E){return console.error("Failed to shorten URL with TinyURL:",E),b}},password:d||void 0,expiresInDays:f})}async function a(c){try{await navigator.clipboard.writeText(c),n({type:"success",...q.share.copied(c)})}catch(l){n({type:"error",...q.share.copyFailed(l)})}}return{generateShare:o,copyLink:a,isLongData:r}}const Qb=Cs(()=>At(()=>import("./CharacterHub-CIDC_e6_.js"),__vite__mapDeps([0,1]),import.meta.url)),e0=Cs(()=>At(()=>import("./CharacterHubControls-CM0iiRLs.js"),__vite__mapDeps([2,3]),import.meta.url)),t0=Cs(()=>At(()=>import("./IoModal-UXiDlZt0.js"),__vite__mapDeps([4,5]),import.meta.url)),n0=Cs(()=>At(()=>import("./ShareOptions-B7TLj2XC.js"),__vite__mapDeps([6,7]),import.meta.url));function i0(e){const t=gt(),{showModal:n}=Ms(),{dataManager:i,loadCharacterById:r,saveCharacterToDrive:s,handleSignInClick:o,handleSignOutClick:a,refreshHubList:c,saveNewCharacter:l,saveData:u,handleFileUpload:d,outputToCocofolia:f,printCharacterSheet:h,openPreviewPage:p,promptForDriveFolder:b,copyEditCallback:E}=e;async function x(){await n({component:Qb,title:q.ui.modal.hubTitle,props:{dataManager:i,loadCharacter:r,saveToDrive:s},globalActions:{component:e0,on:{"sign-in":o,"sign-out":a,refresh:c,new:l}},buttons:[]})}async function C(){const v=If()?h:p;await n({component:t0,title:q.ui.modal.io.title,props:{signedIn:t.isSignedIn,saveLocalLabel:q.ui.modal.io.buttons.saveLocal,loadLocalLabel:q.ui.modal.io.buttons.loadLocal,outputLabels:{default:q.outputButton.default,animating:q.outputButton.animating,success:q.outputButton.success},outputTimings:q.outputButton.animationTimings,printLabel:q.ui.modal.io.buttons.print,driveFolderLabel:q.ui.modal.io.buttons.driveFolder},buttons:[],on:{"save-local":u,"load-local":d,"output-cocofolia":f,print:v,"drive-folder":b}})}async function k(){if(t.isViewingShared){typeof E=="function"&&E();return}const{generateShare:v,copyLink:T,isLongData:j}=Jb(i),{showToast:L}=ai(),F=Ia();window.__driveSignIn=o;const A=Tr({label:q.ui.modal.generate,value:"generate",variant:"primary",disabled:!0});function R(ae){A.disabled=!ae}const P=await n({component:n0,props:{signedIn:t.isSignedIn,longData:j()},title:q.ui.modal.shareTitle,buttons:[A,{label:q.ui.modal.cancel,value:"cancel",variant:"secondary"}],on:{"update:canGenerate":R}});if(delete window.__driveSignIn,P.value!=="generate"||!P.component)return;const N=P.component,ie={type:N.type.value,includeFull:N.includeFull.value,password:N.password.value||"",expiresInDays:Number(N.expires.value)||0};try{const ae=await v(ie);await T(ae),F.hideModal()}catch(ae){L({type:"error",title:q.ui.modal.shareFailed,message:ae.message})}}return{openHub:x,openIoModal:C,openShareModal:k}}const xt=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n},r0={class:"password-prompt-modal"},s0={__name:"PasswordPromptModal",setup(e,{expose:t}){const n=Fe("");return t({password:n}),(i,r)=>(H(),G("div",r0,[fe(y("input",{type:"password","onUpdate:modelValue":r[0]||(r[0]=s=>n.value=s),class:"password-prompt-modal__input"},null,512),[[Ce,n.value]])]))}},Fc=xt(s0,[["__scopeId","data-v-e1d2dcf5"]]);function o0(e){const t=Ve(),n=gt(),{showToast:i}=ai(),{showModal:r}=Ms();async function s(){n.setLoading(!0);const o=Ma(window.location);if(!o){n.setLoading(!1);return}try{let a;if(o.mode==="dynamic"){const l=new Sd(e.googleDriveManager);async function u(){const d=await r({component:Fc,title:q.ui.prompts.sharedDataPassword,buttons:[{label:"OK",value:"ok",variant:"primary"},{label:q.ui.modal.cancel,value:"cancel",variant:"secondary"}]});return!d.component||d.value!=="ok"?null:d.component.password.value||null}a=await Xb({location:window.location,adapter:l,passwordPromptHandler:u})}else{async function l(){const u=await r({component:Fc,title:q.ui.prompts.sharedDataPassword,buttons:[{label:"OK",value:"ok",variant:"primary"},{label:q.ui.modal.cancel,value:"cancel",variant:"secondary"}]});return!u.component||u.value!=="ok"?null:u.component.password.value||null}a=await Wb({location:window.location,downloadHandler:async u=>{const d=await e.googleDriveManager.loadFileContent(u);if(!d)throw new Error("no data");const{ciphertext:f,iv:h}=JSON.parse(d);return{ciphertext:Ze(f),iv:new Uint8Array(Ze(h))}},passwordPromptHandler:l})}const c=JSON.parse(new TextDecoder().decode(a));Object.assign(t.character,c.character),t.skills.splice(0,t.skills.length,...c.skills),t.specialSkills.splice(0,t.specialSkills.length,...c.specialSkills),Object.assign(t.equipments,c.equipments),t.histories.splice(0,t.histories.length,...c.histories),n.isViewingShared=!0}catch(a){let c="general";a.name==="InvalidLinkError"?c="invalid":a.name==="ExpiredLinkError"?c="expired":a.name==="PasswordRequiredError"?c="passwordRequired":a.name==="DecryptionError"&&(c="decryptionFailed"),i({type:"error",...q.share.loadError.toast(c)}),console.error("Error loading shared data:",a)}finally{n.setLoading(!1)}}return{initialize:s}}function Gs(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Fn=Gs();function Ed(e){Fn=e}var or={exec:()=>null};function be(e,t=""){let n=typeof e=="string"?e:e.source;const i={replace:(r,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(at.caret,"$1"),n=n.replace(r,o),i},getRegex:()=>new RegExp(n,t)};return i}var at={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:e=>new RegExp(`^( {0,3}${e})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}#`),htmlBeginRegex:e=>new RegExp(`^ {0,${Math.min(3,e-1)}}<(?:[a-z].*>|!--)`,"i")},a0=/^(?:[ \t]*(?:\n|$))+/,l0=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,c0=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Pr=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,u0=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Na=/(?:[*+-]|\d{1,9}[.)])/,Td=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Ad=be(Td).replace(/bull/g,Na).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),f0=be(Td).replace(/bull/g,Na).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),Fa=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,d0=/^[^\n]+/,Ha=/(?!\s*\])(?:\\.|[^\[\]\\])+/,h0=be(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Ha).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),p0=be(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Na).getRegex(),js="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",za=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,g0=be("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",za).replace("tag",js).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Cd=be(Fa).replace("hr",Pr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",js).getRegex(),m0=be(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Cd).getRegex(),Ua={blockquote:m0,code:l0,def:h0,fences:c0,heading:u0,hr:Pr,html:g0,lheading:Ad,list:p0,newline:a0,paragraph:Cd,table:or,text:d0},Hc=be("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Pr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",js).getRegex(),_0={...Ua,lheading:f0,table:Hc,paragraph:be(Fa).replace("hr",Pr).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Hc).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",js).getRegex()},b0={...Ua,html:be(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",za).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:or,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:be(Fa).replace("hr",Pr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ad).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},v0=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,w0=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Id=/^( {2,}|\\)\n(?!\s*$)/,y0=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,qs=/[\p{P}\p{S}]/u,Ba=/[\s\p{P}\p{S}]/u,Dd=/[^\s\p{P}\p{S}]/u,x0=be(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Ba).getRegex(),Ld=/(?!~)[\p{P}\p{S}]/u,k0=/(?!~)[\s\p{P}\p{S}]/u,S0=/(?:[^\s\p{P}\p{S}]|~)/u,E0=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,Rd=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,T0=be(Rd,"u").replace(/punct/g,qs).getRegex(),A0=be(Rd,"u").replace(/punct/g,Ld).getRegex(),$d="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",C0=be($d,"gu").replace(/notPunctSpace/g,Dd).replace(/punctSpace/g,Ba).replace(/punct/g,qs).getRegex(),I0=be($d,"gu").replace(/notPunctSpace/g,S0).replace(/punctSpace/g,k0).replace(/punct/g,Ld).getRegex(),D0=be("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Dd).replace(/punctSpace/g,Ba).replace(/punct/g,qs).getRegex(),L0=be(/\\(punct)/,"gu").replace(/punct/g,qs).getRegex(),R0=be(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),$0=be(za).replace("(?:-->|$)","-->").getRegex(),O0=be("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",$0).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),ys=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,P0=be(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",ys).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Od=be(/^!?\[(label)\]\[(ref)\]/).replace("label",ys).replace("ref",Ha).getRegex(),Pd=be(/^!?\[(ref)\](?:\[\])?/).replace("ref",Ha).getRegex(),M0=be("reflink|nolink(?!\\()","g").replace("reflink",Od).replace("nolink",Pd).getRegex(),Va={_backpedal:or,anyPunctuation:L0,autolink:R0,blockSkip:E0,br:Id,code:w0,del:or,emStrongLDelim:T0,emStrongRDelimAst:C0,emStrongRDelimUnd:D0,escape:v0,link:P0,nolink:Pd,punctuation:x0,reflink:Od,reflinkSearch:M0,tag:O0,text:y0,url:or},N0={...Va,link:be(/^!?\[(label)\]\((.*?)\)/).replace("label",ys).getRegex(),reflink:be(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ys).getRegex()},na={...Va,emStrongRDelimAst:I0,emStrongLDelim:A0,url:be(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},F0={...na,br:be(Id).replace("{2,}","*").getRegex(),text:be(na.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Wr={normal:Ua,gfm:_0,pedantic:b0},Hi={normal:Va,gfm:na,breaks:F0,pedantic:N0},H0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},zc=e=>H0[e];function Gt(e,t){if(t){if(at.escapeTest.test(e))return e.replace(at.escapeReplace,zc)}else if(at.escapeTestNoEncode.test(e))return e.replace(at.escapeReplaceNoEncode,zc);return e}function Uc(e){try{e=encodeURI(e).replace(at.percentDecode,"%")}catch{return null}return e}function Bc(e,t){var s;const n=e.replace(at.findPipe,(o,a,c)=>{let l=!1,u=a;for(;--u>=0&&c[u]==="\\";)l=!l;return l?"|":" |"}),i=n.split(at.splitPipe);let r=0;if(i[0].trim()||i.shift(),i.length>0&&!((s=i.at(-1))!=null&&s.trim())&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;r<i.length;r++)i[r]=i[r].trim().replace(at.slashPipe,"|");return i}function zi(e,t,n){const i=e.length;if(i===0)return"";let r=0;for(;r<i&&e.charAt(i-r-1)===t;)r++;return e.slice(0,i-r)}function z0(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let i=0;i<e.length;i++)if(e[i]==="\\")i++;else if(e[i]===t[0])n++;else if(e[i]===t[1]&&(n--,n<0))return i;return n>0?-2:-1}function Vc(e,t,n,i,r){const s=t.href,o=t.title||null,a=e[1].replace(r.other.outputLinkReplace,"$1");i.state.inLink=!0;const c={type:e[0].charAt(0)==="!"?"image":"link",raw:n,href:s,title:o,text:a,tokens:i.inlineTokens(a)};return i.state.inLink=!1,c}function U0(e,t,n){const i=e.match(n.other.indentCodeCompensation);if(i===null)return t;const r=i[1];return t.split(`
`).map(s=>{const o=s.match(n.other.beginningSpace);if(o===null)return s;const[a]=o;return a.length>=r.length?s.slice(r.length):s}).join(`
`)}var kr=class{constructor(e){ye(this,"options");ye(this,"rules");ye(this,"lexer");this.options=e||Fn}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:zi(n,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const n=t[0],i=U0(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){const i=zi(n,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(n=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:zi(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let n=zi(t[0],`
`).split(`
`),i="",r="";const s=[];for(;n.length>0;){let o=!1;const a=[];let c;for(c=0;c<n.length;c++)if(this.rules.other.blockquoteStart.test(n[c]))a.push(n[c]),o=!0;else if(!o)a.push(n[c]);else break;n=n.slice(c);const l=a.join(`
`),u=l.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${l}`:l,r=r?`${r}
${u}`:u;const d=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,s,!0),this.lexer.state.top=d,n.length===0)break;const f=s.at(-1);if((f==null?void 0:f.type)==="code")break;if((f==null?void 0:f.type)==="blockquote"){const h=f,p=h.raw+`
`+n.join(`
`),b=this.blockquote(p);s[s.length-1]=b,i=i.substring(0,i.length-h.raw.length)+b.raw,r=r.substring(0,r.length-h.text.length)+b.text;break}else if((f==null?void 0:f.type)==="list"){const h=f,p=h.raw+`
`+n.join(`
`),b=this.list(p);s[s.length-1]=b,i=i.substring(0,i.length-f.raw.length)+b.raw,r=r.substring(0,r.length-h.raw.length)+b.raw,n=p.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:s,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const i=n.length>1,r={type:"list",raw:"",ordered:i,start:i?+n.slice(0,-1):"",loose:!1,items:[]};n=i?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=i?n:"[*+-]");const s=this.rules.other.listItemRegex(n);let o=!1;for(;e;){let c=!1,l="",u="";if(!(t=s.exec(e))||this.rules.block.hr.test(e))break;l=t[0],e=e.substring(l.length);let d=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,x=>" ".repeat(3*x.length)),f=e.split(`
`,1)[0],h=!d.trim(),p=0;if(this.options.pedantic?(p=2,u=d.trimStart()):h?p=t[1].length+1:(p=t[2].search(this.rules.other.nonSpaceChar),p=p>4?1:p,u=d.slice(p),p+=t[1].length),h&&this.rules.other.blankLine.test(f)&&(l+=f+`
`,e=e.substring(f.length+1),c=!0),!c){const x=this.rules.other.nextBulletRegex(p),C=this.rules.other.hrRegex(p),k=this.rules.other.fencesBeginRegex(p),v=this.rules.other.headingBeginRegex(p),T=this.rules.other.htmlBeginRegex(p);for(;e;){const j=e.split(`
`,1)[0];let L;if(f=j,this.options.pedantic?(f=f.replace(this.rules.other.listReplaceNesting,"  "),L=f):L=f.replace(this.rules.other.tabCharGlobal,"    "),k.test(f)||v.test(f)||T.test(f)||x.test(f)||C.test(f))break;if(L.search(this.rules.other.nonSpaceChar)>=p||!f.trim())u+=`
`+L.slice(p);else{if(h||d.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||k.test(d)||v.test(d)||C.test(d))break;u+=`
`+f}!h&&!f.trim()&&(h=!0),l+=j+`
`,e=e.substring(j.length+1),d=L.slice(p)}}r.loose||(o?r.loose=!0:this.rules.other.doubleBlankLine.test(l)&&(o=!0));let b=null,E;this.options.gfm&&(b=this.rules.other.listIsTask.exec(u),b&&(E=b[0]!=="[ ] ",u=u.replace(this.rules.other.listReplaceTask,""))),r.items.push({type:"list_item",raw:l,task:!!b,checked:E,loose:!1,text:u,tokens:[]}),r.raw+=l}const a=r.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let c=0;c<r.items.length;c++)if(this.lexer.state.top=!1,r.items[c].tokens=this.lexer.blockTokens(r.items[c].text,[]),!r.loose){const l=r.items[c].tokens.filter(d=>d.type==="space"),u=l.length>0&&l.some(d=>this.rules.other.anyLine.test(d.raw));r.loose=u}if(r.loose)for(let c=0;c<r.items.length;c++)r.items[c].loose=!0;return r}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:i,title:r}}}table(e){var o;const t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;const n=Bc(t[1]),i=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=(o=t[3])!=null&&o.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===i.length){for(const a of i)this.rules.other.tableAlignRight.test(a)?s.align.push("right"):this.rules.other.tableAlignCenter.test(a)?s.align.push("center"):this.rules.other.tableAlignLeft.test(a)?s.align.push("left"):s.align.push(null);for(let a=0;a<n.length;a++)s.header.push({text:n[a],tokens:this.lexer.inline(n[a]),header:!0,align:s.align[a]});for(const a of r)s.rows.push(Bc(a,s.header.length).map((c,l)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:s.align[l]})));return s}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;const s=zi(n.slice(0,-1),"\\");if((n.length-s.length)%2===0)return}else{const s=z0(t[2],"()");if(s===-2)return;if(s>-1){const a=(t[0].indexOf("!")===0?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let i=t[2],r="";if(this.options.pedantic){const s=this.rules.other.pedanticHrefTitle.exec(i);s&&(i=s[1],r=s[3])}else r=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?i=i.slice(1):i=i.slice(1,-1)),Vc(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const i=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=t[i.toLowerCase()];if(!r){const s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return Vc(n,r,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(i[1]||i[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const s=[...i[0]].length-1;let o,a,c=s,l=0;const u=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+s);(i=u.exec(t))!=null;){if(o=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!o)continue;if(a=[...o].length,i[3]||i[4]){c+=a;continue}else if((i[5]||i[6])&&s%3&&!((s+a)%3)){l+=a;continue}if(c-=a,c>0)continue;a=Math.min(a,a+c+l);const d=[...i[0]][0].length,f=e.slice(0,s+i.index+d+a);if(Math.min(s,a)%2){const p=f.slice(1,-1);return{type:"em",raw:f,text:p,tokens:this.lexer.inlineTokens(p)}}const h=f.slice(2,-2);return{type:"strong",raw:f,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," ");const i=this.rules.other.nonSpaceChar.test(n),r=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return i&&r&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let n,i;return t[2]==="@"?(n=t[1],i="mailto:"+n):(n=t[1],i=n),{type:"link",raw:t[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}url(e){var n;let t;if(t=this.rules.inline.url.exec(e)){let i,r;if(t[2]==="@")i=t[0],r="mailto:"+i;else{let s;do s=t[0],t[0]=((n=this.rules.inline._backpedal.exec(t[0]))==null?void 0:n[0])??"";while(s!==t[0]);i=t[0],t[1]==="www."?r="http://"+t[0]:r=t[0]}return{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}},Wt=class ia{constructor(t){ye(this,"tokens");ye(this,"options");ye(this,"state");ye(this,"tokenizer");ye(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Fn,this.options.tokenizer=this.options.tokenizer||new kr,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:at,block:Wr.normal,inline:Hi.normal};this.options.pedantic?(n.block=Wr.pedantic,n.inline=Hi.pedantic):this.options.gfm&&(n.block=Wr.gfm,this.options.breaks?n.inline=Hi.breaks:n.inline=Hi.gfm),this.tokenizer.rules=n}static get rules(){return{block:Wr,inline:Hi}}static lex(t,n){return new ia(n).lex(t)}static lexInline(t,n){return new ia(n).inlineTokens(t)}lex(t){t=t.replace(at.carriageReturn,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const i=this.inlineQueue[n];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[],i=!1){var r,s,o;for(this.options.pedantic&&(t=t.replace(at.tabCharGlobal,"    ").replace(at.spaceLine,""));t;){let a;if((s=(r=this.options.extensions)==null?void 0:r.block)!=null&&s.some(l=>(a=l.call({lexer:this},t,n))?(t=t.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.space(t)){t=t.substring(a.raw.length);const l=n.at(-1);a.raw.length===1&&l!==void 0?l.raw+=`
`:n.push(a);continue}if(a=this.tokenizer.code(t)){t=t.substring(a.raw.length);const l=n.at(-1);(l==null?void 0:l.type)==="paragraph"||(l==null?void 0:l.type)==="text"?(l.raw+=`
`+a.raw,l.text+=`
`+a.text,this.inlineQueue.at(-1).src=l.text):n.push(a);continue}if(a=this.tokenizer.fences(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(t)){t=t.substring(a.raw.length);const l=n.at(-1);(l==null?void 0:l.type)==="paragraph"||(l==null?void 0:l.type)==="text"?(l.raw+=`
`+a.raw,l.text+=`
`+a.raw,this.inlineQueue.at(-1).src=l.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(t)){t=t.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(t)){t=t.substring(a.raw.length),n.push(a);continue}let c=t;if((o=this.options.extensions)!=null&&o.startBlock){let l=1/0;const u=t.slice(1);let d;this.options.extensions.startBlock.forEach(f=>{d=f.call({lexer:this},u),typeof d=="number"&&d>=0&&(l=Math.min(l,d))}),l<1/0&&l>=0&&(c=t.substring(0,l+1))}if(this.state.top&&(a=this.tokenizer.paragraph(c))){const l=n.at(-1);i&&(l==null?void 0:l.type)==="paragraph"?(l.raw+=`
`+a.raw,l.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):n.push(a),i=c.length!==t.length,t=t.substring(a.raw.length);continue}if(a=this.tokenizer.text(t)){t=t.substring(a.raw.length);const l=n.at(-1);(l==null?void 0:l.type)==="text"?(l.raw+=`
`+a.raw,l.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):n.push(a);continue}if(t){const l="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){var a,c,l;let i=t,r=null;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(r=this.tokenizer.rules.inline.reflinkSearch.exec(i))!=null;)u.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(r=this.tokenizer.rules.inline.anyPunctuation.exec(i))!=null;)i=i.slice(0,r.index)+"++"+i.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(r=this.tokenizer.rules.inline.blockSkip.exec(i))!=null;)i=i.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+i.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let s=!1,o="";for(;t;){s||(o=""),s=!1;let u;if((c=(a=this.options.extensions)==null?void 0:a.inline)!=null&&c.some(f=>(u=f.call({lexer:this},t,n))?(t=t.substring(u.raw.length),n.push(u),!0):!1))continue;if(u=this.tokenizer.escape(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.tag(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.link(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(u.raw.length);const f=n.at(-1);u.type==="text"&&(f==null?void 0:f.type)==="text"?(f.raw+=u.raw,f.text+=u.text):n.push(u);continue}if(u=this.tokenizer.emStrong(t,i,o)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.codespan(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.br(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.del(t)){t=t.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.autolink(t)){t=t.substring(u.raw.length),n.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(t))){t=t.substring(u.raw.length),n.push(u);continue}let d=t;if((l=this.options.extensions)!=null&&l.startInline){let f=1/0;const h=t.slice(1);let p;this.options.extensions.startInline.forEach(b=>{p=b.call({lexer:this},h),typeof p=="number"&&p>=0&&(f=Math.min(f,p))}),f<1/0&&f>=0&&(d=t.substring(0,f+1))}if(u=this.tokenizer.inlineText(d)){t=t.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(o=u.raw.slice(-1)),s=!0;const f=n.at(-1);(f==null?void 0:f.type)==="text"?(f.raw+=u.raw,f.text+=u.text):n.push(u);continue}if(t){const f="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return n}},Sr=class{constructor(e){ye(this,"options");ye(this,"parser");this.options=e||Fn}space(e){return""}code({text:e,lang:t,escaped:n}){var s;const i=(s=(t||"").match(at.notSpaceStart))==null?void 0:s[0],r=e.replace(at.endingNewline,"")+`
`;return i?'<pre><code class="language-'+Gt(i)+'">'+(n?r:Gt(r,!0))+`</code></pre>
`:"<pre><code>"+(n?r:Gt(r,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,n=e.start;let i="";for(let o=0;o<e.items.length;o++){const a=e.items[o];i+=this.listitem(a)}const r=t?"ol":"ul",s=t&&n!==1?' start="'+n+'"':"";return"<"+r+s+`>
`+i+"</"+r+`>
`}listitem(e){var n;let t="";if(e.task){const i=this.checkbox({checked:!!e.checked});e.loose?((n=e.tokens[0])==null?void 0:n.type)==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+Gt(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):t+=i+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let r=0;r<e.header.length;r++)n+=this.tablecell(e.header[r]);t+=this.tablerow({text:n});let i="";for(let r=0;r<e.rows.length;r++){const s=e.rows[r];n="";for(let o=0;o<s.length;o++)n+=this.tablecell(s[o]);i+=this.tablerow({text:n})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Gt(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){const i=this.parser.parseInline(n),r=Uc(e);if(r===null)return i;e=r;let s='<a href="'+e+'"';return t&&(s+=' title="'+Gt(t)+'"'),s+=">"+i+"</a>",s}image({href:e,title:t,text:n,tokens:i}){i&&(n=this.parser.parseInline(i,this.parser.textRenderer));const r=Uc(e);if(r===null)return Gt(n);e=r;let s=`<img src="${e}" alt="${n}"`;return t&&(s+=` title="${Gt(t)}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Gt(e.text)}},Zs=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},Kt=class ra{constructor(t){ye(this,"options");ye(this,"renderer");ye(this,"textRenderer");this.options=t||Fn,this.options.renderer=this.options.renderer||new Sr,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Zs}static parse(t,n){return new ra(n).parse(t)}static parseInline(t,n){return new ra(n).parseInline(t)}parse(t,n=!0){var r,s;let i="";for(let o=0;o<t.length;o++){const a=t[o];if((s=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&s[a.type]){const l=a,u=this.options.extensions.renderers[l.type].call({parser:this},l);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(l.type)){i+=u||"";continue}}const c=a;switch(c.type){case"space":{i+=this.renderer.space(c);continue}case"hr":{i+=this.renderer.hr(c);continue}case"heading":{i+=this.renderer.heading(c);continue}case"code":{i+=this.renderer.code(c);continue}case"table":{i+=this.renderer.table(c);continue}case"blockquote":{i+=this.renderer.blockquote(c);continue}case"list":{i+=this.renderer.list(c);continue}case"html":{i+=this.renderer.html(c);continue}case"paragraph":{i+=this.renderer.paragraph(c);continue}case"text":{let l=c,u=this.renderer.text(l);for(;o+1<t.length&&t[o+1].type==="text";)l=t[++o],u+=`
`+this.renderer.text(l);n?i+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):i+=u;continue}default:{const l='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return i}parseInline(t,n=this.renderer){var r,s;let i="";for(let o=0;o<t.length;o++){const a=t[o];if((s=(r=this.options.extensions)==null?void 0:r.renderers)!=null&&s[a.type]){const l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){i+=l||"";continue}}const c=a;switch(c.type){case"escape":{i+=n.text(c);break}case"html":{i+=n.html(c);break}case"link":{i+=n.link(c);break}case"image":{i+=n.image(c);break}case"strong":{i+=n.strong(c);break}case"em":{i+=n.em(c);break}case"codespan":{i+=n.codespan(c);break}case"br":{i+=n.br(c);break}case"del":{i+=n.del(c);break}case"text":{i+=n.text(c);break}default:{const l='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return i}},Ro,ar=(Ro=class{constructor(e){ye(this,"options");ye(this,"block");this.options=e||Fn}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?Wt.lex:Wt.lexInline}provideParser(){return this.block?Kt.parse:Kt.parseInline}},ye(Ro,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),Ro),Md=class{constructor(...e){ye(this,"defaults",Gs());ye(this,"options",this.setOptions);ye(this,"parse",this.parseMarkdown(!0));ye(this,"parseInline",this.parseMarkdown(!1));ye(this,"Parser",Kt);ye(this,"Renderer",Sr);ye(this,"TextRenderer",Zs);ye(this,"Lexer",Wt);ye(this,"Tokenizer",kr);ye(this,"Hooks",ar);this.use(...e)}walkTokens(e,t){var i,r;let n=[];for(const s of e)switch(n=n.concat(t.call(this,s)),s.type){case"table":{const o=s;for(const a of o.header)n=n.concat(this.walkTokens(a.tokens,t));for(const a of o.rows)for(const c of a)n=n.concat(this.walkTokens(c.tokens,t));break}case"list":{const o=s;n=n.concat(this.walkTokens(o.items,t));break}default:{const o=s;(r=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&r[o.type]?this.defaults.extensions.childTokens[o.type].forEach(a=>{const c=o[a].flat(1/0);n=n.concat(this.walkTokens(c,t))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{const i={...n};if(i.async=this.defaults.async||i.async||!1,n.extensions&&(n.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){const s=t.renderers[r.name];s?t.renderers[r.name]=function(...o){let a=r.renderer.apply(this,o);return a===!1&&(a=s.apply(this,o)),a}:t.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const s=t[r.level];s?s.unshift(r.tokenizer):t[r.level]=[r.tokenizer],r.start&&(r.level==="block"?t.startBlock?t.startBlock.push(r.start):t.startBlock=[r.start]:r.level==="inline"&&(t.startInline?t.startInline.push(r.start):t.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(t.childTokens[r.name]=r.childTokens)}),i.extensions=t),n.renderer){const r=this.defaults.renderer||new Sr(this.defaults);for(const s in n.renderer){if(!(s in r))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;const o=s,a=n.renderer[o],c=r[o];r[o]=(...l)=>{let u=a.apply(r,l);return u===!1&&(u=c.apply(r,l)),u||""}}i.renderer=r}if(n.tokenizer){const r=this.defaults.tokenizer||new kr(this.defaults);for(const s in n.tokenizer){if(!(s in r))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;const o=s,a=n.tokenizer[o],c=r[o];r[o]=(...l)=>{let u=a.apply(r,l);return u===!1&&(u=c.apply(r,l)),u}}i.tokenizer=r}if(n.hooks){const r=this.defaults.hooks||new ar;for(const s in n.hooks){if(!(s in r))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;const o=s,a=n.hooks[o],c=r[o];ar.passThroughHooks.has(s)?r[o]=l=>{if(this.defaults.async)return Promise.resolve(a.call(r,l)).then(d=>c.call(r,d));const u=a.call(r,l);return c.call(r,u)}:r[o]=(...l)=>{let u=a.apply(r,l);return u===!1&&(u=c.apply(r,l)),u}}i.hooks=r}if(n.walkTokens){const r=this.defaults.walkTokens,s=n.walkTokens;i.walkTokens=function(o){let a=[];return a.push(s.call(this,o)),r&&(a=a.concat(r.call(this,o))),a}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Wt.lex(e,t??this.defaults)}parser(e,t){return Kt.parse(e,t??this.defaults)}parseMarkdown(e){return(n,i)=>{const r={...i},s={...this.defaults,...r},o=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&r.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=e);const a=s.hooks?s.hooks.provideLexer():e?Wt.lex:Wt.lexInline,c=s.hooks?s.hooks.provideParser():e?Kt.parse:Kt.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(n):n).then(l=>a(l,s)).then(l=>s.hooks?s.hooks.processAllTokens(l):l).then(l=>s.walkTokens?Promise.all(this.walkTokens(l,s.walkTokens)).then(()=>l):l).then(l=>c(l,s)).then(l=>s.hooks?s.hooks.postprocess(l):l).catch(o);try{s.hooks&&(n=s.hooks.preprocess(n));let l=a(n,s);s.hooks&&(l=s.hooks.processAllTokens(l)),s.walkTokens&&this.walkTokens(l,s.walkTokens);let u=c(l,s);return s.hooks&&(u=s.hooks.postprocess(u)),u}catch(l){return o(l)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+Gt(n.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(n);throw n}}},ri=new Md;function _e(e,t){return ri.parse(e,t)}_e.options=_e.setOptions=function(e){return ri.setOptions(e),_e.defaults=ri.defaults,Ed(_e.defaults),_e};_e.getDefaults=Gs;_e.defaults=Fn;_e.use=function(...e){return ri.use(...e),_e.defaults=ri.defaults,Ed(_e.defaults),_e};_e.walkTokens=function(e,t){return ri.walkTokens(e,t)};_e.parseInline=ri.parseInline;_e.Parser=Kt;_e.parser=Kt.parse;_e.Renderer=Sr;_e.TextRenderer=Zs;_e.Lexer=Wt;_e.lexer=Wt.lex;_e.Tokenizer=kr;_e.Hooks=ar;_e.parse=_e;_e.options;_e.setOptions;_e.use;_e.walkTokens;_e.parseInline;Kt.parse;Wt.lex;const Gc=Object.freeze(Object.defineProperty({__proto__:null,Hooks:ar,Lexer:Wt,Marked:Md,Parser:Kt,Renderer:Sr,TextRenderer:Zs,Tokenizer:kr,get defaults(){return Fn},getDefaults:Gs,marked:_e},Symbol.toStringTag,{value:"Module"}));/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:Nd,setPrototypeOf:jc,isFrozen:B0,getPrototypeOf:V0,getOwnPropertyDescriptor:G0}=Object;let{freeze:lt,seal:Rt,create:Fd}=Object,{apply:sa,construct:oa}=typeof Reflect<"u"&&Reflect;lt||(lt=function(t){return t});Rt||(Rt=function(t){return t});sa||(sa=function(t,n,i){return t.apply(n,i)});oa||(oa=function(t,n){return new t(...n)});const Kr=ct(Array.prototype.forEach),j0=ct(Array.prototype.lastIndexOf),qc=ct(Array.prototype.pop),Ui=ct(Array.prototype.push),q0=ct(Array.prototype.splice),rs=ct(String.prototype.toLowerCase),To=ct(String.prototype.toString),Zc=ct(String.prototype.match),Bi=ct(String.prototype.replace),Z0=ct(String.prototype.indexOf),W0=ct(String.prototype.trim),Ot=ct(Object.prototype.hasOwnProperty),it=ct(RegExp.prototype.test),Vi=K0(TypeError);function ct(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return sa(e,t,i)}}function K0(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return oa(e,n)}}function oe(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rs;jc&&jc(e,null);let i=t.length;for(;i--;){let r=t[i];if(typeof r=="string"){const s=n(r);s!==r&&(B0(t)||(t[i]=s),r=s)}e[r]=!0}return e}function Y0(e){for(let t=0;t<e.length;t++)Ot(e,t)||(e[t]=null);return e}function on(e){const t=Fd(null);for(const[n,i]of Nd(e))Ot(e,n)&&(Array.isArray(i)?t[n]=Y0(i):i&&typeof i=="object"&&i.constructor===Object?t[n]=on(i):t[n]=i);return t}function Gi(e,t){for(;e!==null;){const i=G0(e,t);if(i){if(i.get)return ct(i.get);if(typeof i.value=="function")return ct(i.value)}e=V0(e)}function n(){return null}return n}const Wc=lt(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ao=lt(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Co=lt(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),X0=lt(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Io=lt(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),J0=lt(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Kc=lt(["#text"]),Yc=lt(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Do=lt(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Xc=lt(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Yr=lt(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Q0=Rt(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ev=Rt(/<%[\w\W]*|[\w\W]*%>/gm),tv=Rt(/\$\{[\w\W]*/gm),nv=Rt(/^data-[\-\w.\u00B7-\uFFFF]+$/),iv=Rt(/^aria-[\-\w]+$/),Hd=Rt(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),rv=Rt(/^(?:\w+script|data):/i),sv=Rt(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),zd=Rt(/^html$/i),ov=Rt(/^[a-z][.\w]*(-[.\w]+)+$/i);var Jc=Object.freeze({__proto__:null,ARIA_ATTR:iv,ATTR_WHITESPACE:sv,CUSTOM_ELEMENT:ov,DATA_ATTR:nv,DOCTYPE_NAME:zd,ERB_EXPR:ev,IS_ALLOWED_URI:Hd,IS_SCRIPT_OR_DATA:rv,MUSTACHE_EXPR:Q0,TMPLIT_EXPR:tv});const ji={element:1,text:3,progressingInstruction:7,comment:8,document:9},av=function(){return typeof window>"u"?null:window},lv=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let i=null;const r="data-tt-policy-suffix";n&&n.hasAttribute(r)&&(i=n.getAttribute(r));const s="dompurify"+(i?"#"+i:"");try{return t.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},Qc=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Ud(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:av();const t=K=>Ud(K);if(t.version="3.2.6",t.removed=[],!e||!e.document||e.document.nodeType!==ji.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e;const i=n,r=i.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:c,NodeFilter:l,NamedNodeMap:u=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:d,DOMParser:f,trustedTypes:h}=e,p=c.prototype,b=Gi(p,"cloneNode"),E=Gi(p,"remove"),x=Gi(p,"nextSibling"),C=Gi(p,"childNodes"),k=Gi(p,"parentNode");if(typeof o=="function"){const K=n.createElement("template");K.content&&K.content.ownerDocument&&(n=K.content.ownerDocument)}let v,T="";const{implementation:j,createNodeIterator:L,createDocumentFragment:F,getElementsByTagName:A}=n,{importNode:R}=i;let P=Qc();t.isSupported=typeof Nd=="function"&&typeof k=="function"&&j&&j.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:N,ERB_EXPR:ie,TMPLIT_EXPR:ae,DATA_ATTR:Le,ARIA_ATTR:we,IS_SCRIPT_OR_DATA:ne,ATTR_WHITESPACE:re,CUSTOM_ELEMENT:ut}=Jc;let{IS_ALLOWED_URI:en}=Jc,le=null;const mt=oe({},[...Wc,...Ao,...Co,...Io,...Kc]);let Re=null;const Mr=oe({},[...Yc,...Do,...Xc,...Yr]);let Ae=Object.seal(Fd(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),$t=null,_n=null,ci=!0,ui=!0,bn=!1,Ws=!0,g=!1,m=!0,S=!1,$=!1,I=!1,D=!1,B=!1,z=!1,U=!0,O=!1;const X="user-content-";let V=!0,Z=!1,J={},te=null;const ve=oe({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let de=null;const Ke=oe({},["audio","video","img","source","image","track"]);let ze=null;const _t=oe({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),nt="http://www.w3.org/1998/Math/MathML",Ft="http://www.w3.org/2000/svg",kt="http://www.w3.org/1999/xhtml";let $e=kt,ft=!1,fi=null;const Gd=oe({},[nt,Ft,kt],To);let Nr=oe({},["mi","mo","mn","ms","mtext"]),Fr=oe({},["annotation-xml"]);const jd=oe({},["title","style","font","a","script"]);let $i=null;const qd=["application/xhtml+xml","text/html"],Zd="text/html";let Ue=null,di=null;const Wd=n.createElement("form"),Ga=function(_){return _ instanceof RegExp||_ instanceof Function},Ks=function(){let _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(di&&di===_)){if((!_||typeof _!="object")&&(_={}),_=on(_),$i=qd.indexOf(_.PARSER_MEDIA_TYPE)===-1?Zd:_.PARSER_MEDIA_TYPE,Ue=$i==="application/xhtml+xml"?To:rs,le=Ot(_,"ALLOWED_TAGS")?oe({},_.ALLOWED_TAGS,Ue):mt,Re=Ot(_,"ALLOWED_ATTR")?oe({},_.ALLOWED_ATTR,Ue):Mr,fi=Ot(_,"ALLOWED_NAMESPACES")?oe({},_.ALLOWED_NAMESPACES,To):Gd,ze=Ot(_,"ADD_URI_SAFE_ATTR")?oe(on(_t),_.ADD_URI_SAFE_ATTR,Ue):_t,de=Ot(_,"ADD_DATA_URI_TAGS")?oe(on(Ke),_.ADD_DATA_URI_TAGS,Ue):Ke,te=Ot(_,"FORBID_CONTENTS")?oe({},_.FORBID_CONTENTS,Ue):ve,$t=Ot(_,"FORBID_TAGS")?oe({},_.FORBID_TAGS,Ue):on({}),_n=Ot(_,"FORBID_ATTR")?oe({},_.FORBID_ATTR,Ue):on({}),J=Ot(_,"USE_PROFILES")?_.USE_PROFILES:!1,ci=_.ALLOW_ARIA_ATTR!==!1,ui=_.ALLOW_DATA_ATTR!==!1,bn=_.ALLOW_UNKNOWN_PROTOCOLS||!1,Ws=_.ALLOW_SELF_CLOSE_IN_ATTR!==!1,g=_.SAFE_FOR_TEMPLATES||!1,m=_.SAFE_FOR_XML!==!1,S=_.WHOLE_DOCUMENT||!1,D=_.RETURN_DOM||!1,B=_.RETURN_DOM_FRAGMENT||!1,z=_.RETURN_TRUSTED_TYPE||!1,I=_.FORCE_BODY||!1,U=_.SANITIZE_DOM!==!1,O=_.SANITIZE_NAMED_PROPS||!1,V=_.KEEP_CONTENT!==!1,Z=_.IN_PLACE||!1,en=_.ALLOWED_URI_REGEXP||Hd,$e=_.NAMESPACE||kt,Nr=_.MATHML_TEXT_INTEGRATION_POINTS||Nr,Fr=_.HTML_INTEGRATION_POINTS||Fr,Ae=_.CUSTOM_ELEMENT_HANDLING||{},_.CUSTOM_ELEMENT_HANDLING&&Ga(_.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ae.tagNameCheck=_.CUSTOM_ELEMENT_HANDLING.tagNameCheck),_.CUSTOM_ELEMENT_HANDLING&&Ga(_.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ae.attributeNameCheck=_.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),_.CUSTOM_ELEMENT_HANDLING&&typeof _.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ae.allowCustomizedBuiltInElements=_.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),g&&(ui=!1),B&&(D=!0),J&&(le=oe({},Kc),Re=[],J.html===!0&&(oe(le,Wc),oe(Re,Yc)),J.svg===!0&&(oe(le,Ao),oe(Re,Do),oe(Re,Yr)),J.svgFilters===!0&&(oe(le,Co),oe(Re,Do),oe(Re,Yr)),J.mathMl===!0&&(oe(le,Io),oe(Re,Xc),oe(Re,Yr))),_.ADD_TAGS&&(le===mt&&(le=on(le)),oe(le,_.ADD_TAGS,Ue)),_.ADD_ATTR&&(Re===Mr&&(Re=on(Re)),oe(Re,_.ADD_ATTR,Ue)),_.ADD_URI_SAFE_ATTR&&oe(ze,_.ADD_URI_SAFE_ATTR,Ue),_.FORBID_CONTENTS&&(te===ve&&(te=on(te)),oe(te,_.FORBID_CONTENTS,Ue)),V&&(le["#text"]=!0),S&&oe(le,["html","head","body"]),le.table&&(oe(le,["tbody"]),delete $t.tbody),_.TRUSTED_TYPES_POLICY){if(typeof _.TRUSTED_TYPES_POLICY.createHTML!="function")throw Vi('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof _.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Vi('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');v=_.TRUSTED_TYPES_POLICY,T=v.createHTML("")}else v===void 0&&(v=lv(h,r)),v!==null&&typeof T=="string"&&(T=v.createHTML(""));lt&&lt(_),di=_}},ja=oe({},[...Ao,...Co,...X0]),qa=oe({},[...Io,...J0]),Kd=function(_){let M=k(_);(!M||!M.tagName)&&(M={namespaceURI:$e,tagName:"template"});const W=rs(_.tagName),Ee=rs(M.tagName);return fi[_.namespaceURI]?_.namespaceURI===Ft?M.namespaceURI===kt?W==="svg":M.namespaceURI===nt?W==="svg"&&(Ee==="annotation-xml"||Nr[Ee]):!!ja[W]:_.namespaceURI===nt?M.namespaceURI===kt?W==="math":M.namespaceURI===Ft?W==="math"&&Fr[Ee]:!!qa[W]:_.namespaceURI===kt?M.namespaceURI===Ft&&!Fr[Ee]||M.namespaceURI===nt&&!Nr[Ee]?!1:!qa[W]&&(jd[W]||!ja[W]):!!($i==="application/xhtml+xml"&&fi[_.namespaceURI]):!1},Ht=function(_){Ui(t.removed,{element:_});try{k(_).removeChild(_)}catch{E(_)}},hi=function(_,M){try{Ui(t.removed,{attribute:M.getAttributeNode(_),from:M})}catch{Ui(t.removed,{attribute:null,from:M})}if(M.removeAttribute(_),_==="is")if(D||B)try{Ht(M)}catch{}else try{M.setAttribute(_,"")}catch{}},Za=function(_){let M=null,W=null;if(I)_="<remove></remove>"+_;else{const Pe=Zc(_,/^[\r\n\t ]+/);W=Pe&&Pe[0]}$i==="application/xhtml+xml"&&$e===kt&&(_='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+_+"</body></html>");const Ee=v?v.createHTML(_):_;if($e===kt)try{M=new f().parseFromString(Ee,$i)}catch{}if(!M||!M.documentElement){M=j.createDocument($e,"template",null);try{M.documentElement.innerHTML=ft?T:Ee}catch{}}const Ye=M.body||M.documentElement;return _&&W&&Ye.insertBefore(n.createTextNode(W),Ye.childNodes[0]||null),$e===kt?A.call(M,S?"html":"body")[0]:S?M.documentElement:Ye},Wa=function(_){return L.call(_.ownerDocument||_,_,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT|l.SHOW_PROCESSING_INSTRUCTION|l.SHOW_CDATA_SECTION,null)},Ys=function(_){return _ instanceof d&&(typeof _.nodeName!="string"||typeof _.textContent!="string"||typeof _.removeChild!="function"||!(_.attributes instanceof u)||typeof _.removeAttribute!="function"||typeof _.setAttribute!="function"||typeof _.namespaceURI!="string"||typeof _.insertBefore!="function"||typeof _.hasChildNodes!="function")},Ka=function(_){return typeof a=="function"&&_ instanceof a};function tn(K,_,M){Kr(K,W=>{W.call(t,_,M,di)})}const Ya=function(_){let M=null;if(tn(P.beforeSanitizeElements,_,null),Ys(_))return Ht(_),!0;const W=Ue(_.nodeName);if(tn(P.uponSanitizeElement,_,{tagName:W,allowedTags:le}),m&&_.hasChildNodes()&&!Ka(_.firstElementChild)&&it(/<[/\w!]/g,_.innerHTML)&&it(/<[/\w!]/g,_.textContent)||_.nodeType===ji.progressingInstruction||m&&_.nodeType===ji.comment&&it(/<[/\w]/g,_.data))return Ht(_),!0;if(!le[W]||$t[W]){if(!$t[W]&&Ja(W)&&(Ae.tagNameCheck instanceof RegExp&&it(Ae.tagNameCheck,W)||Ae.tagNameCheck instanceof Function&&Ae.tagNameCheck(W)))return!1;if(V&&!te[W]){const Ee=k(_)||_.parentNode,Ye=C(_)||_.childNodes;if(Ye&&Ee){const Pe=Ye.length;for(let dt=Pe-1;dt>=0;--dt){const nn=b(Ye[dt],!0);nn.__removalCount=(_.__removalCount||0)+1,Ee.insertBefore(nn,x(_))}}}return Ht(_),!0}return _ instanceof c&&!Kd(_)||(W==="noscript"||W==="noembed"||W==="noframes")&&it(/<\/no(script|embed|frames)/i,_.innerHTML)?(Ht(_),!0):(g&&_.nodeType===ji.text&&(M=_.textContent,Kr([N,ie,ae],Ee=>{M=Bi(M,Ee," ")}),_.textContent!==M&&(Ui(t.removed,{element:_.cloneNode()}),_.textContent=M)),tn(P.afterSanitizeElements,_,null),!1)},Xa=function(_,M,W){if(U&&(M==="id"||M==="name")&&(W in n||W in Wd))return!1;if(!(ui&&!_n[M]&&it(Le,M))){if(!(ci&&it(we,M))){if(!Re[M]||_n[M]){if(!(Ja(_)&&(Ae.tagNameCheck instanceof RegExp&&it(Ae.tagNameCheck,_)||Ae.tagNameCheck instanceof Function&&Ae.tagNameCheck(_))&&(Ae.attributeNameCheck instanceof RegExp&&it(Ae.attributeNameCheck,M)||Ae.attributeNameCheck instanceof Function&&Ae.attributeNameCheck(M))||M==="is"&&Ae.allowCustomizedBuiltInElements&&(Ae.tagNameCheck instanceof RegExp&&it(Ae.tagNameCheck,W)||Ae.tagNameCheck instanceof Function&&Ae.tagNameCheck(W))))return!1}else if(!ze[M]){if(!it(en,Bi(W,re,""))){if(!((M==="src"||M==="xlink:href"||M==="href")&&_!=="script"&&Z0(W,"data:")===0&&de[_])){if(!(bn&&!it(ne,Bi(W,re,"")))){if(W)return!1}}}}}}return!0},Ja=function(_){return _!=="annotation-xml"&&Zc(_,ut)},Qa=function(_){tn(P.beforeSanitizeAttributes,_,null);const{attributes:M}=_;if(!M||Ys(_))return;const W={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Re,forceKeepAttr:void 0};let Ee=M.length;for(;Ee--;){const Ye=M[Ee],{name:Pe,namespaceURI:dt,value:nn}=Ye,Oi=Ue(Pe),Xs=nn;let Xe=Pe==="value"?Xs:W0(Xs);if(W.attrName=Oi,W.attrValue=Xe,W.keepAttr=!0,W.forceKeepAttr=void 0,tn(P.uponSanitizeAttribute,_,W),Xe=W.attrValue,O&&(Oi==="id"||Oi==="name")&&(hi(Pe,_),Xe=X+Xe),m&&it(/((--!?|])>)|<\/(style|title)/i,Xe)){hi(Pe,_);continue}if(W.forceKeepAttr)continue;if(!W.keepAttr){hi(Pe,_);continue}if(!Ws&&it(/\/>/i,Xe)){hi(Pe,_);continue}g&&Kr([N,ie,ae],tl=>{Xe=Bi(Xe,tl," ")});const el=Ue(_.nodeName);if(!Xa(el,Oi,Xe)){hi(Pe,_);continue}if(v&&typeof h=="object"&&typeof h.getAttributeType=="function"&&!dt)switch(h.getAttributeType(el,Oi)){case"TrustedHTML":{Xe=v.createHTML(Xe);break}case"TrustedScriptURL":{Xe=v.createScriptURL(Xe);break}}if(Xe!==Xs)try{dt?_.setAttributeNS(dt,Pe,Xe):_.setAttribute(Pe,Xe),Ys(_)?Ht(_):qc(t.removed)}catch{hi(Pe,_)}}tn(P.afterSanitizeAttributes,_,null)},Yd=function K(_){let M=null;const W=Wa(_);for(tn(P.beforeSanitizeShadowDOM,_,null);M=W.nextNode();)tn(P.uponSanitizeShadowNode,M,null),Ya(M),Qa(M),M.content instanceof s&&K(M.content);tn(P.afterSanitizeShadowDOM,_,null)};return t.sanitize=function(K){let _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},M=null,W=null,Ee=null,Ye=null;if(ft=!K,ft&&(K="<!-->"),typeof K!="string"&&!Ka(K))if(typeof K.toString=="function"){if(K=K.toString(),typeof K!="string")throw Vi("dirty is not a string, aborting")}else throw Vi("toString is not a function");if(!t.isSupported)return K;if($||Ks(_),t.removed=[],typeof K=="string"&&(Z=!1),Z){if(K.nodeName){const nn=Ue(K.nodeName);if(!le[nn]||$t[nn])throw Vi("root node is forbidden and cannot be sanitized in-place")}}else if(K instanceof a)M=Za("<!---->"),W=M.ownerDocument.importNode(K,!0),W.nodeType===ji.element&&W.nodeName==="BODY"||W.nodeName==="HTML"?M=W:M.appendChild(W);else{if(!D&&!g&&!S&&K.indexOf("<")===-1)return v&&z?v.createHTML(K):K;if(M=Za(K),!M)return D?null:z?T:""}M&&I&&Ht(M.firstChild);const Pe=Wa(Z?K:M);for(;Ee=Pe.nextNode();)Ya(Ee),Qa(Ee),Ee.content instanceof s&&Yd(Ee.content);if(Z)return K;if(D){if(B)for(Ye=F.call(M.ownerDocument);M.firstChild;)Ye.appendChild(M.firstChild);else Ye=M;return(Re.shadowroot||Re.shadowrootmode)&&(Ye=R.call(i,Ye,!0)),Ye}let dt=S?M.outerHTML:M.innerHTML;return S&&le["!doctype"]&&M.ownerDocument&&M.ownerDocument.doctype&&M.ownerDocument.doctype.name&&it(zd,M.ownerDocument.doctype.name)&&(dt="<!DOCTYPE "+M.ownerDocument.doctype.name+`>
`+dt),g&&Kr([N,ie,ae],nn=>{dt=Bi(dt,nn," ")}),v&&z?v.createHTML(dt):dt},t.setConfig=function(){let K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ks(K),$=!0},t.clearConfig=function(){di=null,$=!1},t.isValidAttribute=function(K,_,M){di||Ks({});const W=Ue(K),Ee=Ue(_);return Xa(W,Ee,M)},t.addHook=function(K,_){typeof _=="function"&&Ui(P[K],_)},t.removeHook=function(K,_){if(_!==void 0){const M=j0(P[K],_);return M===-1?void 0:q0(P[K],M,1)[0]}return qc(P[K])},t.removeHooks=function(K){P[K]=[]},t.removeAllHooks=function(){P=Qc()},t}var Bd=Ud();const eu=Object.freeze(Object.defineProperty({__proto__:null,default:Bd},Symbol.toStringTag,{value:"Module"})),cv=`# プライバシーポリシー (Privacy Policy)

最終更新日: 2025年6月16日

本プライバシーポリシー（以下「本ポリシー」といいます）は、「慈悲なきアイオニア 非公式キャラクターシート」（以下「本ツール」といいます）におけるユーザー情報の取り扱いについて定めたものです。

## 1. 収集する情報と利用目的

本ツールは、以下の目的でユーザーの情報にアクセスします。ユーザーの明示的な許可なく情報を収集することはありません。

### Google Drive連携機能

本ツールは、ユーザーの利便性向上のため、Google Driveとの連携機能を提供しています。この機能を利用する際に限り、以下の情報にアクセスします。

* **収集する情報:**
    * Googleアカウントの認証情報（OAuth 2.0 トークン）
    * ユーザーが許可したGoogle Drive上のファイル及びメタデータ（ファイルID、ファイル名など）
* **利用目的:**
    * キャラクターシートデータを、ユーザー自身のGoogle Driveアカウント内に保存、読み込み、更新するため。
    * 「共有機能」における「ライブリンク」や「全文・画像を含める」オプションを提供するため。

本ツールがユーザーのGoogle Driveに対して行う操作は、キャラクターシートの保存や共有機能に必要なことに限定しています。具体的には、以下の2種類の権限のみを要求します。

* **アプリ専用フォルダへのアクセス権 (\`drive.appdata\`):**
    本ツールだけがアクセスできる特別な隠しフォルダに、設定などの管理データを安全に保存するために使用します。ユーザーの通常のGoogle Driveファイルには影響しません。

* **本ツールで作成したファイルへのアクセス権 (\`drive.file\`):**
    「共有機能」でリンクを作成する際、暗号化されたキャラクターデータをユーザーのGoogle Driveに**新規ファイルとしてアップロード**するために使用します。この権限は、本ツールが作成したファイルへのアクセスに限定されており、ユーザーのGoogle Drive内にある他の個人的なファイル（写真、文書など）を本ツールが閲覧・編集することは一切ありません。

## 2. データの保存場所

ユーザーが作成したキャラクターシートデータは、以下のいずれかの場所にユーザー自身の操作によって保存されます。

1.  **ユーザーのウェブブラウザ内（ローカル環境）**
2.  **ユーザー自身のGoogle Driveアカウント内**

本ツールの開発者が管理するサーバー等に、ユーザーのキャラクターシートデータや個人情報が保存されることは一切ありません。

## 3. 第三者への情報提供

本ツールは、法令に基づく開示請求があった場合を除き、ユーザーの同意なく第三者に個人情報を提供することはありません。

ただし、以下の外部サービスについては、機能実現のために情報を送信することがあります。

* **Google API:** Google Drive連携機能の利用時に、Google社の提供するAPIを介して、Google社にデータが送信されます。
* **URL短縮サービス (TinyURL等):** 「共有機能」の利便性向上のため、外部のURL短縮サービスを利用することがあります。この際、暗号化されたキャラクターデータ等を含む長いURLが、当該サービスに送信されます。URL短縮サービスの利用は、ユーザーに短いリンクを提供することのみを目的としており、本ツールが個人情報をサービス提供者と意図的に共有することはありません。

## 4. Google APIから受け取った情報の利用について

本ツールは、Google APIから受け取った情報（以下「APIデータ」）の利用にあたり、Google APIサービスのユーザーデータポリシー（限定的な利用に関する要件を含みます）を遵守します。

APIデータの利用は、本ツールが提供する機能（キャラクターシートの保存・読込・共有）の改善・提供目的に限定されます。ユーザーの同意なく、APIデータを広告目的で利用したり、他のアプリケーションに転送したりすることはありません。

## 5. アクセス解析ツールについて

本ツールでは、サービスの品質向上および改善を目的として、Google Analyticsなどのアクセス解析ツールを利用することがあります。これらのツールは、トラフィックデータを収集するためにCookieを使用します。

収集されるデータは匿名であり、個人を特定するものではありません。収集されたデータは、各社のプライバシーポリシーに基づいて管理されます。

ユーザーは、お使いのブラウザの設定でCookieを無効にすることで、データ収集を拒否することができます。

## 6. 免責事項

* 本ツールは、TRPG「慈悲なきアイオニア」の非公式二次創作物です。
* 本ツールの利用により生じたいかなる損害についても、開発者は一切の責任を負いかねます。
* データの破損や消失に備え、ユーザー自身の責任において定期的なバックアップを行ってください。

## 7. プライバシーポリシーの変更

本ポリシーは、法令の改正やサービスの変更に伴い、事前の予告なく変更されることがあります。変更後のポリシーは、本ツール上に掲載された時点から効力を生じるものとします。

## 8. お問い合わせ

本ポリシーに関するご質問や、本ツールに関するご意見・ご要望は、以下の連絡先までお願いいたします。

* **不具合報告・機能要望:** [GitHub Issues](https://github.com/ktakahiro1729/aioniacs/issues)
* **X (旧Twitter):** [@KTakahiro1729](https://twitter.com/KTakahiro1729)
`,uv=["innerHTML"],fv={__name:"PrivacyPolicyModal",setup(e){const t=We(()=>Bd.sanitize(_e.parse(cv)));return(n,i)=>(H(),G("div",{class:"privacy-policy-modal__content",innerHTML:t.value},null,8,uv))}},dv=xt(fv,[["__scopeId","data-v-f07775b6"]]),hv={loadImage:function(e){return new Promise((t,n)=>{const i=["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"];if(!e){n(new Error("No file provided."));return}if(!i.includes(e.type)){n(new Error("Unsupported file type. Please upload JPEG, PNG, GIF, or WebP images."));return}if(e.size>10485760){n(new Error("File is too large. Maximum size is 10MB."));return}const s=new FileReader;s.onload=o=>{t(o.target.result)},s.onerror=o=>{console.error("FileReader error:",o),n(new Error("Error reading file."))},s.readAsDataURL(e)})},removeImage:function(e,t){if(t>=0&&t<e.length){const n=[...e];return n.splice(t,1),console.log(`Simulating removal of image at index: ${t}`),n}else return console.error("Invalid index for image removal."),e}},pv={class:"character-image-container"},gv={class:"image-display-area"},mv={key:0,class:"image-display-wrapper"},_v=["src"],bv=["disabled"],vv=["disabled"],wv={class:"image-count-display"},yv={key:1,class:"character-image-placeholder"},xv={key:0,class:"image-controls"},kv=["disabled"],Sv={__name:"CharacterImageDisplay",props:{images:{type:Array,default:()=>[]}},emits:["update:images"],setup(e,{emit:t}){const n=e,i=t,r=gt(),{showToast:s}=ai(),o=Fe([...n.images]);let a=!1;Xt(()=>n.images,p=>{a=!0,o.value=[...p],As(()=>{a=!1})},{deep:!0}),Xt(o,p=>{a||i("update:images",p)},{deep:!0});const c=Fe(0),l=We(()=>o.value.length>0&&c.value>=0&&c.value<o.value.length?o.value[c.value]:null),u=()=>{o.value.length>0&&(c.value=(c.value+1)%o.value.length)},d=()=>{o.value.length>0&&(c.value=(c.value-1+o.value.length)%o.value.length)},f=()=>{o.value.length>0&&c.value>=0&&(o.value.splice(c.value,1),o.value.length===0?c.value=-1:c.value>=o.value.length&&(c.value=o.value.length-1))},h=async p=>{const b=p.target.files[0];if(b)try{const E=await hv.loadImage(b);o.value.push(E),c.value=o.value.length-1}catch(E){console.error("Error loading image:",E),s({type:"error",...q.image.loadError(E)})}finally{p.target.value=null}};return(p,b)=>(H(),G("div",pv,[y("div",gv,[o.value.length>0?(H(),G("div",mv,[l.value?(H(),G("img",{key:0,src:l.value,class:"character-image-display",alt:"Character Image"},null,8,_v)):Oe("",!0),y("button",{onClick:d,class:"button-base button-imagenav button-imagenav--prev",disabled:o.value.length<=1,"aria-label":"前の画像"},"<",8,bv),y("button",{onClick:u,class:"button-base button-imagenav button-imagenav--next",disabled:o.value.length<=1,"aria-label":"次の画像"},">",8,vv),y("div",wv,he(c.value+1)+" / "+he(o.value.length),1)])):(H(),G("div",yv,"No Image"))]),w(r).isViewingShared?Oe("",!0):(H(),G("div",xv,[y("input",{type:"file",id:"character_image_upload",onChange:h,accept:"image/*",style:{display:"none"}},null,32),b[0]||(b[0]=y("label",{for:"character_image_upload",class:"button-base imagefile-button imagefile-button--upload"},"画像を追加",-1)),y("button",{disabled:!l.value,onClick:f,class:"button-base imagefile-button imagefile-button--delete","aria-label":"現在の画像を削除"},"削除",8,kv)]))]))}},Ev=xt(Sv,[["__scopeId","data-v-faad92e2"]]),Tv={id:"character_info",class:"character-info"},Av={class:"box-content"},Cv={class:"info-row"},Iv={class:"info-item info-item--double"},Dv=["disabled"],Lv={class:"info-item info-item--double"},Rv=["disabled"],$v={class:"info-row"},Ov=["disabled"],Pv=["value","disabled"],Mv={key:0,class:"info-item info-item--double"},Nv=["disabled"],Fv={class:"info-row"},Hv={class:"info-item info-item--quadruple"},zv=["disabled"],Uv={class:"info-item info-item--quadruple"},Bv=["disabled"],Vv={class:"info-item info-item--quadruple"},Gv=["disabled"],jv={class:"info-item info-item--quadruple"},qv=["disabled"],Zv={class:"info-row"},Wv={class:"info-item info-item--triple"},Kv=["disabled"],Yv={class:"info-item info-item--triple"},Xv=["disabled"],Jv={class:"info-item info-item--triple"},Qv=["disabled"],ew={__name:"CharacterBasicInfo",setup(e){const t=Ve(),n=gt(),i=()=>{t.handleSpeciesChange()};return(r,s)=>(H(),G("div",Tv,[s[23]||(s[23]=y("div",{class:"box-title"},"基本情報",-1)),y("div",Av,[se(Ev,{images:w(t).character.images,"onUpdate:images":s[0]||(s[0]=o=>w(t).character.images=o)},null,8,["images"]),y("div",Cv,[y("div",Iv,[s[12]||(s[12]=y("label",{for:"name"},"キャラクター名",-1)),fe(y("input",{type:"text",id:"name","onUpdate:modelValue":s[1]||(s[1]=o=>w(t).character.name=o),disabled:w(n).isViewingShared},null,8,Dv),[[Ce,w(t).character.name]])]),y("div",Lv,[s[13]||(s[13]=y("label",{for:"player_name"},"プレイヤー名",-1)),fe(y("input",{type:"text",id:"player_name","onUpdate:modelValue":s[2]||(s[2]=o=>w(t).character.playerName=o),disabled:w(n).isViewingShared},null,8,Rv),[[Ce,w(t).character.playerName]])])]),y("div",$v,[y("div",{class:ht(["info-item",{"info-item--full":w(t).character.species!=="other","info-item--double":w(t).character.species==="other"}])},[s[14]||(s[14]=y("label",{for:"species"},"種族",-1)),fe(y("select",{id:"species","onUpdate:modelValue":s[3]||(s[3]=o=>w(t).character.species=o),onChange:i,disabled:w(n).isViewingShared},[(H(!0),G(pe,null,tt(w(ee).speciesOptions,o=>(H(),G("option",{key:o.value,value:o.value,disabled:o.disabled},he(o.label),9,Pv))),128))],40,Ov),[[Xn,w(t).character.species]])],2),w(t).character.species==="other"?(H(),G("div",Mv,[s[15]||(s[15]=y("label",{for:"rare_species"},"種族名（希少人種）",-1)),fe(y("input",{type:"text",id:"rare_species","onUpdate:modelValue":s[4]||(s[4]=o=>w(t).character.rareSpecies=o),disabled:w(n).isViewingShared},null,8,Nv),[[Ce,w(t).character.rareSpecies]])])):Oe("",!0)]),y("div",Fv,[y("div",Hv,[s[16]||(s[16]=y("label",{for:"gender"},"性別",-1)),fe(y("input",{type:"text",id:"gender","onUpdate:modelValue":s[5]||(s[5]=o=>w(t).character.gender=o),disabled:w(n).isViewingShared},null,8,zv),[[Ce,w(t).character.gender]])]),y("div",Uv,[s[17]||(s[17]=y("label",{for:"age"},"年齢",-1)),fe(y("input",{type:"number",id:"age","onUpdate:modelValue":s[6]||(s[6]=o=>w(t).character.age=o),min:"0",disabled:w(n).isViewingShared},null,8,Bv),[[Ce,w(t).character.age,void 0,{number:!0}]])]),y("div",Vv,[s[18]||(s[18]=y("label",{for:"height"},"身長",-1)),fe(y("input",{type:"text",id:"height","onUpdate:modelValue":s[7]||(s[7]=o=>w(t).character.height=o),disabled:w(n).isViewingShared},null,8,Gv),[[Ce,w(t).character.height]])]),y("div",jv,[s[19]||(s[19]=y("label",{for:"weight_char"},"体重",-1)),fe(y("input",{type:"text",id:"weight_char","onUpdate:modelValue":s[8]||(s[8]=o=>w(t).character.weight=o),disabled:w(n).isViewingShared},null,8,qv),[[Ce,w(t).character.weight]])])]),y("div",Zv,[y("div",Wv,[s[20]||(s[20]=y("label",{for:"origin"},"出身地",-1)),fe(y("input",{type:"text",id:"origin","onUpdate:modelValue":s[9]||(s[9]=o=>w(t).character.origin=o),disabled:w(n).isViewingShared},null,8,Kv),[[Ce,w(t).character.origin]])]),y("div",Yv,[s[21]||(s[21]=y("label",{for:"occupation"},"職業",-1)),fe(y("input",{type:"text",id:"occupation","onUpdate:modelValue":s[10]||(s[10]=o=>w(t).character.occupation=o),disabled:w(n).isViewingShared},null,8,Xv),[[Ce,w(t).character.occupation]])]),y("div",Jv,[s[22]||(s[22]=y("label",{for:"faith"},"信仰",-1)),fe(y("input",{type:"text",id:"faith","onUpdate:modelValue":s[11]||(s[11]=o=>w(t).character.faith=o),disabled:w(n).isViewingShared},null,8,Qv),[[Ce,w(t).character.faith]])])])])]))}},tw={id:"scar_weakness_section",class:"scar-weakness"},nw={class:"box-content"},iw={class:"scar-section"},rw={class:"info-row"},sw={class:"info-item info-item--double"},ow={class:"link-checkbox-container"},aw=["disabled"],lw=["disabled"],cw={class:"info-item info-item--double"},uw=["disabled"],fw={class:"weakness-section"},dw={class:"weakness-list list-reset"},hw={class:"flex-weakness-number"},pw={class:"flex-weakness-text"},gw=["onUpdate:modelValue","disabled"],mw={class:"flex-weakness-acquired"},_w=["onUpdate:modelValue","disabled"],bw=["value","disabled"],vw={__name:"ScarWeaknessSection",setup(e){const t=Ve(),n=gt(),i=We(()=>t.sessionNamesForWeaknessDropdown);function r(s){const o=parseInt(s.target.value,10);Number.isNaN(o)||t.character.linkCurrentToInitialScar&&o!==t.character.initialScar&&(t.character.linkCurrentToInitialScar=!1)}return(s,o)=>(H(),G("div",tw,[o[9]||(o[9]=y("div",{class:"box-title"},"傷痕と弱点",-1)),y("div",nw,[y("div",iw,[o[6]||(o[6]=y("div",{class:"sub-box-title sub-box-title--scar"},"傷痕",-1)),y("div",rw,[y("div",sw,[y("div",ow,[o[3]||(o[3]=y("label",{for:"current_scar",class:"link-checkbox-main-label"},"現在値",-1)),fe(y("input",{type:"checkbox",id:"link_current_to_initial_scar_checkbox","onUpdate:modelValue":o[0]||(o[0]=a=>w(t).character.linkCurrentToInitialScar=a),class:"link-checkbox",disabled:w(n).isViewingShared},null,8,aw),[[yf,w(t).character.linkCurrentToInitialScar]]),o[4]||(o[4]=y("label",{for:"link_current_to_initial_scar_checkbox",class:"link-checkbox-label"},"連動",-1))]),fe(y("input",{type:"number",id:"current_scar","onUpdate:modelValue":o[1]||(o[1]=a=>w(t).character.currentScar=a),onInput:r,class:ht([{"greyed-out":w(t).character.linkCurrentToInitialScar},"scar-section__current-input"]),min:"0",disabled:w(n).isViewingShared},null,42,lw),[[Ce,w(t).character.currentScar,void 0,{number:!0}]])]),y("div",cw,[o[5]||(o[5]=y("label",{for:"initial_scar"},"初期値",-1)),fe(y("input",{type:"number",id:"initial_scar","onUpdate:modelValue":o[2]||(o[2]=a=>w(t).character.initialScar=a),min:"0",disabled:w(n).isViewingShared},null,8,uw),[[Ce,w(t).character.initialScar,void 0,{number:!0}]])])])]),y("div",fw,[o[8]||(o[8]=y("div",{class:"sub-box-title sub-box-title--weakness"},"弱点",-1)),y("ul",dw,[o[7]||(o[7]=y("li",{class:"base-list-header"},[y("div",{class:"flex-weakness-number base-list-header-placeholder"}),y("div",{class:"flex-weakness-text"},[y("label",null,"弱点")]),y("div",{class:"flex-weakness-acquired"},[y("label",null,"獲得")])],-1)),(H(!0),G(pe,null,tt(w(t).character.weaknesses,(a,c)=>(H(),G("li",{key:c,class:"base-list-item"},[y("div",hw,he(c<9?c+1:"X"),1),y("div",pw,[fe(y("input",{type:"text","onUpdate:modelValue":l=>a.text=l,disabled:w(n).isViewingShared},null,8,gw),[[Ce,a.text]])]),y("div",mw,[fe(y("select",{"onUpdate:modelValue":l=>a.acquired=l,disabled:w(n).isViewingShared},[(H(!0),G(pe,null,tt(i.value,l=>(H(),G("option",{key:l.value,value:l.value,disabled:l.disabled},he(l.text),9,bw))),128))],8,_w),[[Xn,a.acquired]])])]))),128))])])])]))}},ww=xt(vw,[["__scopeId","data-v-17554b6e"]]);function yw(){return{expertPlaceholder:t=>t.checked?ee.placeholderTexts.expertSkill:ee.placeholderTexts.expertSkillDisabled}}const xw={id:"skills",class:"skills"},kw={class:"skills-list box-content list-reset"},Sw={class:"skill-header"},Ew=["id","onUpdate:modelValue","disabled"],Tw=["for"],Aw={key:0,class:"experts-section"},Cw={class:"expert-list list-reset"},Iw={key:0,class:"delete-button-wrapper"},Dw=["onClick","disabled"],Lw=["onUpdate:modelValue","placeholder","disabled"],Rw={key:0,class:"add-button-container-left"},$w=["onClick"],Ow={__name:"SkillsSection",setup(e){const t=Ve(),n=gt(),i=t.skills,{expertPlaceholder:r}=yw();return(s,o)=>(H(),G("div",xw,[o[0]||(o[0]=y("div",{class:"box-title"},"技能",-1)),y("ul",kw,[(H(!0),G(pe,null,tt(w(i),a=>(H(),G("li",{key:a.id,class:"skill-list"},[y("div",Sw,[fe(y("input",{type:"checkbox",id:a.id,"onUpdate:modelValue":c=>a.checked=c,disabled:w(n).isViewingShared},null,8,Ew),[[yf,a.checked]]),y("label",{for:a.id,class:"skill-name"},he(a.name),9,Tw)]),a.canHaveExperts&&a.checked?(H(),G("div",Aw,[y("ul",Cw,[(H(!0),G(pe,null,tt(a.experts,(c,l)=>(H(),G("li",{key:l,class:"base-list-item"},[w(n).isViewingShared?Oe("",!0):(H(),G("div",Iw,[y("button",{type:"button",class:"button-base list-button list-button--delete",onClick:u=>w(t).removeExpert(a.id,l),disabled:a.experts.length<=1&&c.value==="","aria-label":"専門技能を削除"}," － ",8,Dw)])),fe(y("input",{type:"text","onUpdate:modelValue":u=>c.value=u,placeholder:w(r)(a),disabled:!a.checked||w(n).isViewingShared,class:"flex-grow"},null,8,Lw),[[Ce,c.value]])]))),128))]),w(n).isViewingShared?Oe("",!0):(H(),G("div",Rw,[y("button",{type:"button",class:"button-base list-button list-button--add",onClick:c=>w(t).addExpert(a.id),"aria-label":"専門技能を追加"}," ＋ ",8,$w)]))])):Oe("",!0)]))),128))])]))}},Pw=xt(Ow,[["__scopeId","data-v-df99cbd5"]]),Mw={id:"special_skills",class:"special-skills"},Nw={class:"box-content"},Fw={class:"list-reset special-skills-list"},Hw={key:0,class:"delete-button-wrapper"},zw=["onClick","disabled"],Uw={class:"flex-grow"},Bw={class:"flex-group"},Vw=["onUpdate:modelValue","onChange","disabled"],Gw=["value"],jw=["onUpdate:modelValue","disabled"],qw=["onUpdate:modelValue","onChange","disabled"],Zw=["value"],Ww=["onUpdate:modelValue","placeholder","disabled"],Kw=["onUpdate:modelValue","placeholder","disabled"],Yw={key:0,class:"add-button-container-left"},Xw={__name:"SpecialSkillsSection",setup(e){const t=Ve(),n=gt(),i=t.specialSkills;function r(c){return!!(c.group||c.name||c.note)}function s(c){const l=i[c];return l?ee.specialSkillData[l.group]||[]:[]}function o(c){const l=i[c];l&&(l.name="",l.note="",l.showNote=l.group==="free",l.group!=="free"&&a(c))}function a(c){const l=i[c];if(l){const u=l.name;l.showNote=ee.specialSkillsRequiringNote.includes(u)}}return(c,l)=>(H(),G("div",Mw,[l[2]||(l[2]=y("div",{class:"box-title"},"特技",-1)),y("div",Nw,[y("ul",Fw,[(H(!0),G(pe,null,tt(w(i),(u,d)=>(H(),G("li",{key:d,class:"base-list-item special-skill-item"},[w(n).isViewingShared?Oe("",!0):(H(),G("div",Hw,[y("button",{type:"button",class:"button-base list-button list-button--delete",onClick:f=>w(t).removeSpecialSkill(d),disabled:w(i).length<=1&&!r(u),"aria-label":"特技を削除"},"－",8,zw)])),y("div",Uw,[y("div",Bw,[fe(y("select",{"onUpdate:modelValue":f=>u.group=f,onChange:f=>o(d),class:"flex-item-1",disabled:w(n).isViewingShared},[(H(!0),G(pe,null,tt(w(ee).specialSkillGroupOptions,f=>(H(),G("option",{key:f.value,value:f.value},he(f.label),9,Gw))),128))],40,Vw),[[Xn,u.group]]),u.group==="free"?fe((H(),G("input",{key:0,type:"text","onUpdate:modelValue":f=>u.name=f,class:"flex-item-2",disabled:w(n).isViewingShared},null,8,jw)),[[Ce,u.name]]):fe((H(),G("select",{key:1,"onUpdate:modelValue":f=>u.name=f,onChange:f=>a(d),disabled:!u.group||w(n).isViewingShared,class:"flex-item-2"},[l[1]||(l[1]=y("option",{value:""},"---",-1)),(H(!0),G(pe,null,tt(s(d),f=>(H(),G("option",{key:f.value,value:f.value},he(f.label),9,Zw))),128))],40,qw)),[[Xn,u.name]])]),u.group==="free"?fe((H(),G("textarea",{key:0,"onUpdate:modelValue":f=>u.note=f,class:"special-skill-note-input",placeholder:w(ee).placeholderTexts.specialSkillNote,disabled:w(n).isViewingShared},null,8,Ww)),[[Ce,u.note]]):fe((H(),G("input",{key:1,type:"text","onUpdate:modelValue":f=>u.note=f,class:"special-skill-note-input",placeholder:w(ee).placeholderTexts.specialSkillNote,disabled:w(n).isViewingShared},null,8,Kw)),[[Ce,u.note],[bf,u.showNote]])])]))),128))]),!w(n).isViewingShared&&w(i).length<w(ee).config.maxSpecialSkills?(H(),G("div",Yw,[y("button",{type:"button",class:"button-base list-button list-button--add",onClick:l[0]||(l[0]=u=>w(t).addSpecialSkillItem()),"aria-label":"特技を追加"},"＋")])):Oe("",!0)])]))}},Jw=xt(Xw,[["__scopeId","data-v-575ba60f"]]);function Qw(e){const t=[];for(let n=1;n<=15;n++)n<=e?n<=5?t.push("load-indicator--step--on-normal"):n<=10?t.push("load-indicator--step--on-light"):t.push("load-indicator--step--on-heavy"):n<=5?t.push("load-indicator--step--ghost-normal"):n<=10?t.push("load-indicator--step--ghost-light"):t.push("load-indicator--step--ghost-heavy");return t}const ey={class:"load-indicator"},ty={class:"load-indicator--label"},ny={class:"load-indicator--steps"},iy={__name:"LoadIndicator",props:{load:Number},setup(e){const t=e,n=Ve(),i=We(()=>t.load??n.currentWeight),r=We(()=>Qw(i.value));return(s,o)=>(H(),G("div",ey,[y("span",ty," 荷重: "+he(i.value),1),y("div",ny,[(H(),G(pe,null,tt(15,a=>y("div",{key:a,class:ht(["load-indicator--step",r.value[a-1]])},null,2)),64))])]))}},ry=xt(iy,[["__scopeId","data-v-539d1b08"]]),sy={id:"items_section",class:"items"},oy={class:"box-title"},ay={class:"box-content"},ly={class:"equipment-wrapper"},cy={class:"equipment-container"},uy={class:"equipment-section"},fy={class:"equipment-item"},dy={class:"flex-group"},hy=["disabled"],py=["value"],gy=["placeholder","disabled"],my={class:"equipment-item"},_y={class:"flex-group"},by=["disabled"],vy=["value"],wy=["placeholder","disabled"],yy={class:"equipment-item"},xy={class:"flex-group"},ky=["disabled"],Sy=["value"],Ey=["placeholder","disabled"],Ty=["readonly"],Ay={__name:"ItemsSection",setup(e){const t=Ve(),n=gt();return(i,r)=>(H(),G("div",sy,[y("div",oy,[r[7]||(r[7]=Et("所持品")),se(ry)]),y("div",ay,[y("div",ly,[y("div",cy,[y("div",uy,[y("div",fy,[r[8]||(r[8]=y("label",{for:"weapon1"},"武器1",-1)),y("div",dy,[fe(y("select",{id:"weapon1","onUpdate:modelValue":r[0]||(r[0]=s=>w(t).equipments.weapon1.group=s),class:"flex-item-1",disabled:w(n).isViewingShared},[(H(!0),G(pe,null,tt(w(ee).weaponOptions,s=>(H(),G("option",{key:s.value,value:s.value},he(s.label),9,py))),128))],8,hy),[[Xn,w(t).equipments.weapon1.group]]),fe(y("input",{type:"text",id:"weapon1_name","onUpdate:modelValue":r[1]||(r[1]=s=>w(t).equipments.weapon1.name=s),placeholder:w(ee).placeholderTexts.weaponName,class:"flex-item-2",disabled:w(n).isViewingShared},null,8,gy),[[Ce,w(t).equipments.weapon1.name]])])]),y("div",my,[r[9]||(r[9]=y("label",{for:"weapon2"},"武器2",-1)),y("div",_y,[fe(y("select",{id:"weapon2","onUpdate:modelValue":r[2]||(r[2]=s=>w(t).equipments.weapon2.group=s),class:"flex-item-1",disabled:w(n).isViewingShared},[(H(!0),G(pe,null,tt(w(ee).weaponOptions,s=>(H(),G("option",{key:s.value,value:s.value},he(s.label),9,vy))),128))],8,by),[[Xn,w(t).equipments.weapon2.group]]),fe(y("input",{type:"text",id:"weapon2_name","onUpdate:modelValue":r[3]||(r[3]=s=>w(t).equipments.weapon2.name=s),placeholder:w(ee).placeholderTexts.weaponName,class:"flex-item-2",disabled:w(n).isViewingShared},null,8,wy),[[Ce,w(t).equipments.weapon2.name]])])]),y("div",yy,[r[10]||(r[10]=y("label",{for:"armor"},"防具",-1)),y("div",xy,[fe(y("select",{id:"armor","onUpdate:modelValue":r[4]||(r[4]=s=>w(t).equipments.armor.group=s),class:"flex-item-1",disabled:w(n).isViewingShared},[(H(!0),G(pe,null,tt(w(ee).armorOptions,s=>(H(),G("option",{key:s.value,value:s.value},he(s.label),9,Sy))),128))],8,ky),[[Xn,w(t).equipments.armor.group]]),fe(y("input",{type:"text",id:"armor_name","onUpdate:modelValue":r[5]||(r[5]=s=>w(t).equipments.armor.name=s),placeholder:w(ee).placeholderTexts.armorName,class:"flex-item-2",disabled:w(n).isViewingShared},null,8,Ey),[[Ce,w(t).equipments.armor.name]])])])])])]),y("div",null,[r[11]||(r[11]=y("label",{for:"other_items",class:"block-label"},"その他所持品",-1)),fe(y("textarea",{id:"other_items",class:"items-textarea","onUpdate:modelValue":r[6]||(r[6]=s=>w(t).character.otherItems=s),readonly:w(n).isViewingShared},null,8,Ty),[[Ce,w(t).character.otherItems]])])])]))}},Cy=xt(Ay,[["__scopeId","data-v-b7b32448"]]),Iy={id:"character_memo",class:"character-memo"},Dy={class:"box-content"},Ly=["placeholder","readonly"],Ry={__name:"CharacterMemoSection",setup(e){const t=Ve(),n=gt(),i=We({get:()=>t.character.memo,set:r=>{t.character.memo=r}});return(r,s)=>(H(),G("div",Iy,[s[1]||(s[1]=y("div",{class:"box-title"},"キャラクターメモ",-1)),y("div",Dy,[fe(y("textarea",{id:"character_text",class:"character-memo-textarea",placeholder:w(ee).placeholderTexts.characterMemo,"onUpdate:modelValue":s[0]||(s[0]=o=>i.value=o),readonly:w(n).isViewingShared},null,8,Ly),[[Ce,i.value]])])]))}},$y=xt(Ry,[["__scopeId","data-v-2255a2fe"]]),Oy=["type","placeholder","disabled","value"],Lo={__name:"BaseInput",props:{modelValue:[String,Number],type:{type:String,default:"text"},placeholder:{type:String,default:""},disabled:Boolean},emits:["update:modelValue"],setup(e,{emit:t}){const n=t;function i(r){n("update:modelValue",r.target.value)}return(r,s)=>(H(),G("input",hs(r.$attrs,{type:e.type,placeholder:e.placeholder,disabled:e.disabled,value:e.modelValue,onInput:i}),null,16,Oy))}},Py={class:"base-list-item"},My={key:0,class:"delete-button-wrapper"},Ny=["disabled"],Fy={__name:"BaseListItem",props:{showDeleteButton:Boolean,canDelete:{type:Boolean,default:!0}},emits:["delete-item"],setup(e,{emit:t}){const n=t;function i(){n("delete-item")}return(r,s)=>(H(),G("li",Py,[e.showDeleteButton?(H(),G("div",My,[y("button",{type:"button",class:"button-base list-button list-button--delete",onClick:i,disabled:!e.canDelete,"aria-label":"項目を削除"}," － ",8,Ny)])):Oe("",!0),lp(r.$slots,"default")]))}},Hy={id:"adventure_log_section",class:"adventure-log-section"},zy={class:"box-content"},Uy={id:"histories",class:"list-reset"},By={class:"flex-grow"},Vy={class:"history-item-inputs"},Gy={class:"flex-history-name"},jy={class:"flex-history-exp"},qy={class:"flex-history-memo"},Zy={key:0,class:"add-button-container-left"},Wy={__name:"AdventureLogSection",setup(e){const t=Ve(),n=gt();function i(r){return!!(r.sessionName||r.gotExperiments!==null&&r.gotExperiments!==""||r.memo)}return(r,s)=>(H(),G("div",Hy,[s[2]||(s[2]=y("div",{class:"box-title"},"冒険の記録",-1)),y("div",zy,[s[1]||(s[1]=Bp('<div class="base-list-header" data-v-32b46f0f><div class="delete-button-wrapper base-list-header-placeholder" data-v-32b46f0f></div><div class="flex-grow" data-v-32b46f0f><div class="history-item-inputs" data-v-32b46f0f><div class="flex-history-name" data-v-32b46f0f><label data-v-32b46f0f>シナリオ名</label></div><div class="flex-history-exp" data-v-32b46f0f><label data-v-32b46f0f>経験点</label></div><div class="flex-history-memo" data-v-32b46f0f><label data-v-32b46f0f>メモ</label></div></div></div></div>',1)),y("ul",Uy,[(H(!0),G(pe,null,tt(w(t).histories,(o,a)=>(H(),hn(Fy,{key:a,"show-delete-button":!w(n).isViewingShared,"can-delete":!(w(t).histories.length<=1&&!i(o)),onDeleteItem:c=>w(t).removeHistoryItem(a)},{default:Ir(()=>[y("div",By,[y("div",Vy,[y("div",Gy,[se(Lo,{type:"text","model-value":o.sessionName,"onUpdate:modelValue":c=>w(t).updateHistoryItem(a,"sessionName",c),disabled:w(n).isViewingShared},null,8,["model-value","onUpdate:modelValue","disabled"])]),y("div",jy,[se(Lo,{type:"number",min:"0","model-value":o.gotExperiments,"onUpdate:modelValue":c=>w(t).updateHistoryItem(a,"gotExperiments",c),disabled:w(n).isViewingShared},null,8,["model-value","onUpdate:modelValue","disabled"])]),y("div",qy,[se(Lo,{type:"text","model-value":o.memo,"onUpdate:modelValue":c=>w(t).updateHistoryItem(a,"memo",c),disabled:w(n).isViewingShared},null,8,["model-value","onUpdate:modelValue","disabled"])])])])]),_:2},1032,["show-delete-button","can-delete","onDeleteItem"]))),128))]),w(n).isViewingShared?Oe("",!0):(H(),G("div",Zy,[y("button",{type:"button",class:"button-base list-button list-button--add",onClick:s[0]||(s[0]=(...o)=>w(t).addHistoryItem&&w(t).addHistoryItem(...o)),"aria-label":"冒険記録を追加"},"＋")]))])]))}},Ky=xt(Wy,[["__scopeId","data-v-32b46f0f"]]),Yy={class:"main-grid"},Xy={class:"copyright-footer"},Jy={key:0,class:"build-info"},Qy={__name:"CharacterSheetLayout",setup(e){Ve();const{showModal:t}=Ms(),s="codex/implement-footer-keyboard-follow-using-visual-viewport-api (a7a38d2) 2025-06-22 02:38:59 UTC";async function o(){await t({component:dv,title:"プライバシーポリシー",buttons:[{label:"閉じる",value:"close",variant:"secondary"}]})}return(a,c)=>(H(),G(pe,null,[y("div",Yy,[se(ew),se(ww),se(Pw),se(Jw),se(Cy),se($y),se(Ky)]),y("div",Xy,[c[0]||(c[0]=y("p",null,[Et(" 本サイトは"),y("a",{href:"https://www.aioniatrpg.com/",target:"_blank",rel:"noopener noreferrer"},"「イチ（フシギ製作所）」様が権利を有する「慈悲なきアイオニア」"),Et("の二次創作物です(Ver 1.2対応)。"),y("br"),Et(" 本サイトは"),y("a",{href:"https://bright-trpg.github.io/aionia_character_maker/",target:"_blank",rel:"noopener noreferrer"},"bright-trpg様作成の「慈悲なきアイオニア　キャラクター作成用ツール」"),Et("をもとに、あろすてりっくが作成しました。 ")],-1)),y("button",{class:"button-link",onClick:o}," プライバシーポリシー "),w(s)?(H(),G("div",Jy,he(w(s)),1)):Oe("",!0)])],64))}};function ex(e){let t=0,n=0,i=0;function r(){requestAnimationFrame(()=>{const s=window.scrollY,o=s-t;n-=o,n>0&&(n=0),n<-i&&(n=-i),e.value&&(e.value.style.transform=`translateY(${n}px)`),t=s})}oi(()=>{e.value&&(i=e.value.offsetHeight,e.value.style.transform="translateY(0px)"),t=window.scrollY,window.addEventListener("scroll",r,{passive:!0})}),Sa(()=>{window.removeEventListener("scroll",r)})}const tx=["title"],nx={class:"main-header__title"},ix={__name:"MainHeader",props:{helpState:String,defaultTitle:String,cloudHubLabel:String,helpLabel:String},emits:["open-hub","help-mouseover","help-mouseleave","help-click"],setup(e,{expose:t,emit:n}){const i=e,r=Fe(null),s=Fe(null),o=Ve();ex(r);const a=We(()=>o.character.name||i.defaultTitle);return t({headerEl:r,helpIcon:s}),(c,l)=>(H(),G("header",{class:"main-header",ref_key:"headerEl",ref:r},[y("button",{class:"button-base icon-button",title:e.cloudHubLabel,onClick:l[0]||(l[0]=u=>c.$emit("open-hub"))},l[4]||(l[4]=[y("span",{class:"icon-svg icon-svg-cloud","aria-label":"cloud"},null,-1)]),8,tx),y("div",nx,he(a.value),1),y("div",{class:ht(["button-base header-help-icon",{"header-help-icon--fixed":e.helpState==="fixed"}]),ref_key:"helpIcon",ref:s,onMouseover:l[1]||(l[1]=u=>c.$emit("help-mouseover")),onMouseleave:l[2]||(l[2]=u=>c.$emit("help-mouseleave")),onClick:l[3]||(l[3]=u=>c.$emit("help-click")),tabindex:"0"},he(e.helpLabel),35)],512))}},rx=xt(ix,[["__scopeId","data-v-52fe2842"]]);function sx(){const e=gt(),t=We(()=>e.isSignedIn?e.currentDriveFileId?{label:q.ui.buttons.saveCloudOverwrite,title:q.ui.buttons.saveCloudTitle,icon:"icon-svg-cloud-upload"}:{label:q.ui.buttons.saveCloudNew,title:q.ui.buttons.saveCloudTitle,icon:"icon-svg-cloud-upload"}:{label:q.ui.buttons.saveLocal,title:q.ui.buttons.saveLocalTitle,icon:"icon-svg-local-download"}),n=We(()=>e.isSignedIn?{label:q.ui.buttons.loadCloud,title:q.ui.buttons.loadCloudTitle,icon:"icon-svg-cloud-download"}:{label:q.ui.buttons.loadLocal,title:q.ui.buttons.loadLocalTitle,icon:"icon-svg-local-upload"});return{saveButton:t,loadButton:n}}const ox={class:"main-footer"},ax=["title"],lx=["title"],cx=["title"],ux=["aria-label"],fx={__name:"MainFooter",props:{experienceStatusClass:String,experienceLabel:String,currentExperiencePoints:Number,maxExperiencePoints:Number,currentWeight:Number,isViewingShared:Boolean,saveLocal:Function,handleFileUpload:Function,openHub:Function,saveToDrive:Function,ioLabel:String,shareLabel:String,copyEditLabel:String},setup(e){const t=e,n=gt(),{saveButton:i,loadButton:r}=sx();function s(){n.isSignedIn?t.saveToDrive():t.saveLocal()}return(o,a)=>(H(),G("div",ox,[y("div",{class:ht(["status-display",e.experienceStatusClass])},he(e.experienceLabel)+" "+he(e.currentExperiencePoints)+" / "+he(e.maxExperiencePoints),3),y("button",{class:"button-base footer-button footer-button--save",onClick:s,title:w(i).title},[y("span",{class:ht(["icon-svg icon-svg--footer",w(i).icon])},null,2),Et(" "+he(w(i).label),1)],8,ax),w(n).isSignedIn?(H(),G("button",{key:1,class:"button-base footer-button footer-button--load",onClick:a[0]||(a[0]=(...c)=>t.openHub&&t.openHub(...c)),title:w(r).title},[y("span",{class:ht(["icon-svg icon-svg--footer",w(r).icon])},null,2),Et(" "+he(w(r).label),1)],8,cx)):(H(),G("label",{key:0,class:"button-base footer-button footer-button--load",for:"load_input_vue",title:w(r).title},[y("span",{class:ht(["icon-svg icon-svg--footer",w(r).icon])},null,2),Et(" "+he(w(r).label),1)],8,lx)),w(n).isSignedIn?Oe("",!0):(H(),G("input",{key:2,type:"file",id:"load_input_vue",onChange:a[1]||(a[1]=c=>t.handleFileUpload(c)),accept:".json,.txt,.zip",class:"hidden"},null,32)),y("button",{class:"button-base footer-button footer-button--io",onClick:a[2]||(a[2]=c=>o.$emit("io"))},[a[4]||(a[4]=y("span",{class:"icon-svg icon-svg--footer icon-svg-io"},null,-1)),Et(" "+he(e.ioLabel),1)]),y("button",{class:"button-base footer-button footer-button--share","aria-label":e.isViewingShared?e.copyEditLabel:e.shareLabel,onClick:a[3]||(a[3]=c=>o.$emit("share"))},[a[5]||(a[5]=y("span",{class:"icon-svg icon-svg--footer icon-svg-share"},null,-1)),Et(" "+he(e.isViewingShared?e.copyEditLabel:e.shareLabel),1)],8,ux)]))}},dx=xt(fx,[["__scopeId","data-v-d70d3e57"]]),hx={class:"accordion"},px=["onClick"],gx={class:"accordion__indicator"},mx=["innerHTML"],_x={__name:"HelpPanel",props:{isVisible:Boolean,helpText:String},emits:["close"],setup(e,{expose:t,emit:n}){const i=e,r=Fe(null),s=Fe([]),o=Fe(0);Xt(()=>i.helpText,async l=>{if(s.value=a(l),o.value=0,s.value[0]){const{marked:u}=await At(async()=>{const{marked:f}=await Promise.resolve().then(()=>Gc);return{marked:f}},void 0,import.meta.url),{default:d}=await At(async()=>{const{default:f}=await Promise.resolve().then(()=>eu);return{default:f}},void 0,import.meta.url);s.value[0].html=d.sanitize(u.parse(s.value[0].content))}},{immediate:!0});function a(l){return l?l.split(/^####\s+/m).filter(Boolean).map(d=>{const f=d.split(`
`),h=f.shift().trim(),p=f.join(`
`);return{title:h,content:p,html:""}}):[]}async function c(l){if(o.value===l){o.value=-1;return}o.value=l;const u=s.value[l];if(!u.html){const{marked:d}=await At(async()=>{const{marked:h}=await Promise.resolve().then(()=>Gc);return{marked:h}},void 0,import.meta.url),{default:f}=await At(async()=>{const{default:h}=await Promise.resolve().then(()=>eu);return{default:h}},void 0,import.meta.url);u.html=f.sanitize(d.parse(u.content))}}return t({panelEl:r}),(l,u)=>(H(),hn(pf,{name:"fade"},{default:Ir(()=>[e.isVisible?(H(),G("div",{key:0,class:"help-panel",ref_key:"panelEl",ref:r},[y("button",{class:"help-close close-cross",onClick:u[0]||(u[0]=d=>l.$emit("close"))},"×"),y("div",hx,[(H(!0),G(pe,null,tt(s.value,(d,f)=>(H(),G("div",{key:d.title,class:"accordion__item"},[y("button",{class:"accordion__header",onClick:h=>c(f)},[Et(he(d.title)+" ",1),y("span",gx,he(o.value===f?"−":"+"),1)],8,px),fe(y("div",{class:"accordion__body",innerHTML:d.html},null,8,mx),[[bf,o.value===f]])]))),128))])],512)):Oe("",!0)]),_:1}))}},bx={class:"toast-content"},vx={class:"toast-title"},wx={class:"toast-message"},yx={key:0,class:"toast-progress"},xx={__name:"ToastNotification",props:{toast:Object},emits:["close"],setup(e,{emit:t}){return(n,i)=>(H(),G("div",{class:ht(["toast",`toast--${e.toast.type}`])},[i[1]||(i[1]=y("div",{class:"toast-icon"},"!",-1)),y("div",bx,[y("div",vx,he(e.toast.title),1),y("div",wx,he(e.toast.message),1)]),y("button",{class:"toast-close",onClick:i[0]||(i[0]=r=>n.$emit("close"))},"×"),e.toast.duration&&e.toast.duration>0?(H(),G("div",yx)):Oe("",!0)],2))}},kx={__name:"NotificationContainer",setup(e){const t=Cf();return(n,i)=>(H(),G("div",null,[se(xg,{name:"toast",tag:"div",class:"toast-container"},{default:Ir(()=>[(H(!0),G(pe,null,tt(w(t).toasts,r=>(H(),hn(xx,{key:r.id,toast:r,onClose:s=>w(t).removeToast(r.id)},null,8,["toast","onClose"]))),128))]),_:1})]))}},Sx={key:0,class:"modal-header box-title"},Ex={class:"modal-header-left"},Tx={key:0,class:"modal-icon"},Ax={class:"modal-title"},Cx={key:1,class:"modal-global-actions sub-box-title"},Ix={class:"modal-content box-content"},Dx={key:0,class:"modal-message"},Lx={class:"modal-actions"},Rx=["disabled","onClick"],$x={__name:"BaseModal",setup(e){const t=Ia(),n=t,i=Fe(null);function r(s){t.resolveModal({value:s,component:i.value})}return(s,o)=>(H(),hn(pf,{name:"modal-fade"},{default:Ir(()=>[w(n).isVisible?(H(),G("div",{key:0,class:"modal-overlay",onClick:o[1]||(o[1]=Dg(a=>w(t).hideModal(),["self"]))},[y("div",{class:ht(["modal",w(n).type?`modal--${w(n).type}`:""])},[y("button",{class:"modal-close close-cross",onClick:o[0]||(o[0]=a=>w(t).hideModal())},"×"),w(n).title?(H(),G("div",Sx,[y("div",Ex,[w(n).type==="critical"?(H(),G("div",Tx,"!")):Oe("",!0),y("div",Ax,he(w(n).title),1)])])):Oe("",!0),w(n).globalActions?(H(),G("div",Cx,[(H(),hn(cl(w(n).globalActions.component),hs(w(n).globalActions.props,fl(w(n).globalActions.on)),null,16))])):Oe("",!0),y("div",Ix,[w(n).message?(H(),G("div",Dx,he(w(n).message),1)):Oe("",!0),(H(),hn(cl(w(n).component),hs(w(n).props,fl(w(n).events),{ref_key:"inner",ref:i}),null,16)),y("div",Lx,[(H(!0),G(pe,null,tt(w(n).buttons,(a,c)=>(H(),G("button",{key:c,class:ht(["modal-button",`modal-button--${a.variant||"secondary"}`]),disabled:a.disabled,onClick:l=>r(a.value)},he(a.label),11,Rx))),128))])])],2)])):Oe("",!0)]),_:1}))}},Ox={key:0,class:"view-mode-banner"},Px={__name:"App",setup(e){const t=Fe(null),n=Fe(null),i=Ve(),r=gt();Wg();const{dataManager:s,saveData:o,handleFileUpload:a,outputToCocofolia:c}=Zg(),{printCharacterSheet:l,openPreviewPage:u}=Xg(),{handleSignInClick:d,handleSignOutClick:f,promptForDriveFolder:h,saveCharacterToDrive:p,saveOrUpdateCurrentCharacterInDrive:b}=Bg(s),{helpState:E,isHelpVisible:x,handleHelpIconMouseOver:C,handleHelpIconMouseLeave:k,handleHelpIconClick:v,closeHelpPanel:T}=Vg(n,t),{showAsyncToast:j}=ai();Ms();function L(){r.refreshDriveCharacters(s.googleDriveManager)}async function F(){await p(null,i.character.name)}async function A(re,ut){const en=s.loadDataFromDrive(re).then(le=>{le&&(Object.assign(i.character,le.character),i.skills.splice(0,i.skills.length,...le.skills),i.specialSkills.splice(0,i.specialSkills.length,...le.specialSkills),Object.assign(i.equipments,le.equipments),i.histories.splice(0,i.histories.length,...le.histories),r.currentDriveFileId=re,r.currentDriveFileName=ut)});j(en,{loading:q.googleDrive.load.loading(ut),success:q.googleDrive.load.success(ut),error:le=>q.googleDrive.load.error(le)})}const{openHub:R,openIoModal:P,openShareModal:N}=i0({dataManager:s,loadCharacterById:A,saveCharacterToDrive:p,handleSignInClick:d,handleSignOutClick:f,refreshHubList:L,saveNewCharacter:F,saveData:o,handleFileUpload:a,outputToCocofolia:c,printCharacterSheet:l,openPreviewPage:u,promptForDriveFolder:h,copyEditCallback:()=>{r.isViewingShared=!1}}),ie=We(()=>i.maxExperiencePoints),ae=We(()=>i.currentExperiencePoints),Le=We(()=>i.currentWeight),we=We(()=>r.experienceStatusClass);Xt(()=>i.character.initialScar,re=>{i.character.linkCurrentToInitialScar&&(i.character.currentScar=re)}),Xt(()=>i.character.linkCurrentToInitialScar,re=>{re&&(i.character.currentScar=i.character.initialScar)}),Xt(()=>i.character.name,re=>{document.title=re||q.ui.header.defaultTitle},{immediate:!0});const{initialize:ne}=o0(s);return oi(ne),(re,ut)=>(H(),G(pe,null,[se(rx,{ref_key:"mainHeader",ref:t,"help-state":w(E),"default-title":w(q).ui.header.defaultTitle,"cloud-hub-label":w(q).ui.header.cloudHub,"help-label":w(q).ui.header.helpLabel,onOpenHub:w(R),onHelpMouseover:w(C),onHelpMouseleave:w(k),onHelpClick:w(v)},null,8,["help-state","default-title","cloud-hub-label","help-label","onOpenHub","onHelpMouseover","onHelpMouseleave","onHelpClick"]),w(r).isViewingShared?(H(),G("div",Ox,he(w(q).ui.viewModeBanner),1)):Oe("",!0),se(Qy),se(dx,{"experience-status-class":we.value,"current-experience-points":ae.value,"max-experience-points":ie.value,"current-weight":Le.value,"save-local":w(o),"handle-file-upload":w(a),"open-hub":w(R),"save-to-drive":w(b),"experience-label":w(q).ui.footer.experience,"io-label":w(q).ui.footer.io,"share-label":w(q).ui.footer.share,"copy-edit-label":w(q).ui.footer.copyEdit,"is-viewing-shared":w(r).isViewingShared,onIo:w(P),onShare:w(N)},null,8,["experience-status-class","current-experience-points","max-experience-points","current-weight","save-local","handle-file-upload","open-hub","save-to-drive","experience-label","io-label","share-label","copy-edit-label","is-viewing-shared","onIo","onShare"]),se(_x,{ref_key:"helpPanelRef",ref:n,"is-visible":w(x),"help-text":w(ee).helpText,onClose:w(T)},null,8,["is-visible","help-text","onClose"]),se($x),se(kx)],64))}},Mx=xt(Px,[["__scopeId","data-v-6c867183"]]),Vd=$g(Mx);Vd.use(Mg());Vd.mount("#app");export{pe as F,xt as _,Ve as a,ai as b,Ms as c,We as d,G as e,H as f,w as g,y as h,Fe as i,Sa as j,se as k,Oe as l,q as m,ht as n,oi as o,Et as p,Fx as q,tt as r,fe as s,he as t,gt as u,Hx as v,Xt as w,yf as x,Ce as y,Xn as z};
